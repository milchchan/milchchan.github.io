!function(e){function t(t){for(var i,r,o=t[0],c=t[1],h=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(l&&l(t);d.length;)d.shift()();return n.push.apply(n,h||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},a={0:0},n=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var l=c;n.push([2,1]),s()}({2:function(e,t,s){"use strict";s.r(t);var i=s(1),a=s(0);firebase.initializeApp({apiKey:"AIzaSyDTVxDJj7rqG9L-Clvba2Tao9B0hkcxjcE",authDomain:"milchchan.firebaseapp.com",databaseURL:"https://milchchan.firebaseio.com",projectId:"milchchan",storageBucket:"milchchan.appspot.com",messagingSenderId:"355698971889",appId:"1:355698971889:web:e3653c5c31bd7289cd4550",measurementId:"G-3998FJYNWX"}),firebase.analytics();const n="debug"===decodeURIComponent(window.location.hash.substring(1));let r=firebase.database(),o=firebase.storage();const c=new i;c.domElement.style.position="fixed",c.domElement.style.top="auto",c.domElement.style.bottom="0",c.domElement.style.left="auto",c.domElement.style.right="0",n||c.domElement.classList.add("is-hidden");let h=0;let l=0;let u=0;window.addEventListener("load",e=>{"serviceWorker"in navigator&&(navigator.serviceWorker.register("sw.js").then(e=>{e.onupdatefound=function(){e.update()}}).catch(e=>{console.error(e.code,e.message)}),navigator.serviceWorker.addEventListener("message",e=>{null!==navigator.serviceWorker.controller&&"command"in e.data&&"caches"===e.data.command&&navigator.serviceWorker.controller.postMessage({command:"clear",caches:e.data.caches})}));var t=Vue.createApp({data:()=>({isDebug:n,isDarkMode:!1,isMuted:!0,isLoading:!1,isUpdating:!1,isLocating:!1,isRevealed:!1,isOverlayed:!1,isBlinded:!1,isPopup:!1,isExpanded:!1,isLearning:!1,isAnimating:!1,isHangingOn:!1,isSubmitting:!1,isDiscovering:!1,isStared:!1,isLocked:!1,canvasSize:{width:0,height:0,deviceWidth:0,deviceHeight:0,alternative:{width:0,height:0,deviceWidth:0,deviceHeight:0}},cachedImages:{},cachedSprites:[],alternativeCachedSprites:[],animationQueue:[],elapsed:0,map:null,layer:null,mode:null,queryQueue:[],queryCache:{},cachedTracks:{},cachedDocuments:[],documentQueue:[],sequenceQueue:[],progress:null,user:null,input:"",animatedInputLength:0,maxInputLength:100,inputHasError:!1,messages:[],maxMessages:10,word:null,recentWords:[],tags:[],maxTags:10,scrollTimeoutID:void 0,tickIntervalID:void 0,stars:-1,animatedStars:0,steps:0,isStepping:!1,animatedSteps:0,deviceMotion:null,stats:[],screenshot:null,notifications:[],notificationHeight:0,animatedNotificationHeight:0,inputHeight:0,animatedInputHeight:0,recentImages:[],backgroundImagesQueue:[],backgroundImages:[],preloadImages:[],isUploading:!1,animations:null,currentAnimations:[],blendShapeAnimations:[],insetTop:0,insetBottom:0,text:[],popupTextHeight:0,animatedPopupTextHeight:0,tickerWidth:0,animatedTickerWidth:0,leaderboard:[],leaderboardHeight:0,animatedLeaderboardHeight:0,message:null,states:{},character:null,alternative:null,wordDictionary:{},reverseWordDictionary:{},attributes:["名前","所属","時間","場所","する事","生き物","食べ物","飲み物","聞くもの","見るもの","読むもの","使う物","身につけるもの","乗り物","部位","病気"],chars:[]}),watch:{isMuted(e){try{localStorage.setItem("character",JSON.stringify({mute:e}))}catch(e){localStorage.removeItem("character")}},words:{handler:()=>{t.$nextTick(()=>{for(const e of document.body.querySelectorAll("#input>.columns:last-of-type>.column>.control .clip")){let s=0;for(const t of e.querySelectorAll(":scope .ticker-wrap .ticker .item"))s+=t.getBoundingClientRect().width;s>0&&(t.tickerWidth=Math.min(s/2,document.body.querySelector("#input>.columns:last-of-type>.column>.control .level").getBoundingClientRect().width),e.querySelector(":scope .ticker-wrap .ticker").style.width=s+"px")}})},deep:!0},tickerWidth(e){const t=this,s={width:this.animatedTickerWidth};Object(a.a)({targets:s,width:e,round:1,duration:500,easing:"linear",update:()=>{t.animatedTickerWidth=s.width}})},backgroundImages:{handler:()=>{t.$nextTick(()=>{const e=document.body.querySelectorAll("#app>.background>div");if(e.length>1){const t=e.length-1,s=15;let i=0,a=null;for(const n of e){const r=[];for(let t=0;t<e.length;t++)t===i?r.push({visibility:"visible"}):r.push({visibility:"hidden"});const o=n.animate(r,{fill:"forwards",easing:"steps("+t+")",duration:1e3/s*e.length,iterations:1/0});null===a?a=o.startTime:o.startTime=a,i++}}})},deep:!0},text:{handler:()=>{t.$nextTick(()=>{t.isPopup&&(t.popupTextHeight=t.$refs.popupText.getBoundingClientRect().height)})},deep:!0},popupTextHeight(e){const t={height:this.animatedPopupTextHeight};Object(a.a)({targets:t,height:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedPopupTextHeight=t.height}})},notifications:{handler:()=>{t.$nextTick(()=>{t.notificationHeight=t.$refs.notifications.getBoundingClientRect().height})},deep:!0},notificationHeight(e){const t={height:this.animatedNotificationHeight};Object(a.a)({targets:t,height:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedNotificationHeight=t.height}})},leaderboard:{handler:()=>{t.$nextTick(()=>{t.leaderboardHeight=t.$refs.leaderboard.getBoundingClientRect().height})},deep:!0},leaderboardHeight(e){const t={height:this.animatedLeaderboardHeight};Object(a.a)({targets:t,height:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedLeaderboardHeight=t.height}})},inputHeight(e){const t={height:this.animatedInputHeight};Object(a.a)({targets:t,height:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedInputHeight=t.height}})},stars(e){const t={count:this.animatedStars};Object(a.a)({targets:t,count:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedStars=t.count}})},steps(e){const t={count:this.animatedSteps};Object(a.a)({targets:t,count:e,round:100,duration:500,easing:"linear",update:()=>{this.animatedSteps=t.count}})},input:{handler:()=>{t.$nextTick(()=>{const e={count:t.animatedInputLength};Object(a.a)({targets:e,count:t.input.length,round:1,duration:500,easing:"linear",update:()=>{t.animatedInputLength=e.count}})})},deep:!0},chars:{handler:()=>{const e=[];for(const s of t.chars)for(const t of s)t.count>0&&e.push({set:t.set,count:t.count,timestamp:t.timestamp,checksum:[...String(t.timestamp)].reduce((e,t)=>e+t,0)+[...String(t.count)].reduce((e,t)=>e+t,0)});try{localStorage.setItem("fragments",JSON.stringify(e))}catch(e){localStorage.removeItem("fragments")}},deep:!0}},methods:{signIn:function(e){if(e===firebase.auth.GoogleAuthProvider.PROVIDER_ID)firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider).then(e=>{var t=e.credential;for(const t of e.user.providerData){firebase.auth().currentUser.updateProfile({displayName:t.displayName,photoURL:t.photoURL}).catch((function(e){console.error(e.code,e.message)}));break}r.ref("wonderland/users/"+e.user.uid).transaction((function(e){return e?(e.name=data.displayName,e.timestamp=timestamp):e={name:data.displayName,timestamp:timestamp},e}));try{localStorage.setItem("credential",JSON.stringify({providerId:t.providerId,accessToken:t.accessToken,idToken:t.idToken}))}catch(e){localStorage.removeItem("credential")}}).catch(e=>{console.error(e.code,e.message)});else if(e===firebase.auth.FacebookAuthProvider.PROVIDER_ID){const e=new firebase.auth.FacebookAuthProvider;e.addScope("public_profile"),firebase.auth().signInWithPopup(e).then(e=>{var t=e.credential;for(const t of e.user.providerData){firebase.auth().currentUser.updateProfile({displayName:t.displayName,photoURL:t.photoURL}).catch((function(e){console.error(e.code,e.message)}));break}r.ref("wonderland/users/"+e.user.uid).transaction((function(e){return e?(e.name=data.displayName,e.timestamp=timestamp):e={name:data.displayName,timestamp:timestamp},e}));try{localStorage.setItem("credential",JSON.stringify({providerId:t.providerId,accessToken:t.accessToken}))}catch(e){localStorage.removeItem("credential")}}).catch(e=>{console.error(e.code,e.message)})}else e===firebase.auth.TwitterAuthProvider.PROVIDER_ID&&firebase.auth().signInWithPopup(new firebase.auth.TwitterAuthProvider).then(e=>{var t=e.credential;const s=Math.floor(new Date/1e3);for(const t of e.user.providerData){const i=t.photoURL.replace(/_normal\.jpg$/,".jpg");firebase.auth().currentUser.updateProfile({displayName:t.displayName,photoURL:i}).catch((function(e){console.error(e.code,e.message)})),r.ref("wonderland/users/"+e.user.uid).transaction((function(i){return i?(i.name=t.displayName,i.link="https://twitter.com/"+e.additionalUserInfo.username,i.timestamp=s):i={name:t.displayName,link:"https://twitter.com/"+e.additionalUserInfo.username,timestamp:s},i}));break}try{localStorage.setItem("credential",JSON.stringify({providerId:t.providerId,accessToken:t.accessToken,secret:t.secret}))}catch(e){localStorage.removeItem("credential")}}).catch(e=>{console.error(e.code,e.message)})},signOut:function(e){firebase.auth().signOut().then(()=>{localStorage.removeItem("credential"),"serviceWorker"in navigator&&null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({command:"caches"})}).catch(e=>{console.error(e.code,e.message)})},refresh:function(e){this.update(!0)},update:async function(e=!1){this.isLoading=!0;const t=this,s=this.map.getCenter(),i=await this.fetch(e,s.latitude,s.longitude);if(e&&Object.keys(this.cachedTracks).forEach((function(e){for(const s of t.cachedTracks[e].handlers)Microsoft.Maps.Events.removeHandler(s);t.map.entities.remove(t.cachedTracks[e].pushpin),delete t.cachedTracks[e]})),null!==i){const e=Math.floor(new Date/1e3);let s=!1;for(const a in i)for(const n of i[a]){let i=null;for(const e in this.cachedTracks)if(n.id===this.cachedTracks[e].id){i=e;break}if(null===i){const i=new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(n.location.latitude,n.location.longitude),{title:n.name,subTitle:this.formatTime(e-n.timestamp),icon:"/images/Marker-Star.svg"});this.setImage(i,n.user),this.cachedTracks[i.id]=n,this.cachedTracks[i.id].pushpin=i,this.cachedTracks[i.id].handlers=[Microsoft.Maps.Events.addHandler(i,"click",async e=>{t.mode=this.cachedTracks[e.target.id],t.isRevealed=!0}),Microsoft.Maps.Events.addHandler(i,"dblclick",e=>{window.location.hash=t.cachedTracks[e.target.id].id})],this.map.entities.push(i),s=!0}else if(n.timestamp>this.cachedTracks[i].timestamp){const t=this.cachedTracks[i].pushpin,a=this.cachedTracks[i].handlers;t.setLocation(new Microsoft.Maps.Location(n.location.latitude,n.location.longitude)),t.setOptions({title:n.name,subTitle:this.formatTime(e-n.timestamp)}),this.setImage(t,n.user),this.cachedTracks[i]=n,this.cachedTracks[i].pushpin=t,this.cachedTracks[i].handlers=a,s=!0}}const a=[];for(const e in i)for(const t of i[e])a.push(t.id);if(Object.keys(this.cachedTracks).forEach((function(e){if(!a.some(s=>s===t.cachedTracks[e].id)){for(const s of t.cachedTracks[e].handlers)Microsoft.Maps.Events.removeHandler(s);t.map.entities.remove(t.cachedTracks[e].pushpin),delete t.cachedTracks[e],s=!0}})),s){const e=10;this.isUpdating=!0;const t=await new Promise(e=>{const t={},s=[];for(const e in i)for(const s of i[e])if(s.user.id in t)t[s.user.id].count++;else{const e=Object.assign({},s.user);e.count=1,t[s.user.id]=e}for(const e in t)s.push(t[e]);s.sort((e,t)=>t.count-e.count),e(s)});this.leaderboard.splice(0);for(const e of t)this.leaderboard.push(e);try{const t=await new Promise(t=>{const s=Math.pow(10,-6);let a=[],n=[],r={},o={},c=[],h=s;for(const e in i){let t=[],s=[];for(const a of i[e])t.push(a.name),s.includes(a.name)||(a.name in r?r[a.name]+=1:r[a.name]=1,s.push(a.name));a.push(t)}for(const e in r)r[e]=Math.log(a.length/(r[e]+s));for(const e of a){let t={};for(const s of e)s in t?t[s]+=1:t[s]=1;for(const s in t)t[s]/=e.length,s in o||(o[s]=0);n.push(t)}for(const e in o)for(const t of n)if(e in t){const s=t[e]*r[e];s>o[e]&&(o[e]=s)}for(const e in o)e.length>1&&"..."!=e&&c.push({term:e,value:o[e]});c.sort((e,t)=>t.value-e.value),c.length>e&&c.splice(e);for(const e of c)e.value>h&&(h=e.value);for(const e of c)e.value/=h;c.sort((e,t)=>e.term>t.term?1:e.term<t.term?-1:0),t([a,c])});this.cachedDocuments.splice(0),this.tags.splice(0);for(const e of t[0])this.cachedDocuments.push(e);for(let e=0;e<t[1].length;e++)this.tags.push({index:e,name:t[1][e].term,score:t[1][e].value})}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}this.isUpdating=!1}}this.isLoading=!1},fetch:async function(e,t,s){const i=this,a=this.encodeGeohash(t,s,{1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:2,9:2,10:3,11:3,12:4,13:4,14:4,15:5,16:5,17:5,18:6,19:6,20:6}[this.map.getZoom()]);let n=[a];const o=[],c={};let h=[],l=this.decodeGeohash(a);const u=Math.floor(new Date/1e3),d={};if(h.push(new Microsoft.Maps.Polygon([new Microsoft.Maps.Location(l.topleft.latitude,l.topleft.longitude),new Microsoft.Maps.Location(l.topright.latitude,l.topright.longitude),new Microsoft.Maps.Location(l.bottomright.latitude,l.bottomright.longitude),new Microsoft.Maps.Location(l.bottomleft.latitude,l.bottomleft.longitude),new Microsoft.Maps.Location(l.topleft.latitude,l.topleft.longitude)],{fillColor:"rgba(255, 0, 0, 0.5)",strokeColor:"red",strokeThickness:1})),a.length>2){const e=this.getNeighbors(a);for(const t in e)n.push(e[t]),l=this.decodeGeohash(e[t]),h.push(new Microsoft.Maps.Polygon([new Microsoft.Maps.Location(l.topleft.latitude,l.topleft.longitude),new Microsoft.Maps.Location(l.topright.latitude,l.topright.longitude),new Microsoft.Maps.Location(l.bottomright.latitude,l.bottomright.longitude),new Microsoft.Maps.Location(l.bottomleft.latitude,l.bottomleft.longitude),new Microsoft.Maps.Location(l.topleft.latitude,l.topleft.longitude)],{fillColor:"rgba(255, 0, 0, 0.5)",strokeColor:"red",strokeThickness:1}))}this.layer.setPrimitives(h),this.queryQueue.push(a);for(const t of n){if(!e&&t in this.queryCache&&u-this.queryCache[t].timestamp<60){for(const e of this.queryCache[t].data)o.push(e),t in c?c[t].push(e):c[t]=[e];continue}const s=await r.ref("wonderland/tracks").orderByChild("key").limitToLast(50).startAt(t).endAt(t.padEnd(12,"z")+"").once("value");if(d[t]={timestamp:u,data:[]},s.exists()){const e=s.val();for(const s in e)e[s].id=s,o.push(e[s]),d[t].data.push(e[s]),t in c?c[t].push(e[s]):c[t]=[e[s]]}}if(this.queryQueue.shift(),this.queryQueue.length>0)return null;for(const e in d)this.queryCache[e]=d[e];Object.keys(this.queryCache).forEach((function(e){u-i.queryCache[e].timestamp>=60&&delete i.queryCache[e]}));const f=this.take(o.sort((e,t)=>t.timestamp-e.timestamp),100);return Object.keys(c).forEach((function(e){for(let t=c[e].length-1;t>0;t--)f.includes(c[e][t])||c[e].splice(t,1);0===c[e].length&&delete c[e]})),c},startPedometer:async function(){const e=this;if(DeviceMotionEvent.requestPermission){if("granted"!==await DeviceMotionEvent.requestPermission())return}this.deviceMotion=t=>{if(t.accelerationIncludingGravity){const n=t.accelerationIncludingGravity,r=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);if(e.isStepping){if(r<9.8){const t=new Date,n=t.getTime()-6048e5,r=[];e.steps++,e.isStepping=!1;for(let s=e.stats.length-1;s>0;s--)e.stats[s].date.getTime()<=n?e.stats.splice(s,1):e.stats[s].date.getFullYear()!==t.getFullYear()&&e.stats[s].date.getMonth()!==t.getMonth()&&e.stats[s].date.getDate()!==t.getDate()&&r.push({date:e.stats[s].date.toISOString(),steps:e.stats[s].steps});r.unshift({date:new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0).toISOString(),steps:e.steps});try{localStorage.setItem("stats",JSON.stringify(r))}catch(e){localStorage.removeItem("stats")}if(e.steps%10==0){const t=[];let n=0,r=Number.MAX_SAFE_INTEGER;function s(e){var t=arguments;return e.replace(/\{(\d)\}/g,(function(e,s){return t[parseInt(s)+1]}))}for(const s of e.chars){let e=0;for(const i of s)t.push({path:{row:n,column:e},data:i}),e++,i.count<r&&(r=i.count);n++}for(let e=t.length-1;e>0;e--)t[e].data.count>r&&t.splice(e,1);const o=t[(i=0,a=t.length,i=Math.ceil(i),a=Math.floor(a),Math.floor(Math.random()*(a-i))+i)].path,c=[];e.chars[o.row][o.column].count++,e.chars[o.row][o.column].timestamp=Math.floor(new Date/1e3);for(const t of this.prepare(this.character.sequences.filter(e=>"Capture"===e.name),e.chars[o.row][o.column].set[0],this.character.sequences))"Message"===t.type?c.push({type:t.type,speed:t.speed,duration:t.duration,character:this.character,text:s(t.text,e.chars[o.row][o.column].set[0])}):(t.character=this.character,c.push(t));c.length>0&&this.sequenceQueue.push(c)}}}else r>12&&(e.isStepping=!0)}var i,a},window.addEventListener("devicemotion",this.deviceMotion,!0)},stopPedometer:function(){window.removeEventListener("devicemotion",this.deviceMotion,!0),this.deviceMotion=null},locate:async function(e){if("permissions"in navigator){const e=await navigator.permissions.query({name:"geolocation"});if("granted"==e.state||"prompt"==e.state){const e=this;this.isLocating=!0,navigator.geolocation.getCurrentPosition(t=>{e.isLocating=!1,e.map.setView({center:new Microsoft.Maps.Location(t.coords.latitude,t.coords.longitude),zoom:e.map.getZoom()<16?16:e.map.getZoom()})},t=>{e.isLocating=!1,e.notify({text:t.message,accent:e.character.accent,image:e.character.image}),console.error(t)},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})}}else{const e=this;this.isLocating=!0,navigator.geolocation.getCurrentPosition(t=>{e.isLocating=!1,e.map.setView({center:new Microsoft.Maps.Location(t.coords.latitude,t.coords.longitude),zoom:e.map.getZoom()<16?16:e.map.getZoom()})},t=>{e.isLocating=!1,e.notify({text:t.message,accent:e.character.accent,image:e.character.image}),console.error(t)},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})}},send:async function(e){if(this.isDebug)if(this.input.length>0){let e=[],t=[];for(const s of this.input.split(/\s/))this.backgroundImages.some(e=>e.id===s)?e.push(s):t.push(s);if(e.length>0&&t.length>0){for(const s of e)r.ref("wonderland/images/"+s).transaction((function(e){return e.tags=t,e}));this.isLearning=!1}else if(this.input.length<=this.maxInputLength){const e=this.map.getCenter();this.learn({name:this.input,location:{latitude:e.latitude,longitude:e.longitude}}),this.input="",this.isLearning=!1}}else for(const e of this.backgroundImages){this.input=e.id;break}else if(this.input.length>0&&this.input.length<=this.maxInputLength){const e=this.map.getCenter();this.learn({name:this.input,location:{latitude:e.latitude,longitude:e.longitude}}),this.input="",this.isLearning=!1}else this.shake(this.$refs.input)},setImage:async function(e,t,s=!1){if("image"in t){let s;try{s=await new Promise(async(e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=e=>{s(e)},t.image.startsWith("gs://")?i.src=await o.refFromURL(t.image).getDownloadURL():(i.crossOrigin="Anonymous",i.src=t.image)})}catch(t){return e.setOptions({icon:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n                            <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n                            <svg width="50" height="54" viewBox="0 0 50 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                                <g transform="matrix(0.999999,0,0,0.999999,17.0011,-13)">\n                                    <path d="M0,50L16,50L8,66L0,50Z" style="fill:rgb(255,238,0);"/>\n                                </g>\n                                <g transform="matrix(1.96491,0,0,1.96491,-30.0099,-24.5931)">\n                                    <circle cx="27.996" cy="25.239" r="12.214" style="fill:rgb(255,238,0);"/>\n                                    <g transform="matrix(0.410574,0,0,0.410574,34.0498,26.7694)">\n                                        <path d="M0,-7.29C-0.311,-8.247 -1.138,-8.944 -2.133,-9.089L-9.21,-10.117L-12.375,-16.529C-12.819,-17.432 -13.738,-18.003 -14.744,-18.003C-15.75,-18.003 -16.67,-17.432 -17.114,-16.53L-20.279,-10.117L-27.355,-9.089C-28.352,-8.944 -29.179,-8.247 -29.49,-7.29C-29.801,-6.333 -29.541,-5.283 -28.82,-4.581L-23.7,0.41L-24.908,7.459C-25.078,8.45 -24.672,9.452 -23.857,10.043C-23.043,10.635 -21.965,10.713 -21.074,10.244L-14.744,6.917L-8.415,10.244C-8.028,10.447 -7.606,10.548 -7.186,10.548C-6.638,10.548 -6.092,10.377 -5.632,10.043C-4.818,9.452 -4.41,8.45 -4.58,7.458L-5.789,0.41L-0.668,-4.581C0.052,-5.283 0.312,-6.333 0,-7.29" style="fill:white;fill-rule:nonzero;"/>\n                                    </g>\n                                </g>\n                            </svg>'}),void console.error(t)}const i=document.createElement("canvas"),a=i.getContext("2d");i.width=s.width,i.height=s.height,a.drawImage(s,0,0,s.width,s.height);const n='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n                        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n                        <svg width="50" height="54" viewBox="0 0 50 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n                            <g transform="matrix(0.999999,0,0,0.999999,17.0011,-13)">\n                                <path d="M0,50L16,50L8,66L0,50Z" style="fill:rgb(255,238,0);"/>\n                            </g>\n                            <g transform="matrix(1.96491,0,0,1.96491,-30.0099,-24.5931)">\n                                <circle cx="27.996" cy="25.239" r="12.214" style="fill:rgb(255,238,0);"/>\n                                <clipPath id="_clip1">\n                                    <circle cx="27.996" cy="25.239" r="12.214"/>\n                                </clipPath>\n                                <g clip-path="url(#_clip1)">\n                                    <g transform="matrix(0.791667,0,0,0.791667,5.83249,5.2582)">\n                                        <circle cx="27.996" cy="25.239" r="12.214" style="fill:white;"/>\n                                        <clipPath id="_clip2">\n                                            <circle cx="27.996" cy="25.239" r="12.214"/>\n                                        </clipPath>\n                                        <g clip-path="url(#_clip2)">\n                                            <g id="Background" transform="matrix(0.023856,0,0,0.023856,-2.53964,-5.29658)">\n                                                <use xlink:href="#_Image3" x="767" y="767" width="1026px" height="1026px"/>\n                                            </g>\n                                        </g>\n                                    </g>\n                                </g>\n                            </g>\n                            <defs>\n                                <image id="_Image3" width="1026px" height="1026px" xlink:href="'+i.toDataURL()+'"/>\n                            </defs>\n                        </svg>';e.setOptions({icon:n})}},change:function(e){this.input.length<=this.maxInputLength?this.inputHasError=!1:this.inputHasError=!0},upload:async function(e){function t(){let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(let t=0,s=e.length;t<s;t++)switch(e[t]){case"x":e[t]=Math.floor(16*Math.random()).toString(16);break;case"y":e[t]=(Math.floor(4*Math.random())+8).toString(16)}return e.join("")}const s=this,i=o.ref(),a=[],n=[];for(const t of e.target.files)a.push(t);this.isUploading=!0;for(const e of a.sort((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)){const r=i.child("images/"+t()).put(e);try{await new Promise((function(e,t){r.on("state_changed",(function(e){s.progress=e.bytesTransferred/e.totalBytes/a.length+n.length/a.length}),(function(e){t(e)}),(function(){e()}))}))}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}n.push(r.snapshot.ref.fullPath)}r.ref("wonderland/images").push({paths:n,timestamp:Math.floor(new Date/1e3)}),this.progress=null,this.isUploading=!1},learn:async function(e){function t(e){var t=arguments;return e.replace(/\{(\d)\}/g,(function(e,s){return t[parseInt(s)+1]}))}const s=[],i=[];if("attributes"in e)for(const t of this.attributes)t in e.attributes&&(e.attributes[t]>0?i.push({name:t,value:!0}):i.push({name:t,value:!1}));else{const t=await r.ref("wonderland/users/"+this.user.uid+"/dictionary/words/"+e.name).once("value");if(t.exists()){const e=t.val();for(const t of this.attributes)t in e.attributes&&(e.attributes[t]>0?i.push({name:t,value:!0}):i.push({name:t,value:!1}))}else for(const e of this.attributes)i.push({name:e,value:!1})}this.word={name:e.name,attributes:i},"location"in e&&(this.word.location=e.location),"user"in e&&(this.word.user=e.user);for(const i of this.prepare(this.character.sequences.filter(e=>"Learn"===e.name)))"Message"===i.type?s.push({type:i.type,speed:i.speed,duration:i.duration,text:t(i.text,e.name)}):s.push(i);s.length>0&&this.sequenceQueue.push(s)},check:function(e){for(const t of this.word.attributes)t===e.target.dataset.attribute&&(t.value=e.target.checked)},share:async function(e){const t=this,s="location"in e?e.location:this.map.getCenter(),i=this.encodeGeohash(s.latitude,s.longitude),a={id:this.user.uid,name:this.user.displayName,image:this.user.photoURL},n=Math.floor(new Date/1e3);if(e.name in this.wordDictionary&&delete this.wordDictionary[e.name],Object.keys(this.reverseWordDictionary).forEach(t=>{this.reverseWordDictionary[t].words.some(t=>t===e.name)&&delete this.reverseWordDictionary[t]}),this.isSubmitting=!0,this.user.providerData[0].providerId===firebase.auth.TwitterAuthProvider.PROVIDER_ID){const e=await r.ref(`wonderland/users/${this.user.uid}/link`).once("value");e.exists()&&(a.link=e.val())}r.ref("wonderland/users/"+this.user.uid+"/dictionary/words/"+e.name).transaction((function(t){if(!t){t={attributes:{},timestamp:n};for(const s of e.attributes)s.value?t.attributes[s.name]=n:t.attributes[s.name]=0;return"user"in e&&(t.user={id:e.user.id,name:e.user.name,image:e.user.image}),t}{let s=!1;for(const i of e.attributes){if(!(i.name in t.attributes)){s=!0;break}if(t.attributes[i.name]>0){if(!i.value){s=!0;break}}else if(i.value){s=!0;break}}if(s){let s=!0;const i={attributes:{}};for(const a of e.attributes)a.value?(a.name in t.attributes&&t.attributes[a.name]>0?i.attributes[a.name]=t.attributes[a.name]:i.attributes[a.name]=n-1,s=!1):i.attributes[a.name]=0;return s?null:(i.timestamp=n,i)}}}),(async function(o,c,h){if(c)if(h.exists()){const o=h.val(),c=[];for(const e in o.attributes)"number"==typeof o.attributes[e]&&o.attributes[e]>0&&t.attributes.includes(e)&&c.push(o.attributes[e]);if(1===c.length&&c[0]===o.timestamp){function l(e){var t=arguments;return e.replace(/\{(\d)\}/g,(function(e,s){return t[parseInt(s)+1]}))}r.ref("wonderland/users/"+t.user.uid+"/dictionary/count").transaction((function(e){return(e||0)+1}));for(const s of t.prepare(t.character.sequences.filter(e=>"Learned"===e.name)))"Message"===s.type&&t.notify({text:l(s.text,e.name),accent:t.character.accent,image:t.character.image});t.isStared=!0,window.setTimeout(()=>{t.isStared=!1},3e3),t.isMuted||t.$refs.twinkle.play()}"user"in e==!1||e.user.id===t.user.uid?r.ref("wonderland/tracks/"+await t.digestMessage(`${t.user.uid}&${e.name}`)).transaction((function(r){const c={};r?(r.key=`${i}${n}`,r.location={latitude:s.latitude,longitude:s.longitude},r.geohash=i,r.timestamp=n):r={key:`${i}${n}`,name:e.name,location:{latitude:s.latitude,longitude:s.longitude},geohash:i,user:a,timestamp:n};for(const e in o.attributes)t.attributes.includes(e)&&(c[e]=o.attributes[e]);return r.attributes=c,r}),(function(e,s,i){s?i.exists()&&t.update(!0):e&&(t.notify({text:e.message,accent:t.character.accent,image:t.character.image}),console.error(e)),t.isSubmitting=!1})):t.isSubmitting=!1}else r.ref("wonderland/users/"+t.user.uid+"/dictionary/count").transaction((function(e){return e&&e>1?e-1:null})),r.ref("wonderland/tracks/"+await t.digestMessage(`${t.user.uid}&${e.name}`)).transaction((function(e){return null}),(function(e,s,i){s?i.exists()||t.update(!0):e&&(t.notify({text:e.message,accent:t.character.accent,image:t.character.image}),console.error(e)),t.isSubmitting=!1}));else o?(t.notify({text:o.message,accent:t.character.accent,image:t.character.image}),console.error(o),t.isSubmitting=!1):"user"in e==!1||e.user.id===t.user.uid?r.ref("wonderland/tracks/"+await t.digestMessage(`${t.user.uid}&${e.name}`)).transaction((function(t){if(t){t.key=`${i}${n}`,t.location={latitude:s.latitude,longitude:s.longitude},t.geohash=i,t.user=a,t.timestamp=n;for(const s of e.attributes)s.value?t.attributes[s.name]=n-1:t.attributes[s.name]=0}else{t={key:`${i}${n}`,name:e.name,location:{latitude:s.latitude,longitude:s.longitude},geohash:i,attributes:{},user:a,timestamp:n};for(const s of e.attributes)s.value?t.attributes[s.name]=n:t.attributes[s.name]=0}return t}),(function(e,s,i){s?i.exists()&&t.update(!0):e&&(t.notify({text:e.message,accent:t.character.accent,image:t.character.image}),console.error(e)),t.isSubmitting=!1})):t.isSubmitting=!1}))},next:async function(e,t,s=50){let i;if(i=null===t?await r.ref("wonderland/users/"+e+"/dictionary/words").orderByKey().limitToFirst(s+1).once("value"):await r.ref("wonderland/users/"+e+"/dictionary/words").orderByKey().startAt(t).limitToFirst(s+1).once("value"),"words"in this.mode){const e=[];if(i.exists()){const t=i.val();null!==this.mode.words&&this.mode.words.length>0&&this.mode.indexes.push(this.mode.words[0]);for(const s in t)e.push("user"in t[s]?{name:s,attributes:t[s].attributes,user:t[s].user}:{name:s,attributes:t[s].attributes});this.mode.words.length===s+1?this.mode.next=this.mode.words.pop():this.mode.next=null}this.mode.words=e}},previous:async function(e,t,s=50){let i=await r.ref("wonderland/users/"+e+"/dictionary/words").orderByKey().startAt(t).limitToFirst(s).once("value");if("words"in this.mode&&i.exists()){const e=i.val();null!==this.mode.words&&this.mode.words.length>0&&(this.mode.next=this.mode.words[0]),this.mode.words=[];for(const t in e)this.mode.words.push("user"in e[t]?{name:t,attributes:e[t].attributes,user:e[t].user}:{name:t,attributes:e[t].attributes})}},discover:async function(){const e=this,t=[],s={},i=[];for(const e of this.recentWords)this.user.uid!==e.user.id&&(t.push(e),s[e.name]=e);for(const e in this.cachedTracks)this.user.uid!==this.cachedTracks[e].user.id&&this.cachedTracks[e].name in s==!1&&t.push(this.cachedTracks[e]);this.isDiscovering=!0;for(const s of function(e){let t=[].concat(e),s=e.length;for(;s>1;){const e=(i=0,a=s,i=Math.ceil(i),a=Math.floor(a),Math.floor(Math.random()*(a-i))+i);s--;const n=t[s];t[s]=t[e],t[e]=n}var i,a;return t}(t))try{if(null!==await new Promise((t,i)=>{r.ref("wonderland/users/"+e.user.uid+"/dictionary/words/"+s.name).transaction((function(e){if(!e)return e}),(function(e,s,a){s?t(a):e?i(e):t(null)}))})){function a(e){var t=arguments;return e.replace(/\{(\d)\}/g,(function(e,s){return t[parseInt(s)+1]}))}this.isDiscovering=!1;for(const e of this.prepare(this.character.alternative.sequences.filter(e=>"Discover"===e.name),s.name,this.character.alternative.sequences))"Message"===e.type?i.push({type:e.type,speed:e.speed,duration:e.duration,character:this.character.alternative,text:a(e.text,s.name)}):(e.character=this.character.alternative,i.push(e));return i.length>0&&this.sequenceQueue.push(i),this.learn({name:s.name,attributes:s.attributes,location:s.location,user:s.user}),void this.map.setView({center:new Microsoft.Maps.Location(s.location.latitude,s.location.longitude),zoom:e.map.getZoom()<16?16:e.map.getZoom()})}}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}this.isDiscovering=!1;for(const e of this.prepare(this.character.alternative.sequences.filter(e=>"Discover"===e.name),"",this.character.alternative.sequences))"Message"===e.type?i.push({type:e.type,speed:e.speed,duration:e.duration,character:this.character.alternative,text:e.text}):(e.character=this.character.alternative,i.push(e));i.length>0&&this.sequenceQueue.push(i)},digestMessage:async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")},activate:async function(){if(h=l=0,this.cachedDocuments.length>0){if(0==this.documentQueue.length){for(const e of function(e){let t=[].concat(e),s=e.length;for(;s>1;){const e=(i=0,a=s,i=Math.ceil(i),a=Math.floor(a),Math.floor(Math.random()*(a-i))+i);s--;const n=t[s];t[s]=t[e],t[e]=n}var i,a;return t}(this.cachedDocuments))this.documentQueue.push(e)}const e=this.documentQueue.shift();await this.talk(this.user.uid,e.filter(e=>e!==this.character.name))||this.talk(this.user.uid)}else this.talk(this.user.uid)},talk:async function(e,t=[]){let s=this.character.sequences.filter(e=>"Activate"===e.name),i=[];if(this.isLoading=!0,t.length>0){const a=Math.floor(new Date/1e3),n=3600,o=Object.assign({},this.states),c=new TinySegmenter,h=[],l=[];for(const s of t){if(s in this.wordDictionary==!1||a-this.wordDictionary[s].timestamp>=n){const t=await r.ref("wonderland/users/"+e+"/dictionary/words/"+s).once("value");if(this.wordDictionary[s]={attributes:[],timestamp:a},t.exists()){const e=t.val();for(let t in e.attributes)"number"==typeof e.attributes[t]&&e.attributes[t]>0&&this.attributes.includes(t)&&this.wordDictionary[s].attributes.push(t)}}for(const e of this.wordDictionary[s].attributes)h.includes(e)||h.push(e)}for(const u of function(e){let t=[].concat(e),s=e.length;for(;s>1;){const e=(i=0,a=s,i=Math.ceil(i),a=Math.floor(a),Math.floor(Math.random()*(a-i))+i);s--;const n=t[s];t[s]=t[e],t[e]=n}var i,a;return t}(s)){const s=this.prepare([u]);let d=!1;for(const o of s){if("Message"==o.type)for(const u of Array.isArray(o.text)?o.text:c.segment(o.text)){if(Array.isArray(u)){for(const a of s)if("Message"==a.type){const s=await this.generate(e,a.text,t);if(null===s){d=!0;break}{let e,t;[e,t]=s,i.push({type:a.type,speed:a.speed,duration:a.duration,text:e})}}else i.push(a);if(d)break;return i.length>0&&this.sequenceQueue.push(i),this.isLoading=!1,!0}if(u.length>1&&!l.includes(u)){if(u in this.wordDictionary==!1||a-this.wordDictionary[u].timestamp>=n){const t=await r.ref("wonderland/users/"+e+"/dictionary/words/"+u).once("value");if(this.wordDictionary[u]={attributes:[],timestamp:a},t.exists()){const e=t.val();for(const t in e.attributes)"number"==typeof e.attributes[t]&&e.attributes[t]>0&&this.attributes.includes(t)&&this.wordDictionary[u].attributes.push(t)}}for(const a of this.wordDictionary[u].attributes)if(h.includes(a)){for(const a of s)if("Message"==a.type){const s=await this.generate(e,a.text,t);if(null===s){d=!0;break}{let e,t;[e,t]=s,i.push({type:a.type,speed:a.speed,duration:a.duration,text:e})}}else i.push(a);if(d)break;return i.length>0&&this.sequenceQueue.push(i),this.isLoading=!1,!0}l.push(u)}}if(d){i.splice(0);break}}this.states=o}return this.isLoading=!1,!1}for(const t of this.prepare(s))if("Message"===t.type){const s=await this.generate(e,t.text);if(null===s)return this.isLoading=!1,!1;{let e,a;[e,a]=s,i.push({type:t.type,speed:t.speed,duration:t.duration,text:e})}}else i.push(t);return i.length>0?(this.sequenceQueue.push(i),this.isLoading=!1,!0):(this.isLoading=!1,!1)},generate:async function(e,t,s=[]){function i(e){let t=[],s=Number.MIN_VALUE,i=0;for(let t=0;t<e.length;t++)e[t]>s&&(s=e[t]);for(let t=0;t<e.length;t++)i+=Math.exp(e[t]-s);for(let a=0;a<e.length;a++)t.push(Math.exp(e[a]-s)/i);return t}const a=Math.floor(new Date/1e3);let n=new TinySegmenter,o=Array.isArray(t)?t:n.segment(t),c={},h=[],l=new RegExp("[.#$\\[\\]]"),u={},d="",f=0;const m=Math.pow(10,-6);let p=[{sequence:[],score:1}];for(const t of s){if(t in this.wordDictionary==!1||a-this.wordDictionary[t].timestamp>=3600){const s=await r.ref("wonderland/users/"+e+"/dictionary/words/"+t).once("value");if(this.wordDictionary[t]={attributes:[],timestamp:a},s.exists()){const e=s.val();for(const s in e.attributes)"number"==typeof e.attributes[s]&&e.attributes[s]>0&&this.attributes.includes(s)&&this.wordDictionary[t].attributes.push(s)}}for(const e of this.wordDictionary[t].attributes)e in c?c[e].push(t):c[e]=[t]}for(const t of o){if(!h.includes(t)){if(Array.isArray(t)){let s=[],n=[];for(const i of t)if(i in c){for(const e of c[i])if(!s.includes(e)){let t=!0;s.push(e);for(const s of this.tags)if(e===s.name){n.push(s.score),t=!1;break}t&&n.push(m)}}else{if(i in this.reverseWordDictionary==!1||a-this.reverseWordDictionary[i].timestamp>=3600){const t=await r.ref("wonderland/users/"+e+"/dictionary/words").orderByChild("attributes/"+i).limitToLast(100).startAt(1).once("value");if(this.reverseWordDictionary[i]={words:[],timestamp:a},t.exists()){const e=t.val();for(const t in e)this.reverseWordDictionary[i].words.push(t)}}for(const e of this.reverseWordDictionary[i].words)if(o.includes(e)&&!s.includes(e)){let t=!0;s.push(e);for(const s of this.tags)if(e==s.name){n.push(s.score),t=!1;break}t&&n.push(m)}}if(s.length>0&&n.length>0){const e=i(n);let t=[];for(let i=0;i<p.length;i++)for(let a=0;a<e.length;a++){let n=[].concat(p[i].sequence);n.push({index:f,term:s[a]}),t.push({sequence:n,score:p[i].score*e[a]})}p.splice(0);for(const e of this.take(t.sort((e,t)=>t.score-e.score),10))p.push(e)}}else if(!l.test(t)){let s=[],n=[];if(t in this.wordDictionary==!1||a-this.wordDictionary[t].timestamp>=3600){const s=await r.ref("wonderland/users/"+e+"/dictionary/words/"+t).once("value");if(this.wordDictionary[t]={attributes:[],timestamp:a},s.exists()){const e=s.val();for(const s in e.attributes)"number"==typeof e.attributes[s]&&e.attributes[s]>0&&this.attributes.includes(s)&&this.wordDictionary[t].attributes.push(s)}}for(const i of this.wordDictionary[t].attributes)if(i in c){for(const e of c[i])if(!s.includes(e)){let t=!0;s.push(e);for(const s of this.tags)if(e===s.name){n.push(s.score),t=!1;break}t&&n.push(m)}}else{if(i in this.reverseWordDictionary==!1||a-this.reverseWordDictionary[i].timestamp>=3600){const t=await r.ref("wonderland/users/"+e+"/dictionary/words").orderByChild("attributes/"+i).limitToLast(100).startAt(1).once("value");if(this.reverseWordDictionary[i]={words:[],timestamp:a},t.exists()){const e=t.val();for(let t in e)this.reverseWordDictionary[i].words.push(t)}}for(const e of this.reverseWordDictionary[i].words)if(o.includes(e)&&!s.includes(e)){let t=!0;s.push(e);for(const s of this.tags)if(e==s.name){n.push(s.score),t=!1;break}t&&n.push(m)}}if(s.length>0&&n.length>0){const e=i(n);let t=[];for(let i=0;i<p.length;i++)for(let a=0;a<e.length;a++){let n=[].concat(p[i].sequence);n.push({index:f,term:s[a]}),t.push({sequence:n,score:p[i].score*e[a]})}p.splice(0);for(const e of this.take(t.sort((e,t)=>t.score-e.score),10))p.push(e)}}h.push(t)}f++}const g=p[function(e){const t=Math.random();let s=0,i=0;for(let a of e){if(s<=t&&t<s+a)break;s+=a,i++}return i}(i(p.map(e=>e.score)))];for(let e=0;e<o.length;e++){const t=JSON.stringify(o[e]);if(t in u)void 0===u[t]?d+=o[e]:d+=u[t];else{let s=!0;for(let i=0;i<g.sequence.length;i++)if(g.sequence[i].index==e){t==g.sequence[i].term?u[t]=void 0:(u[t]=g.sequence[i].term,d+=g.sequence[i].term,s=!1);break}if(s){if(Array.isArray(o[e]))return null;d+=o[e]}}}return[d,u]},notify:function(e,t=3e3){const s=this;e.id=window.setTimeout(e=>{for(let t=0;t<s.notifications.length;t++)if(s.notifications[t].id===e.id){s.notifications.splice(t,1);break}},t,e),this.notifications.unshift(e)},blinded:async function(){if(0==this.backgroundImagesQueue.length){for(const e of function(e){let t=[].concat(e),s=e.length;for(;s>1;){const e=(i=0,a=s,i=Math.ceil(i),a=Math.floor(a),Math.floor(Math.random()*(a-i))+i);s--;const n=t[s];t[s]=t[e],t[e]=n}var i,a;return t}(this.recentImages))this.backgroundImagesQueue.push(e)}const e=this.backgroundImagesQueue.shift();this.preloadImages.splice(0),this.backgroundImages.splice(0);for(const t of e.paths)try{this.preloadImages.push({id:e.id,url:await o.ref().child(t).getDownloadURL(),timestamp:e.timestamp})}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}"tags"in e&&this.talk(this.user.uid,e.tags.filter(e=>e!==this.character.name))},load:function(e){let t=!0;for(let s of this.preloadImages)s.url==e?s.isLoaded=!0:"isLoaded"in s||(t=!1);if(t){let e=0;for(const t of this.preloadImages)t.isLoaded&&(this.backgroundImages.push({index:e,id:t.id,url:t.url,timestamp:t.timestamp}),e++);this.preloadImages.splice(0),this.isBlinded=!1}},error:function(e){let t=!0;for(let s of this.preloadImages)s.url==e?s.isLoaded=!0:"isLoaded"in s||(t=!1);if(t){let e=0;for(const t of this.preloadImages)t.isLoaded&&(this.backgroundImages.push({index:e,id:t.id,url:t.url,timestamp:t.timestamp}),e++);this.preloadImages.splice(0),this.isBlinded=!1}},shake:function(e){e.animate([{transform:"translate3d(0, 0, 0)"},{transform:"translate3d(8px, 0, 0)"},{transform:"translate3d(-8px, 0, 0)"},{transform:"translate3d(7px, 0, 0)"},{transform:"translate3d(-7px, 0, 0)"},{transform:"translate3d(6px, 0, 0)"},{transform:"translate3d(-6px, 0, 0)"},{transform:"translate3d(5px, 0, 0)"},{transform:"translate3d(-5px, 0, 0)"},{transform:"translate3d(4px, 0, 0)"},{transform:"translate3d(-4px, 0, 0)"},{transform:"translate3d(3px, 0, 0)"},{transform:"translate3d(-3px, 0, 0)"},{transform:"translate3d(2px, 0, 0)"},{transform:"translate3d(-2px, 0, 0)"},{transform:"translate3d(1px, 0, 0)"},{transform:"translate3d(-1px, 0, 0)"},{transform:"translate3d(0, 0, 0)"}],{duration:1e3,iterations:1})},scrollToTop(){this.$nextTick(()=>{window.scroll(0,0)})},scrollToEnd:function(){"number"==typeof this.scrollTimeoutID&&clearTimeout(this.scrollTimeoutID),this.scrollTimeoutID=setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}),500)},formatDate:function(e){return moment.locale(window.navigator.language),moment(e).format("LT")},animationStart:function(e){this.isAnimating=!0},animationEnd:function(e){const t=this;this.$nextTick(()=>{t.notificationHeight=t.$refs.notifications.getBoundingClientRect().height,t.leaderboardHeight=t.$refs.leaderboard.getBoundingClientRect().height}),this.isPopup||(this.message=null),this.isAnimating=!1},tickerUpdated:function(e){const t=this;this.$nextTick(()=>{for(const e of document.body.querySelectorAll("#input>.columns:last-of-type>.column>.control .clip")){let s=0;for(const t of e.querySelectorAll(":scope .ticker-wrap .ticker .item"))s+=t.getBoundingClientRect().width;s>0&&(t.tickerWidth=Math.min(s/2,document.body.querySelector("#input>.columns:last-of-type>.column>.control .level").getBoundingClientRect().width),e.querySelector(":scope .ticker-wrap .ticker").style.width=s+"px")}})},range:function(e,t){const s=[];for(const i of t)s.push(new Date(new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime()+24*i*60*60*1e3));return s},arrange:function(e,t){let s=[],i=[];for(const a of e)i.length<t?i.push(a):(s.push(i),i=[a]);return s.push(i),s},take:function(e,t){if(e.length>t){let s=[].concat(e);return s.splice(t),s}return e},reverse:function(e){return[].concat(e).reverse()},formatTime:function(e){const t=Math.floor(e),s=Math.floor(t/86400),i=Math.floor(t/3600),a=Math.floor(t/60);return s>0?s+"d":a>0?i>0?i+"h":a+"m":t%60+"s"},digestMessage:async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")},getDistance:function(e,t,s,i){var a=this.deg2rad(s-e),n=this.deg2rad(i-t),r=Math.sin(a/2)*Math.sin(a/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(s))*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))},deg2rad:function(e){return e*(Math.PI/180)},encodeGeohash:function(e,t,s=12){const i=[16,8,4,2,1];var a=1,n=[],r=[],o=0,c=0;let h="";for(n[0]=-90,n[1]=90,r[0]=-180,r[1]=180;h.length<s;){if(a){const e=(r[0]+r[1])/2;t>e?(c|=i[o],r[0]=e):r[1]=e}else{const t=(n[0]+n[1])/2;e>t?(c|=i[o],n[0]=t):n[1]=t}a=!a,o<4?o++:(h+="0123456789bcdefghjkmnpqrstuvwxyz"[c],o=0,c=0)}return h},decodeGeohash:function(e){const t=[16,8,4,2,1];var s=1,i=[],a=[];i[0]=-90,i[1]=90,a[0]=-180,a[1]=180;for(var n=0;n<e.length;n++)for(var r=e[n],o="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(r),c=0;c<5;c++){const e=t[c];s?(2,o&e?a[0]=(a[0]+a[1])/2:a[1]=(a[0]+a[1])/2):(2,o&e?i[0]=(i[0]+i[1])/2:i[1]=(i[0]+i[1])/2),s=!s}return i[2]=(i[0]+i[1])/2,a[2]=(a[0]+a[1])/2,{latitude:i[2],longitude:a[2],topleft:{latitude:i[0],longitude:a[0]},topright:{latitude:i[1],longitude:a[0]},bottomright:{latitude:i[1],longitude:a[1]},bottomleft:{latitude:i[0],longitude:a[1]}}},getNeighbors:function(e){const t=this.calculateAdjacent(e,"right"),s=this.calculateAdjacent(e,"left");return{top:this.calculateAdjacent(e,"top"),bottom:this.calculateAdjacent(e,"bottom"),right:t,left:s,topleft:this.calculateAdjacent(s,"top"),topright:this.calculateAdjacent(t,"top"),bottomright:this.calculateAdjacent(t,"bottom"),bottomleft:this.calculateAdjacent(s,"bottom")}},calculateAdjacent:function(e,t){const s={right:{even:"bc01fg45238967deuvhjyznpkmstqrwx"},left:{even:"238967debc01fg45kmstqrwxuvhjyznp"},top:{even:"p0r21436x8zb9dcf5h7kjnmqesgutwvy"},bottom:{even:"14365h7k9dcfesgujnmqp0r2twvyx8zb"}},i={right:{even:"bcfguvyz"},left:{even:"0145hjnp"},top:{even:"prxz"},bottom:{even:"028b"}};s.bottom.odd=s.left.even,s.top.odd=s.right.even,s.left.odd=s.bottom.even,s.right.odd=s.top.even,i.bottom.odd=i.left.even,i.top.odd=i.right.even,i.left.odd=i.bottom.even,i.right.odd=i.top.even;var a=(e=e.toLowerCase()).charAt(e.length-1),n=e.length%2?"odd":"even",r=e.substring(0,e.length-1);return-1!=i[t][n].indexOf(a)&&(r=this.calculateAdjacent(r,t)),r+"0123456789bcdefghjkmnpqrstuvwxyz"[s[t][n].indexOf(a)]},prepare:function(e,t=null,s=null){function i(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}let a=[],n=[];for(const s of e){const e=t;if(null===t&&s.name in this.states&&(e=this.states[s.name]),null!==e&&"state"in s&&null!==s.state){new RegExp(s.state).test(e)&&a.push(s)}}if(0===a.length){for(const t of e)"state"in t!=!1&&null!==t.state||a.push(t);t=null}if(a.length>0){let e=[];for(const s of a[i(0,a.length)].sequence)null!==t&&(this.states[s.name]=t),e.push(s);for(;e.length>0;){const t=e.shift();if("Sequence"==t.type){if("sequence"in t==!1){let a=[],n=[];for(const e of null===s?this.character.sequences:s){let s=this.getSequenceStack(e,t);if(s.length>0){let e=[];do{let t=s.pop();if(s.length>0){let i=[];for(const a of s[s.length-1].sequence)if("Sequence"==a.type){if("sequence"in a){let t=!0;for(const s of e)if(s===a){t=!1;break}t&&i.push(a)}if(a===t)break}for(;i.length>0;)e.push(i.pop())}if("sequence"in t){let s=!0;for(const i of e)if(i===t){s=!1;break}s&&e.push(t)}}while(s.length>0);for(;e.length>0;)a.push(e.pop())}else a.push(e)}if("state"in t){this.states[t.name]=t.state;for(const e of a)if(e.name==t.name){if(!new RegExp(e.state).test(t.state))continue;n.push(e)}}else for(const e of a)if(e.name==t.name){if("state"in e){if(e.name in this.states==!1)continue;if(!new RegExp(e.state).test(this.states[e.name]))continue}n.push(e)}if(n.length>0){let t=0;for(const s of n[i(0,n.length)].sequence)e.splice(t,0,s),t++}}}else n.push(t)}}return n},getSequenceStack:function(e,t){let s=[];if(s.push(e),s[s.length-1]!==t){if("sequence"in e)for(const i of e.sequence)if("Sequence"==i.type){let e=this.getSequenceStack(i,t);if(e.length>0&&e[e.length-1]===t){let t=[];do{t.push(e.pop())}while(e.length>0);do{s.push(t.pop())}while(t.length>0);return s}}s.pop()}return s},animate:async function(e){if(requestAnimationFrame(this.animate),null!==this.character){const i=(e-this.elapsed)/1e3;if(this.elapsed=e,this.sequenceQueue.length>0&&Array.isArray(this.sequenceQueue[0]))h=0;else if(h+=i,this.isLoading||(l+=i),0==this.sequenceQueue.length)if(l>=10){if(this.cachedDocuments.length>0){if(0==this.documentQueue.length){for(const e of function(e){let t=[].concat(e),s=e.length;for(;s>1;){const e=(i=0,a=s,i=Math.ceil(i),a=Math.floor(a),Math.floor(Math.random()*(a-i))+i);s--;const n=t[s];t[s]=t[e],t[e]=n}var i,a;return t}(this.cachedDocuments))this.documentQueue.push(e)}const e=this.documentQueue.shift();this.talk(this.user.uid,e.filter(e=>e!==this.character.name))}h=l=0}else h>=5&&(this.sequenceQueue.push({sequences:this.prepare(this.character.sequences.filter(e=>"Idle"===e.name))}),h=0);if(!this.isLocked&&this.sequenceQueue.length>0){const e=Array.isArray(this.sequenceQueue[0])?this.sequenceQueue[0]:this.sequenceQueue[0].sequences;if(e.length>0)if("Animation"==e[0].type){if("frames"in e[0])for(const t of e[0].frames)if(Array.isArray(t))"character"in e[0]?this.animationQueue.push({character:e[0].character,images:t}):this.animationQueue.push({character:this.character,images:t});else if("object"==typeof t&&"iterations"in t)if("images"in t){const s="character"in e[0]?e[0].character:this.character;for(let e=0;e<t.iterations;e++)this.animationQueue.push({character:s,images:t.images})}else if("sprites"in t){const s="character"in e[0]?e[0].character:this.character;for(let e=0;e<t.iterations;e++)this.animationQueue.push({character:s,images:t.sprites})}e.shift()}else"Message"==e[0].type&&null===this.message&&0===this.animationQueue.length&&("character"in e[0]?this.message={time:0,duration:e[0].duration,type:{elapsed:-1,speed:e[0].speed,reverse:!1,buffer:"",count:0},character:e[0].character,text:e[0].text}:this.message={time:0,duration:e[0].duration,type:{elapsed:-1,speed:e[0].speed,reverse:!1,buffer:"",count:0},character:{name:this.character.name,accent:this.character.accent,image:this.character.image},text:e[0].text},e.shift());else if(null===this.message&&0===this.animationQueue.length){const e=this;return Object.keys(this.cachedImages).forEach((function(t){e.cachedSprites.some(e=>e.source===t)||delete e.cachedImages[t]})),this.sequenceQueue.shift(),void(this.alternative=null)}}if(null!==this.message){if(this.message.type.reverse)if(this.message.type.count>0){if(this.message.type.elapsed+=2*i,this.message.type.elapsed>=1/this.message.type.speed){if(this.message.type.count-1<this.message.text.length){let e=Math.floor(this.message.text.length/2);this.message.type.buffer.length<=e&&this.message.type.count>0&&(this.message.type.count-=1),this.message.type.buffer.length>0&&(this.message.type.buffer=this.message.type.buffer.substring(0,this.message.type.buffer.length-1))}this.message.type.elapsed=0}}else this.isPopup=!1;else if(this.message.type.buffer.length<this.message.text.length){if(this.message.type.elapsed>=0?this.message.type.elapsed+=i:this.isAnimating||(this.isPopup?this.message.type.elapsed=i:this.isPopup=!0),this.message.type.elapsed>=1/this.message.type.speed){let e=this.message.type.buffer.length,t=Math.floor(this.message.text.length/2),s=this.message.text.length;this.message.type.count>=t&&(this.message.type.buffer+=this.message.text.charAt(e)),this.message.type.count<s&&(this.message.type.count+=1),this.message.type.elapsed=0}}else this.message.time+=i,this.message.time>=this.message.duration&&(this.message.type.reverse=!0);if(this.message.text.length===this.message.type.buffer.length){const e=this.message.text.split("");this.text.splice(0);for(let t=0;t<e.length;t++)this.text.push({key:t,value:e[t]})}else{let e=new Array,i="";for(let t=0;t<this.message.text.length;t++)-1==e.indexOf(this.message.text.charAt(t))&&"\n"!=this.message.text.charAt(t)&&null==this.message.text.charAt(t).match(/\s/)&&e.push(this.message.text.charAt(t));if(e.length>0)for(let a=0;a<this.message.type.count;a++)"\n"==this.message.text.charAt(a)?i+="\n":i+=e[(t=0,s=e.length,t=Math.ceil(t),s=Math.floor(s),~~(Math.floor(Math.random()*(s-t))+t))];if(i.length>this.message.type.buffer.length){const e=(this.message.type.buffer+i.substring(this.message.type.buffer.length,i.length)).split("");this.text.splice(0);for(let t=0;t<e.length;t++)this.text.push({key:t,value:e[t]})}else if(this.text.length!==this.message.type.buffer.length){const e=this.message.type.buffer.split("");this.text.splice(0);for(let t=0;t<e.length;t++)this.text.push({key:t,value:e[t]})}}}if(this.animationQueue.length>0){const e=this.animationQueue[0];if(!this.isLocked){const t=[];for(const e of this.animationQueue)t.push(e);this.isLocked=!0;for(const e of t)for(const t of e.images)if(t.source in this.cachedImages==!1)try{const e=await new Promise(async(e,s)=>{const i=new Image;i.onload=()=>{e(i)},i.onerror=e=>{s(e)},i.crossOrigin="Anonymous",i.src=t.source});this.cachedImages[t.source]=e}catch(e){console.error(e)}if(this.isLocked=!1,e.character.name===this.character.name){this.cachedSprites.splice(0);for(const t of this.render(this.$refs.canvas.getContext("2d"),this.canvasWidth,this.canvasHeight,e.images))this.cachedSprites.push(t)}else{this.alternative=this.character.alternative,this.alternativeCachedSprites.splice(0);for(const t of this.render(this.$refs.alternative.getContext("2d"),this.alternativeCanvasWidth,this.alternativeCanvasHeight,e.images))this.alternativeCachedSprites.push(t)}this.animationQueue.shift()}}}var t,s},render:function(e,t,s,i){const a=[];e.clearRect(0,0,t,s);for(const t of i)t.source in this.cachedImages&&(e.globalAlpha="opacity"in t?t.opacity:1,e.drawImage(this.cachedImages[t.source],t.x*window.devicePixelRatio,t.y*window.devicePixelRatio,t.width*window.devicePixelRatio,t.height*window.devicePixelRatio)),a.push(t);return a}},updated:function(){this.insetTop=this.$refs.indicator.getBoundingClientRect().height,this.insetBottom=this.$refs.blank.getBoundingClientRect().height},mounted:async function(){function e(e,t){const s=Math.random();let i=0,a=0;for(let n of e){const e=t(n);if(i<=s&&s<i+e)break;i+=e,a++}return e[a]}const t=this,s=localStorage.getItem("character"),i=localStorage.getItem("credential"),a=localStorage.getItem("stats"),n=localStorage.getItem("fragments");let o,h=null;const l=[{path:"/assets/milch.json",probability:1}],u=[{path:"/assets/merku.json",probability:1}];if(s)try{const e=JSON.parse(s);null!==e&&(this.isMuted=e.mute)}catch(e){localStorage.removeItem("character")}if(i)try{h=JSON.parse(i)}catch(e){localStorage.removeItem("credential")}if(a){const e=(new Date).getTime()-6048e5;try{for(const t of JSON.parse(a)){const s=new Date(t.date);s.getTime()>e&&this.stats.push({date:s,steps:t.steps})}}catch(e){localStorage.removeItem("stats")}}if(n)try{o=JSON.parse(n)}catch(e){localStorage.removeItem("fragments"),o=[]}else o=[];this.$refs.container.after(c.domElement),this.insetTop=this.$refs.indicator.getBoundingClientRect().height,this.insetBottom=this.$refs.blank.getBoundingClientRect().height,this.map=new Microsoft.Maps.Map(this.$refs.map,{mapTypeId:Microsoft.Maps.MapTypeId.canvasLight}),this.map.setOptions({enableHighDpi:window.devicePixelRatio>1,showLocateMeButton:!1,showMapTypeSelector:!1,showZoomButtons:!1,showScalebar:!1,supportedMapTypes:[Microsoft.Maps.MapTypeId.grayscale,Microsoft.Maps.MapTypeId.canvasLight,Microsoft.Maps.MapTypeId.canvasDark]}),this.layer=new Microsoft.Maps.Layer,this.layer.setVisible(!1),this.map.layers.insert(this.layer),Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",()=>{null!==t.user&&t.update()});try{this.progress=1;const t=await fetch(e(l,e=>e.probability).path,{mode:"cors",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!t.ok)throw new Error(t.statusText);{const s=await t.json(),i=this.prepare(s.sequences.filter(e=>"Start"===e.name),null,s.sequences),a=await fetch(e(u,e=>e.probability).path,{mode:"cors",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});let n;if(!a.ok)throw new Error(a.statusText);n=await a.json();const r=await fetch("/assets/fragments.json",{mode:"cors",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!r.ok)throw new Error(r.statusText);{const e=Math.floor(new Date/1e3),t=(new Date).getTime()-864e5;for(const s of await r.json()){const i=[];for(const a of s){const s=o.find(e=>a.some(t=>e.set.includes(t))&&e.count>0&&1e3*e.timestamp>t&&e.checksum===[...String(e.timestamp)].reduce((e,t)=>e+t,0)+[...String(e.count)].reduce((e,t)=>e+t,0));void 0===s?i.push({set:a,index:0,count:0,timestamp:e}):i.push({set:a,index:0,count:s.count,timestamp:s.timestamp})}this.chars.push(i)}}this.progress=null,this.canvasSize.width=s.width,this.canvasSize.height=s.height,this.canvasSize.deviceWidth=s.width*window.devicePixelRatio,this.canvasSize.deviceHeight=s.height*window.devicePixelRatio,this.canvasSize.alternative.width=n.width,this.canvasSize.alternative.height=n.height,this.canvasSize.alternative.deviceWidth=n.width*window.devicePixelRatio,this.canvasSize.alternative.deviceHeight=n.height*window.devicePixelRatio;for(const e of i)if("Animation"==e.type&&"frames"in e&&e.frames.length>0){let t=null;if(Array.isArray(e.frames[0])?t=e.frames[0]:"object"==typeof e.frames[0]&&"iterations"in e.frames[0]&&("images"in e.frames[0]&&e.frames[0].images.length>0?t=e.frames[0].images:"sprites"in e.frames[0]&&e.frames[0].sprites.length>0&&(t=e.frames[0].sprites)),null!==t){for(const e of t)if(e.source in this.cachedImages==!1)try{const t=await new Promise(async(t,s)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=e=>{s(e)},i.crossOrigin="Anonymous",i.src=e.source});this.cachedImages[e.source]=t}catch(e){console.error(e)}this.cachedSprites.splice(0);for(const e of this.render(this.$refs.canvas.getContext("2d"),this.canvasWidth,this.canvasHeight,t))this.cachedSprites.push(e)}break}this.character=s,this.character.alternative=n,this.sequenceQueue.push(i)}}catch(e){this.progress=null,this.notify({text:e.message}),console.error(e)}this.animate(),null===h?(this.mode="sign-in",this.isRevealed=!0):h.providerId===firebase.auth.GoogleAuthProvider.PROVIDER_ID?firebase.auth().signInWithCredential(firebase.auth.GoogleAuthProvider.credential(h.idToken)).catch(e=>{console.error(e.code,e.message)}):h.providerId===firebase.auth.FacebookAuthProvider.PROVIDER_ID?firebase.auth().signInWithCredential(firebase.auth.FacebookAuthProvider.credential(h.accessToken)).catch(e=>{console.error(e.code,e.message)}):h.providerId===firebase.auth.TwitterAuthProvider.PROVIDER_ID?firebase.auth().signInWithCredential(firebase.auth.TwitterAuthProvider.credential(h.accessToken,h.secret)).catch(e=>{console.error(e.code,e.message)}):(this.mode="sign-in",this.isRevealed=!0),firebase.auth().onAuthStateChanged((function(e){if(e){const s=new Date;t.user=e,t.update();for(const e of t.stats)e.date.getFullYear()===s.getFullYear()&&e.date.getMonth()===s.getMonth()&&e.date.getDate()===s.getDate()&&(t.steps=e.steps);r.ref("wonderland/users/"+e.uid+"/dictionary/count").on("value",e=>{const s=e.val();t.stars=null===s?0:s}),r.ref("wonderland/tracks").orderByChild("timestamp").limitToLast(10).on("value",e=>{if(e.exists()){const s=e.val(),i=[];let a=0;for(const e in s)s[e].id=e,i.push(s[e]);for(const e of i.sort((e,t)=>t.timestamp-e.timestamp)){let s=-1;for(let i=0;i<t.recentWords.length;i++)if(t.recentWords[i].name==e.name){s=i;break}s>=0&&t.recentWords.splice(s,1),t.recentWords.splice(a,0,e),a++}for(let e=t.recentWords.length-1;e>=a;e--)t.recentWords.splice(e,1)}})}else null!==t.user&&(r.ref("wonderland/users/"+t.user.uid+"/dictionary/count").off("value"),r.ref("wonderland/tracks").off("value"),t.user=null,t.stars=0)}))},unmounted:function(){"number"==typeof this.tickIntervalID&&clearInterval(this.tickIntervalID),null!==vrmModel&&(scene.remove(vrmModel.scene),vrmModel=null)}}).mount("#app");window.addEventListener("resize",e=>{t.insetTop=t.$refs.indicator.getBoundingClientRect().height,t.insetBottom=t.$refs.blank.getBoundingClientRect().height,t.canvasSize.width=t.character.width,t.canvasSize.height=t.character.height,t.canvasSize.deviceWidth=t.character.width*window.devicePixelRatio,t.canvasSize.deviceHeight=t.character.height*window.devicePixelRatio,t.canvasSize.alternative.width=t.character.alternative.width,t.canvasSize.alternative.height=t.character.alternative.height,t.canvasSize.alternative.deviceWidth=t.character.alternative.width*window.devicePixelRatio,t.canvasSize.alternative.deviceHeight=t.character.alternative.height*window.devicePixelRatio,t.animationQueue.unshift({character:t.character,images:[].concat(t.cachedSprites)}),null!==t.alternative&&t.animationQueue.unshift({character:t.character.alternative,images:[].concat(t.alternativeCachedSprites)})}),window.addEventListener("click",e=>{}),window.addEventListener("dblclick",e=>{}),window.addEventListener("mousedown",e=>{}),window.addEventListener("mousemove",e=>{}),window.addEventListener("mouseup",e=>{}),window.addEventListener("touchstart",e=>{e.stopPropagation(),0==u?(u++,setTimeout(()=>{u=0},500)):u=0}),window.addEventListener("touchmove",e=>{e.stopPropagation()}),window.addEventListener("touchend",e=>{e.stopPropagation()}),window.addEventListener("touchcancel",e=>{e.stopPropagation()}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?t.isDarkMode=!0:t.isDarkMode=!1})})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJmaXJlYmFzZSIsImluaXRpYWxpemVBcHAiLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJhcHBJZCIsIm1lYXN1cmVtZW50SWQiLCJhbmFseXRpY3MiLCJkZWJ1ZyIsImRlY29kZVVSSUNvbXBvbmVudCIsImxvY2F0aW9uIiwiaGFzaCIsInN1YnN0cmluZyIsImRhdGFiYXNlIiwic3RvcmFnZSIsInN0YXRzIiwiZG9tRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpZGxlVGltZSIsImFjdGl2YXRlVGltZSIsInRhcENvdW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyIiwidGhlbiIsInJlZ2lzdHJhdGlvbiIsIm9udXBkYXRlZm91bmQiLCJ1cGRhdGUiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImNvZGUiLCJtZXNzYWdlIiwiY29udHJvbGxlciIsImNvbW1hbmQiLCJwb3N0TWVzc2FnZSIsImNhY2hlcyIsImFwcCIsIlZ1ZSIsImNyZWF0ZUFwcCIsImlzRGVidWciLCJpc0RhcmtNb2RlIiwiaXNNdXRlZCIsImlzTG9hZGluZyIsImlzVXBkYXRpbmciLCJpc0xvY2F0aW5nIiwiaXNSZXZlYWxlZCIsImlzT3ZlcmxheWVkIiwiaXNCbGluZGVkIiwiaXNQb3B1cCIsImlzRXhwYW5kZWQiLCJpc0xlYXJuaW5nIiwiaXNBbmltYXRpbmciLCJpc0hhbmdpbmdPbiIsImlzU3VibWl0dGluZyIsImlzRGlzY292ZXJpbmciLCJpc1N0YXJlZCIsImlzTG9ja2VkIiwiY2FudmFzU2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiZGV2aWNlV2lkdGgiLCJkZXZpY2VIZWlnaHQiLCJhbHRlcm5hdGl2ZSIsImNhY2hlZEltYWdlcyIsImNhY2hlZFNwcml0ZXMiLCJhbHRlcm5hdGl2ZUNhY2hlZFNwcml0ZXMiLCJhbmltYXRpb25RdWV1ZSIsImVsYXBzZWQiLCJtYXAiLCJsYXllciIsInF1ZXJ5UXVldWUiLCJxdWVyeUNhY2hlIiwiY2FjaGVkVHJhY2tzIiwiY2FjaGVkRG9jdW1lbnRzIiwiZG9jdW1lbnRRdWV1ZSIsInNlcXVlbmNlUXVldWUiLCJwcm9ncmVzcyIsInVzZXIiLCJpbnB1dCIsImFuaW1hdGVkSW5wdXRMZW5ndGgiLCJtYXhJbnB1dExlbmd0aCIsImlucHV0SGFzRXJyb3IiLCJtZXNzYWdlcyIsIm1heE1lc3NhZ2VzIiwid29yZCIsInJlY2VudFdvcmRzIiwidGFncyIsIm1heFRhZ3MiLCJzY3JvbGxUaW1lb3V0SUQiLCJ1bmRlZmluZWQiLCJ0aWNrSW50ZXJ2YWxJRCIsInN0YXJzIiwiYW5pbWF0ZWRTdGFycyIsInN0ZXBzIiwiaXNTdGVwcGluZyIsImFuaW1hdGVkU3RlcHMiLCJkZXZpY2VNb3Rpb24iLCJzY3JlZW5zaG90Iiwibm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbkhlaWdodCIsImFuaW1hdGVkTm90aWZpY2F0aW9uSGVpZ2h0IiwiaW5wdXRIZWlnaHQiLCJhbmltYXRlZElucHV0SGVpZ2h0IiwicmVjZW50SW1hZ2VzIiwiYmFja2dyb3VuZEltYWdlc1F1ZXVlIiwiYmFja2dyb3VuZEltYWdlcyIsInByZWxvYWRJbWFnZXMiLCJpc1VwbG9hZGluZyIsImFuaW1hdGlvbnMiLCJjdXJyZW50QW5pbWF0aW9ucyIsImJsZW5kU2hhcGVBbmltYXRpb25zIiwiaW5zZXRUb3AiLCJpbnNldEJvdHRvbSIsInRleHQiLCJwb3B1cFRleHRIZWlnaHQiLCJhbmltYXRlZFBvcHVwVGV4dEhlaWdodCIsInRpY2tlcldpZHRoIiwiYW5pbWF0ZWRUaWNrZXJXaWR0aCIsImxlYWRlcmJvYXJkIiwibGVhZGVyYm9hcmRIZWlnaHQiLCJhbmltYXRlZExlYWRlcmJvYXJkSGVpZ2h0Iiwic3RhdGVzIiwiY2hhcmFjdGVyIiwid29yZERpY3Rpb25hcnkiLCJyZXZlcnNlV29yZERpY3Rpb25hcnkiLCJhdHRyaWJ1dGVzIiwiY2hhcnMiLCJ3YXRjaCIsIm5ld1ZhbHVlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtdXRlIiwiZSIsInJlbW92ZUl0ZW0iLCJ3b3JkcyIsImhhbmRsZXIiLCIkbmV4dFRpY2siLCJjbGlwIiwiZG9jdW1lbnQiLCJib2R5IiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJNYXRoIiwibWluIiwicXVlcnlTZWxlY3RvciIsImRlZXAiLCJzZWxmIiwidGhpcyIsIm9iaiIsInRhcmdldHMiLCJyb3VuZCIsImR1cmF0aW9uIiwiZWFzaW5nIiwiZWxlbWVudHMiLCJvZmZzZXQiLCJmcmFtZVJhdGUiLCJpbmRleCIsInN0YXJ0VGltZSIsImtleWZyYW1lcyIsInZpc2liaWxpdHkiLCJhbmltYXRpb24iLCJhbmltYXRlIiwiZmlsbCIsIml0ZXJhdGlvbnMiLCJJbmZpbml0eSIsIiRyZWZzIiwicG9wdXBUZXh0IiwiY291bnQiLCJmcmFnbWVudHMiLCJyb3ciLCJjb2x1bW4iLCJzZXQiLCJ0aW1lc3RhbXAiLCJjaGVja3N1bSIsIlN0cmluZyIsInJlZHVjZSIsIngiLCJ5IiwibWV0aG9kcyIsInNpZ25JbiIsImF1dGgiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJQUk9WSURFUl9JRCIsInNpZ25JbldpdGhQb3B1cCIsImNyZWRlbnRpYWwiLCJwcm92aWRlckRhdGEiLCJjdXJyZW50VXNlciIsInVwZGF0ZVByb2ZpbGUiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicmVmIiwidWlkIiwidHJhbnNhY3Rpb24iLCJjdXJyZW50IiwicHJvdmlkZXJJZCIsImFjY2Vzc1Rva2VuIiwiaWRUb2tlbiIsIkZhY2Vib29rQXV0aFByb3ZpZGVyIiwicHJvdmlkZXIiLCJhZGRTY29wZSIsIlR3aXR0ZXJBdXRoUHJvdmlkZXIiLCJmbG9vciIsIkRhdGUiLCJwaG90b1VybCIsInJlcGxhY2UiLCJhZGRpdGlvbmFsVXNlckluZm8iLCJ1c2VybmFtZSIsImxpbmsiLCJzZWNyZXQiLCJzaWduT3V0IiwicmVmcmVzaCIsImFzeW5jIiwiaWdub3JlIiwiY2VudGVyTG9jYXRpb24iLCJnZXRDZW50ZXIiLCJ0cmFja3MiLCJmZXRjaCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwia2V5cyIsImZvckVhY2giLCJoYW5kbGVySWQiLCJoYW5kbGVycyIsIk1pY3Jvc29mdCIsIk1hcHMiLCJFdmVudHMiLCJyZW1vdmVIYW5kbGVyIiwiZW50aXRpZXMiLCJyZW1vdmUiLCJwdXNocGluIiwiaXNVcGRhdGVkIiwiZ2VvaGFzaCIsInRyYWNrIiwicHVzaHBpbklkIiwiaWQiLCJQdXNocGluIiwiTG9jYXRpb24iLCJ0aXRsZSIsInN1YlRpdGxlIiwiZm9ybWF0VGltZSIsImljb24iLCJzZXRJbWFnZSIsImFkZEhhbmRsZXIiLCJhcmdzIiwidGFyZ2V0Iiwic2V0TG9jYXRpb24iLCJzZXRPcHRpb25zIiwiaWRzIiwic29tZSIsIm1heCIsIlByb21pc2UiLCJyZXNvbHZlIiwidHJhY2tEaWN0aW9uYXJ5IiwidHJhY2tSYW5raW5nIiwiYXNzaWduIiwic29ydCIsInJlc3VsdHMiLCJlcHNpbG9uIiwicG93IiwiZG9jdW1lbnRzIiwidGVybUZyZXF1ZW5jaWVzIiwiaW52ZXJzZURvY3VtZW50RnJlcXVlbmN5Iiwic2NvcmVEaWN0aW9uYXJ5Iiwic2NvcmVzIiwibWF4U2NvcmUiLCJ0b2tlbnMiLCJ0ZXJtU2V0IiwiaW5jbHVkZXMiLCJsb2ciLCJ0ZiIsInRva2VuIiwidGVybUZyZXF1ZW5jeSIsInRmaWRmIiwidGVybSIsInNjb3JlIiwibm90aWZ5IiwiYWNjZW50IiwiaW1hZ2UiLCJjZW50ZXJHZW9oYXNoIiwiZW5jb2RlR2VvaGFzaCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCIxMiIsIjEzIiwiMTQiLCIxNSIsIjE2IiwiMTciLCIxOCIsIjE5IiwiMjAiLCJnZXRab29tIiwiZ2VvaGFzaGVzIiwidGVtcFJlY2VudCIsInByaW1pdGl2ZXMiLCJyZWN0IiwiZGVjb2RlR2VvaGFzaCIsInRlbXBDYWNoZSIsIlBvbHlnb24iLCJ0b3BsZWZ0IiwidG9wcmlnaHQiLCJib3R0b21yaWdodCIsImJvdHRvbWxlZnQiLCJmaWxsQ29sb3IiLCJzdHJva2VDb2xvciIsInN0cm9rZVRoaWNrbmVzcyIsIm5laWdoYm9ycyIsImdldE5laWdoYm9ycyIsInNldFByaW1pdGl2ZXMiLCJzbmFwc2hvdCIsImRhdGFiYXNlUm9vdCIsIm9yZGVyQnlDaGlsZCIsImxpbWl0VG9MYXN0Iiwic3RhcnRBdCIsImVuZEF0IiwicGFkRW5kIiwib25jZSIsImV4aXN0cyIsImRpY3Rpb25hcnkiLCJ2YWwiLCJyZWNlbnQiLCJ0YWtlIiwic3RhcnRQZWRvbWV0ZXIiLCJEZXZpY2VNb3Rpb25FdmVudCIsInJlcXVlc3RQZXJtaXNzaW9uIiwiYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eSIsImFnIiwic3FydCIsInoiLCJub3dEYXRlIiwiYmFzZURhdGUiLCJnZXRUaW1lIiwiZGF5cyIsImRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsInRvSVNPU3RyaW5nIiwidW5zaGlmdCIsIm1pbkNvdW50IiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsImZvcm1hdCIsImFyZ3VtZW50cyIsInBhcnNlSW50IiwiZ3JvdXAiLCJwYXRoIiwiaW5kZXhQYXRoIiwiY2VpbCIsInJhbmRvbSIsInNlcXVlbmNlIiwicHJlcGFyZSIsInNlcXVlbmNlcyIsImZpbHRlciIsInR5cGUiLCJzcGVlZCIsInN0b3BQZWRvbWV0ZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibG9jYXRlIiwicGVybWlzc2lvblN0YXR1cyIsInBlcm1pc3Npb25zIiwicXVlcnkiLCJzdGF0ZSIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwic2V0VmlldyIsImNlbnRlciIsImNvb3JkcyIsInpvb20iLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJ0aW1lb3V0IiwibWF4aW11bUFnZSIsInNlbmQiLCJzcGxpdCIsImxlYXJuIiwic2hha2UiLCJzZWxlY3RlZCIsInJlamVjdCIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsInN0YXJ0c1dpdGgiLCJzcmMiLCJyZWZGcm9tVVJMIiwiZ2V0RG93bmxvYWRVUkwiLCJjcm9zc09yaWdpbiIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiaW5saW5lU3ZnIiwidG9EYXRhVVJMIiwiY2hhbmdlIiwidXBsb2FkIiwiZ2VuZXJhdGVVdWlkIiwibGVuIiwidG9TdHJpbmciLCJqb2luIiwic3RvcmFnZVJlZiIsImZpbGVzIiwicGF0aHMiLCJmaWxlIiwidXBsb2FkVGFzayIsImNoaWxkIiwicHV0Iiwib24iLCJieXRlc1RyYW5zZmVycmVkIiwidG90YWxCeXRlcyIsImZ1bGxQYXRoIiwiYXR0cmlidXRlIiwidyIsImNoZWNrIiwiZGF0YXNldCIsImNoZWNrZWQiLCJzaGFyZSIsInVwZGF0ZVJlcXVpcmVkIiwiZGVsZXRlUmVxdWlyZWQiLCJjb21taXR0ZWQiLCJ0aW1lc3RhbXBzIiwic2V0VGltZW91dCIsInR3aW5rbGUiLCJwbGF5IiwiZGlnZXN0TWVzc2FnZSIsIm5leHQiLCJ1c2VySWQiLCJsaW1pdCIsIm9yZGVyQnlLZXkiLCJsaW1pdFRvRmlyc3QiLCJ0ZW1wV29yZHMiLCJpbmRleGVzIiwicG9wIiwicHJldmlvdXMiLCJkaXNjb3ZlciIsIndvcmRTZXQiLCJhcnJheSIsImEiLCJjb25jYXQiLCJrIiwidGVtcCIsInNodWZmbGUiLCJtc2dVaW50OCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwiaGFzaEJ1ZmZlciIsImNyeXB0byIsInN1YnRsZSIsImRpZ2VzdCIsIkFycmF5IiwiZnJvbSIsIlVpbnQ4QXJyYXkiLCJiIiwicGFkU3RhcnQiLCJhY3RpdmF0ZSIsInRhbGsiLCJ0ZW1wU3RhdGVzIiwic2VnbWVudGVyIiwiVGlueVNlZ21lbnRlciIsInRva2VuU2V0IiwicHJlcGFyZWRTZXF1ZW5jZSIsImlzQWJvcnRlZCIsImlzQXJyYXkiLCJzZWdtZW50IiwiZ2VuZXJhdGUiLCJjYWNoZSIsImhpbnRzIiwic29mdG1heCIsIk1JTl9WQUxVRSIsInN1bSIsImV4cCIsImhpbnREaWN0aW9uYXJ5IiwicmVnZXgiLCJSZWdFeHAiLCJjYWNoRGljdGlvbmFyeSIsInRlcm1zIiwiaXNOZXciLCJ0YWciLCJwcm9iYWJpbGl0aWVzIiwiY2FuZGlkYXRlcyIsImNhbmRpZGF0ZSIsInRlc3QiLCJwcm9iYWJpbGl0eSIsImNob2ljZSIsImJsaW5kZWQiLCJ1cmwiLCJsb2FkIiwiaXNDb21wbGV0ZWQiLCJpc0xvYWRlZCIsInRyYW5zZm9ybSIsInNjcm9sbCIsInNjcm9sbFRvRW5kIiwiY2xlYXJUaW1lb3V0Iiwic2Nyb2xsVG8iLCJzY3JvbGxIZWlnaHQiLCJmb3JtYXREYXRlIiwibW9tZW50IiwibG9jYWxlIiwibGFuZ3VhZ2UiLCJhbmltYXRpb25TdGFydCIsImVsIiwiYW5pbWF0aW9uRW5kIiwidGlja2VyVXBkYXRlZCIsInJhbmdlIiwiY29sbGVjdGlvbiIsImRheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJhcnJhbmdlIiwicm93cyIsImNvbHVtbnMiLCJpdGVtIiwicmV2ZXJzZSIsInRpbWUiLCJob3VycyIsIm1pbnV0ZXMiLCJnZXREaXN0YW5jZSIsImxhdDEiLCJsb24xIiwibGF0MiIsImxvbjIiLCJkTGF0IiwiZGVnMnJhZCIsImRMb24iLCJzaW4iLCJjb3MiLCJhdGFuMiIsImRlZyIsIlBJIiwicHJlY2lzaW9uIiwiQklUUyIsImlzX2V2ZW4iLCJsYXQiLCJsb24iLCJiaXQiLCJjaCIsIm1pZCIsImNkIiwiaW5kZXhPZiIsIm1hc2siLCJyaWdodEdlb2hhc2giLCJjYWxjdWxhdGVBZGphY2VudCIsImxlZnRHZW9oYXNoIiwic3JjSGFzaCIsImRpciIsIk5FSUdIQk9SUyIsImV2ZW4iLCJCT1JERVJTIiwib2RkIiwibGFzdENociIsInRvTG93ZXJDYXNlIiwiY2hhckF0IiwiYmFzZSIsInNlbGVjdGVkU2VxdWVuY2VzIiwiX3JhbmRvbSIsImNob29zZWRTZXF1ZW5jZXMiLCJmbGF0dGVuZWRTZXF1ZW5jZSIsInRlbXBTdGF0ZSIsInF1ZXVlIiwidHJhY2VkU2VxdWVuY2VzIiwiY2FsbGFibGVTZXF1ZW5jZXMiLCJzZXF1ZW5jZVN0YWNrIiwiZ2V0U2VxdWVuY2VTdGFjayIsInN0YWNrIiwicG9wcGVkU2VxdWVuY2UiLCJ0ZW1wU3RhY2siLCJ0ZW1wU2VxdWVuY2UiLCJzb3VyY2VTZXF1ZW5jZSIsInRhcmdldFNlcXVlbmNlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZGVsdGFUaW1lIiwiZnJhbWVzIiwiaW1hZ2VzIiwic3ByaXRlcyIsImJ1ZmZlciIsInNvdXJjZSIsImNoYXJhY3RlcnMiLCJjaGFyQXJyYXkiLCJyYW5kb21CdWZmZXIiLCJtYXRjaCIsInNwcml0ZSIsInJlbmRlciIsImNhbnZhcyIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiYWx0ZXJuYXRpdmVDYW52YXNXaWR0aCIsImFsdGVybmF0aXZlQ2FudmFzSGVpZ2h0IiwiY2xlYXJSZWN0IiwiZ2xvYmFsQWxwaGEiLCJvcGFjaXR5IiwiZGV2aWNlUGl4ZWxSYXRpbyIsInVwZGF0ZWQiLCJpbmRpY2F0b3IiLCJibGFuayIsIm1vdW50ZWQiLCJmdW5jIiwiYm90U3RvcmFnZUl0ZW0iLCJnZXRJdGVtIiwiY3JlZGVudGlhbFN0b3JhZ2VJdGVtIiwic3RhdHNTdG9yYWdlSXRlbSIsImZyYWdtZW50c1N0b3JhZ2VJdGVtIiwiYWx0ZXJuYXRpdmVzIiwiYm90IiwicGFyc2UiLCJjb250YWluZXIiLCJhZnRlciIsIk1hcCIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsImNhbnZhc0xpZ2h0IiwiZW5hYmxlSGlnaERwaSIsInNob3dMb2NhdGVNZUJ1dHRvbiIsInNob3dNYXBUeXBlU2VsZWN0b3IiLCJzaG93Wm9vbUJ1dHRvbnMiLCJzaG93U2NhbGViYXIiLCJzdXBwb3J0ZWRNYXBUeXBlcyIsImdyYXlzY2FsZSIsImNhbnZhc0RhcmsiLCJMYXllciIsInNldFZpc2libGUiLCJsYXllcnMiLCJpbnNlcnQiLCJyZXNwb25zZTEiLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwicmVzcG9uc2UyIiwicmVzcG9uc2UzIiwiYmFzZVRpbWUiLCJnIiwiZmluZCIsInNpZ25JbldpdGhDcmVkZW50aWFsIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwicmVtb3ZlSW5kZXgiLCJvZmYiLCJ1bm1vdW50ZWQiLCJjbGVhckludGVydmFsIiwidnJtTW9kZWwiLCJzY2VuZSIsIm1vdW50Iiwic3RvcFByb3BhZ2F0aW9uIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FDaEJJLEVBQWNKLEVBQUssR0FDbkJLLEVBQWlCTCxFQUFLLEdBSUhNLEVBQUksRUFBR0MsRUFBVyxHQUNwQ0QsRUFBSUgsRUFBU0ssT0FBUUYsSUFDekJKLEVBQVVDLEVBQVNHLEdBQ2hCRyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLQyxFQUFpQlgsSUFBWVcsRUFBZ0JYLElBQ3BGSyxFQUFTTyxLQUFLRCxFQUFnQlgsR0FBUyxJQUV4Q1csRUFBZ0JYLEdBQVcsRUFFNUIsSUFBSUQsS0FBWUcsRUFDWkssT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBYUgsS0FDcERjLEVBQVFkLEdBQVlHLEVBQVlILElBS2xDLElBRkdlLEdBQXFCQSxFQUFvQmhCLEdBRXRDTyxFQUFTQyxRQUNkRCxFQUFTVSxPQUFUVixHQU9ELE9BSEFXLEVBQWdCSixLQUFLSyxNQUFNRCxFQUFpQmIsR0FBa0IsSUFHdkRlLElBRVIsU0FBU0EsSUFFUixJQURBLElBQUlDLEVBQ0lmLEVBQUksRUFBR0EsRUFBSVksRUFBZ0JWLE9BQVFGLElBQUssQ0FHL0MsSUFGQSxJQUFJZ0IsRUFBaUJKLEVBQWdCWixHQUNqQ2lCLEdBQVksRUFDUkMsRUFBSSxFQUFHQSxFQUFJRixFQUFlZCxPQUFRZ0IsSUFBSyxDQUM5QyxJQUFJQyxFQUFRSCxFQUFlRSxHQUNHLElBQTNCWCxFQUFnQlksS0FBY0YsR0FBWSxHQUUz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LE9BQU81WixFQUFJNkIsOEJBeUNqR2pGLE9BQU9rQyxpQkFBaUIsUUFBU0MsT0FFakNuQyxPQUFPa0MsaUJBQWlCLFdBQVlDLE9BSXBDbkMsT0FBT2tDLGlCQUFpQixZQUFhQyxPQTJCckNuQyxPQUFPa0MsaUJBQWlCLFlBQWFDLE9BR3JDbkMsT0FBT2tDLGlCQUFpQixVQUFXQyxPQU9uQ25DLE9BQU9rQyxpQkFBaUIsYUFBY0MsSUFDbENBLEVBQU00bkIsa0JBRVUsR0FBWjluQixHQUNBQSxJQUVBOFosV0FBVyxLQUNQOVosRUFBVyxHQUNaLE1BbURIQSxFQUFXLElBR25CakMsT0FBT2tDLGlCQUFpQixZQUFhQyxJQUNqQ0EsRUFBTTRuQixvQkFJVi9wQixPQUFPa0MsaUJBQWlCLFdBQVlDLElBQ2hDQSxFQUFNNG5CLG9CQVFWL3BCLE9BQU9rQyxpQkFBaUIsY0FBZUMsSUFDbkNBLEVBQU00bkIsb0JBRVYvcEIsT0FBT2dxQixXQUFXLGdDQUFnQzluQixpQkFBaUIsU0FBVW9ILElBQ3JFQSxFQUFFMmdCLFFBQ0Y3bUIsRUFBSUksWUFBYSxFQUVqQkosRUFBSUksWUFBYSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9qc1wiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbMiwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImltcG9ydCAqIGFzIFN0YXRzIGZyb20gJ3N0YXRzLmpzJ1xyXG5pbXBvcnQgYW5pbWUgZnJvbSAnYW5pbWVqcy9saWIvYW5pbWUuZXMuanMnO1xyXG5cclxuLy8gWW91ciB3ZWIgYXBwJ3MgRmlyZWJhc2UgY29uZmlndXJhdGlvblxyXG52YXIgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgICBhcGlLZXk6IFwiQUl6YVN5RFRWeERKajdycUc5TC1DbHZiYTJUYW85QjBoa2N4amNFXCIsXHJcbiAgICBhdXRoRG9tYWluOiBcIm1pbGNoY2hhbi5maXJlYmFzZWFwcC5jb21cIixcclxuICAgIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vbWlsY2hjaGFuLmZpcmViYXNlaW8uY29tXCIsXHJcbiAgICBwcm9qZWN0SWQ6IFwibWlsY2hjaGFuXCIsXHJcbiAgICBzdG9yYWdlQnVja2V0OiBcIm1pbGNoY2hhbi5hcHBzcG90LmNvbVwiLFxyXG4gICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMzU1Njk4OTcxODg5XCIsXHJcbiAgICBhcHBJZDogXCIxOjM1NTY5ODk3MTg4OTp3ZWI6ZTM2NTNjNWMzMWJkNzI4OWNkNDU1MFwiLFxyXG4gICAgbWVhc3VyZW1lbnRJZDogXCJHLTM5OThGSllOV1hcIlxyXG59O1xyXG4vLyBJbml0aWFsaXplIEZpcmViYXNlXHJcbmZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5maXJlYmFzZS5hbmFseXRpY3MoKTtcclxuXHJcbmNvbnN0IGRlYnVnID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSkgPT09IFwiZGVidWdcIjtcclxuLy9jb25zdCBjaGFubmVsID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSk7XHJcbmNvbnN0IGRhdGFiYXNlUm9vdCA9IFwid29uZGVybGFuZFwiO1xyXG4vL2NvbnN0IGRhdGFiYXNlQ2hhbm5lbCA9IGNoYW5uZWwubGVuZ3RoID4gMCA/IGRhdGFiYXNlUm9vdCArICcvY2hhbm5lbHMvJyArIGNoYW5uZWwgOiBkYXRhYmFzZVJvb3Q7XHJcbmNvbnN0IGRhdGFiYXNlTWVzc2FnZXMgPSBkYXRhYmFzZVJvb3QgKyBcIi9mZWVkXCI7XHJcbmxldCBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7XHJcbmxldCBzdG9yYWdlID0gZmlyZWJhc2Uuc3RvcmFnZSgpO1xyXG5jb25zdCBtaWxjaCA9IHsgbmFtZTogXCLjg5/jg6vjg5LjgaHjgoPjgpNcIiwgYWNjZW50OiBcIiNmZmE2YmJcIiwgaW1hZ2U6IFwiL2ltYWdlcy9NaWxjaC5wbmdcIiB9O1xyXG5jb25zdCBtZXJrdSA9IHsgbmFtZTogXCLjg6Hjg6vjgq/jgaHjgoPjgpNcIiwgYWNjZW50OiBcIiM1YmNiZTFcIiwgaW1hZ2U6IFwiL2ltYWdlcy9NZXJrdS5wbmdcIiB9O1xyXG5jb25zdCBzdGF0cyA9IG5ldyBTdGF0cygpO1xyXG5cclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSBcImF1dG9cIjtcclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5ib3R0b20gPSBcIjBcIjtcclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gXCJhdXRvXCI7XHJcbnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucmlnaHQgPSBcIjBcIjtcclxuXHJcbmlmICghZGVidWcpIHtcclxuICAgIHN0YXRzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlzLWhpZGRlblwiKTtcclxufVxyXG5cclxubGV0IGlkbGVUaW1lID0gMC4wO1xyXG5jb25zdCBibGlua1RocmVzaG9sZCA9IDUuMDtcclxubGV0IGFjdGl2YXRlVGltZSA9IDAuMDtcclxuY29uc3QgYWN0aXZhdGVUaHJlc2hvbGQgPSAxMC4wO1xyXG5sZXQgdGFwQ291bnQgPSAwO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChldmVudCkgPT4ge1xyXG4gICAgaWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKFwic3cuanNcIikudGhlbihyZWdpc3RyYXRpb24gPT4ge1xyXG4gICAgICAgICAgICByZWdpc3RyYXRpb24ub251cGRhdGVmb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyICE9PSBudWxsICYmIFwiY29tbWFuZFwiIGluIGV2ZW50LmRhdGEgJiYgZXZlbnQuZGF0YS5jb21tYW5kID09PSBcImNhY2hlc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnBvc3RNZXNzYWdlKHsgY29tbWFuZDogXCJjbGVhclwiLCBjYWNoZXM6IGV2ZW50LmRhdGEuY2FjaGVzIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFwcCA9IFZ1ZS5jcmVhdGVBcHAoe1xyXG4gICAgICAgIGRhdGEoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc0RlYnVnOiBkZWJ1ZyxcclxuICAgICAgICAgICAgICAgIGlzRGFya01vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNNdXRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc1VwZGF0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzTG9jYXRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNSZXZlYWxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc092ZXJsYXllZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc0JsaW5kZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNQb3B1cDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc0V4cGFuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzTGVhcm5pbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNIYW5naW5nT246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNTdWJtaXR0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzRGlzY292ZXJpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNTdGFyZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNMb2NrZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY2FudmFzU2l6ZTogeyB3aWR0aDogMCwgaGVpZ2h0OiAwLCBkZXZpY2VXaWR0aDogMCwgZGV2aWNlSGVpZ2h0OiAwLCBhbHRlcm5hdGl2ZTogeyB3aWR0aDogMCwgaGVpZ2h0OiAwLCBkZXZpY2VXaWR0aDogMCwgZGV2aWNlSGVpZ2h0OiAwIH0gfSxcclxuICAgICAgICAgICAgICAgIGNhY2hlZEltYWdlczoge30sXHJcbiAgICAgICAgICAgICAgICBjYWNoZWRTcHJpdGVzOiBbXSxcclxuICAgICAgICAgICAgICAgIGFsdGVybmF0aXZlQ2FjaGVkU3ByaXRlczogW10sXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25RdWV1ZTogW10sXHJcbiAgICAgICAgICAgICAgICBlbGFwc2VkOiAwLFxyXG4gICAgICAgICAgICAgICAgbWFwOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbGF5ZXI6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtb2RlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcXVlcnlRdWV1ZTogW10sXHJcbiAgICAgICAgICAgICAgICBxdWVyeUNhY2hlOiB7fSxcclxuICAgICAgICAgICAgICAgIGNhY2hlZFRyYWNrczoge30sXHJcbiAgICAgICAgICAgICAgICBjYWNoZWREb2N1bWVudHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRRdWV1ZTogW10sXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZVF1ZXVlOiBbXSxcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZWRJbnB1dExlbmd0aDogMCxcclxuICAgICAgICAgICAgICAgIG1heElucHV0TGVuZ3RoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBpbnB1dEhhc0Vycm9yOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgICAgICAgICAgIG1heE1lc3NhZ2VzOiAxMCxcclxuICAgICAgICAgICAgICAgIHdvcmQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZWNlbnRXb3JkczogW10sXHJcbiAgICAgICAgICAgICAgICB0YWdzOiBbXSxcclxuICAgICAgICAgICAgICAgIG1heFRhZ3M6IDEwLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVGltZW91dElEOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICB0aWNrSW50ZXJ2YWxJRDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgc3RhcnM6IC0xLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZWRTdGFyczogMCxcclxuICAgICAgICAgICAgICAgIHN0ZXBzOiAwLFxyXG4gICAgICAgICAgICAgICAgaXNTdGVwcGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRlZFN0ZXBzOiAwLFxyXG4gICAgICAgICAgICAgICAgZGV2aWNlTW90aW9uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc3RhdHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc2NyZWVuc2hvdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uSGVpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZWROb3RpZmljYXRpb25IZWlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICBpbnB1dEhlaWdodDogMCxcclxuICAgICAgICAgICAgICAgIGFuaW1hdGVkSW5wdXRIZWlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICByZWNlbnRJbWFnZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlc1F1ZXVlOiBbXSxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgcHJlbG9hZEltYWdlczogW10sXHJcbiAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudEFuaW1hdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgYmxlbmRTaGFwZUFuaW1hdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgaW5zZXRUb3A6IDAsXHJcbiAgICAgICAgICAgICAgICBpbnNldEJvdHRvbTogMCxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFtdLFxyXG4gICAgICAgICAgICAgICAgcG9wdXBUZXh0SGVpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0ZWRQb3B1cFRleHRIZWlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICB0aWNrZXJXaWR0aDogMCxcclxuICAgICAgICAgICAgICAgIGFuaW1hdGVkVGlja2VyV2lkdGg6IDAsXHJcbiAgICAgICAgICAgICAgICBsZWFkZXJib2FyZDogW10sXHJcbiAgICAgICAgICAgICAgICBsZWFkZXJib2FyZEhlaWdodDogMCxcclxuICAgICAgICAgICAgICAgIGFuaW1hdGVkTGVhZGVyYm9hcmRIZWlnaHQ6IDAsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc3RhdGVzOiB7fSxcclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGFsdGVybmF0aXZlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgd29yZERpY3Rpb25hcnk6IHt9LFxyXG4gICAgICAgICAgICAgICAgcmV2ZXJzZVdvcmREaWN0aW9uYXJ5OiB7fSxcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcIuWQjeWJjVwiLCBcIuaJgOWxnlwiLCBcIuaZgumWk1wiLCBcIuWgtOaJgFwiLCBcIuOBmeOCi+S6i1wiLCBcIueUn+OBjeeJqVwiLCBcIumjn+OBueeJqVwiLCBcIumjsuOBv+eJqVwiLCBcIuiBnuOBj+OCguOBrlwiLCBcIuimi+OCi+OCguOBrlwiLCBcIuiqreOCgOOCguOBrlwiLCBcIuS9v+OBhueJqVwiLCBcIui6q+OBq+OBpOOBkeOCi+OCguOBrlwiLCBcIuS5l+OCiueJqVwiLCBcIumDqOS9jVwiLCBcIueXheawl1wiXSxcclxuICAgICAgICAgICAgICAgIGNoYXJzOiBbXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3YXRjaDoge1xyXG4gICAgICAgICAgICBpc011dGVkKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY2hhcmFjdGVyXCIsIEpTT04uc3RyaW5naWZ5KHsgbXV0ZTogbmV3VmFsdWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY2hhcmFjdGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB3b3Jkczoge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNsaXAgb2YgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKFwiI2lucHV0Pi5jb2x1bW5zOmxhc3Qtb2YtdHlwZT4uY29sdW1uPi5jb250cm9sIC5jbGlwXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBjbGlwLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6c2NvcGUgLnRpY2tlci13cmFwIC50aWNrZXIgLml0ZW1cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCArPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAudGlja2VyV2lkdGggPSBNYXRoLm1pbih3aWR0aCAvIDIsIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNpbnB1dD4uY29sdW1uczpsYXN0LW9mLXR5cGU+LmNvbHVtbj4uY29udHJvbCAubGV2ZWxcIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXAucXVlcnlTZWxlY3RvcihcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlclwiKS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aWNrZXJXaWR0aChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmogPSB7IHdpZHRoOiB0aGlzLmFuaW1hdGVkVGlja2VyV2lkdGggfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogb2JqLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBuZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICByb3VuZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbmltYXRlZFRpY2tlcldpZHRoID0gb2JqLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2VzOiB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKFwiI2FwcD4uYmFja2dyb3VuZD5kaXZcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZWxlbWVudHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lUmF0ZSA9IDE1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydFRpbWUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleWZyYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWVzLnB1c2goeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWZyYW1lcy5wdXNoKHsgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9uID0gZWxlbWVudC5hbmltYXRlKGtleWZyYW1lcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAnZm9yd2FyZHMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdzdGVwcygnICsgb2Zmc2V0ICsgJyknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCAvIGZyYW1lUmF0ZSAqIGVsZW1lbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uczogSW5maW5pdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBhbmltYXRpb24uc3RhcnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zdGFydFRpbWUgPSBzdGFydFRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHAuaXNQb3B1cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnBvcHVwVGV4dEhlaWdodCA9IGFwcC4kcmVmcy5wb3B1cFRleHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwb3B1cFRleHRIZWlnaHQobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgaGVpZ2h0OiB0aGlzLmFuaW1hdGVkUG9wdXBUZXh0SGVpZ2h0IH07XHJcblxyXG4gICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IG9iaixcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVkUG9wdXBUZXh0SGVpZ2h0ID0gb2JqLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBub3RpZmljYXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5ub3RpZmljYXRpb25IZWlnaHQgPSBhcHAuJHJlZnMubm90aWZpY2F0aW9ucy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBub3RpZmljYXRpb25IZWlnaHQobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgaGVpZ2h0OiB0aGlzLmFuaW1hdGVkTm90aWZpY2F0aW9uSGVpZ2h0IH07XHJcblxyXG4gICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IG9iaixcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVkTm90aWZpY2F0aW9uSGVpZ2h0ID0gb2JqLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsZWFkZXJib2FyZDoge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAubGVhZGVyYm9hcmRIZWlnaHQgPSBhcHAuJHJlZnMubGVhZGVyYm9hcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRlZXA6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVhZGVyYm9hcmRIZWlnaHQobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgaGVpZ2h0OiB0aGlzLmFuaW1hdGVkTGVhZGVyYm9hcmRIZWlnaHQgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogb2JqLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogbmV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcm91bmQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwibGluZWFyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZWRMZWFkZXJib2FyZEhlaWdodCA9IG9iai5oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaW5wdXRIZWlnaHQobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgaGVpZ2h0OiB0aGlzLmFuaW1hdGVkSW5wdXRIZWlnaHQgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogb2JqLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogbmV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcm91bmQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwibGluZWFyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZWRJbnB1dEhlaWdodCA9IG9iai5oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3RhcnMobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgY291bnQ6IHRoaXMuYW5pbWF0ZWRTdGFycyB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRzOiBvYmosXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVkU3RhcnMgPSBvYmouY291bnRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3RlcHMobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgY291bnQ6IHRoaXMuYW5pbWF0ZWRTdGVwcyB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRzOiBvYmosXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kOiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwibGluZWFyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZWRTdGVwcyA9IG9iai5jb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpbnB1dDoge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmogPSB7IGNvdW50OiBhcHAuYW5pbWF0ZWRJbnB1dExlbmd0aCB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogb2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IGFwcC5pbnB1dC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3VuZDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IFwibGluZWFyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuYW5pbWF0ZWRJbnB1dExlbmd0aCA9IG9iai5jb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZWVwOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoYXJzOiB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnRzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGFwcC5jaGFycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbHVtbiBvZiByb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2goeyBzZXQ6IGNvbHVtbi5zZXQsIGNvdW50OiBjb2x1bW4uY291bnQsIHRpbWVzdGFtcDogY29sdW1uLnRpbWVzdGFtcCwgY2hlY2tzdW06IFsuLi5TdHJpbmcoY29sdW1uLnRpbWVzdGFtcCldLnJlZHVjZSgoeCwgeSkgPT4geCArIHksIDApICsgWy4uLlN0cmluZyhjb2x1bW4uY291bnQpXS5yZWR1Y2UoKHgsIHkpID0+IHggKyB5LCAwKSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmcmFnbWVudHNcIiwgSlNPTi5zdHJpbmdpZnkoZnJhZ21lbnRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImZyYWdtZW50c1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICAgIHNpZ25JbjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgPT09IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhQb3B1cChuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7ZmlyZWJhc2UuYXV0aC5PQXV0aENyZWRlbnRpYWx9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gcmVzdWx0LmNyZWRlbnRpYWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgcmVzdWx0LnVzZXIucHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9VUkw6IGRhdGEucGhvdG9VUkxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGAke2RhdGFiYXNlUm9vdH0vdXNlcnMvJHtyZXN1bHQudXNlci51aWR9YCkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcIm5hbWVcIl0gPSBkYXRhLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbXCJ0aW1lc3RhbXBcIl0gPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB7IG5hbWU6IGRhdGEuZGlzcGxheU5hbWUsIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3JlZGVudGlhbFwiLCBKU09OLnN0cmluZ2lmeSh7IHByb3ZpZGVySWQ6IGNyZWRlbnRpYWwucHJvdmlkZXJJZCwgYWNjZXNzVG9rZW46IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW4sIGlkVG9rZW46IGNyZWRlbnRpYWwuaWRUb2tlbiB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3JlZGVudGlhbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gZmlyZWJhc2UuYXV0aC5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIuYWRkU2NvcGUoXCJwdWJsaWNfcHJvZmlsZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7ZmlyZWJhc2UuYXV0aC5PQXV0aENyZWRlbnRpYWx9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gcmVzdWx0LmNyZWRlbnRpYWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgcmVzdWx0LnVzZXIucHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9VUkw6IGRhdGEucGhvdG9VUkxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGAke2RhdGFiYXNlUm9vdH0vdXNlcnMvJHtyZXN1bHQudXNlci51aWR9YCkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcIm5hbWVcIl0gPSBkYXRhLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbXCJ0aW1lc3RhbXBcIl0gPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB7IG5hbWU6IGRhdGEuZGlzcGxheU5hbWUsIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3JlZGVudGlhbFwiLCBKU09OLnN0cmluZ2lmeSh7IHByb3ZpZGVySWQ6IGNyZWRlbnRpYWwucHJvdmlkZXJJZCwgYWNjZXNzVG9rZW46IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW4gfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNyZWRlbnRpYWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09IGZpcmViYXNlLmF1dGguVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUG9wdXAobmV3IGZpcmViYXNlLmF1dGguVHdpdHRlckF1dGhQcm92aWRlcigpKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtmaXJlYmFzZS5hdXRoLk9BdXRoQ3JlZGVudGlhbH0gKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWwgPSByZXN1bHQuY3JlZGVudGlhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgcmVzdWx0LnVzZXIucHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG90b1VybCA9IGRhdGEucGhvdG9VUkwucmVwbGFjZSgvX25vcm1hbFxcLmpwZyQvLCAnLmpwZycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZGF0YS5kaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG90b1VSTDogcGhvdG9VcmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoYCR7ZGF0YWJhc2VSb290fS91c2Vycy8ke3Jlc3VsdC51c2VyLnVpZH1gKS50cmFuc2FjdGlvbihmdW5jdGlvbiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbXCJuYW1lXCJdID0gZGF0YS5kaXNwbGF5TmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcImxpbmtcIl0gPSBgaHR0cHM6Ly90d2l0dGVyLmNvbS8ke3Jlc3VsdC5hZGRpdGlvbmFsVXNlckluZm8udXNlcm5hbWV9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcInRpbWVzdGFtcFwiXSA9IHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0geyBuYW1lOiBkYXRhLmRpc3BsYXlOYW1lLCBsaW5rOiBgaHR0cHM6Ly90d2l0dGVyLmNvbS8ke3Jlc3VsdC5hZGRpdGlvbmFsVXNlckluZm8udXNlcm5hbWV9YCwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNyZWRlbnRpYWxcIiwgSlNPTi5zdHJpbmdpZnkoeyBwcm92aWRlcklkOiBjcmVkZW50aWFsLnByb3ZpZGVySWQsIGFjY2Vzc1Rva2VuOiBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuLCBzZWNyZXQ6IGNyZWRlbnRpYWwuc2VjcmV0IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjcmVkZW50aWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNyZWRlbnRpYWxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnBvc3RNZXNzYWdlKHsgY29tbWFuZDogXCJjYWNoZXNcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qZmlyZWJhc2UuYXV0aCgpLnNpZ25JbkFub255bW91c2x5KCkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7Ki9cclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdXBkYXRlOiBhc3luYyBmdW5jdGlvbiAoaWdub3JlID0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlckxvY2F0aW9uID0gdGhpcy5tYXAuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFja3MgPSBhd2FpdCB0aGlzLmZldGNoKGlnbm9yZSwgY2VudGVyTG9jYXRpb24ubGF0aXR1ZGUsIGNlbnRlckxvY2F0aW9uLmxvbmdpdHVkZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGVkVHJhY2tzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBoYW5kbGVySWQgb2Ygc2VsZi5jYWNoZWRUcmFja3Nba2V5XS5oYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWljcm9zb2Z0Lk1hcHMuRXZlbnRzLnJlbW92ZUhhbmRsZXIoaGFuZGxlcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXAuZW50aXRpZXMucmVtb3ZlKHNlbGYuY2FjaGVkVHJhY2tzW2tleV0ucHVzaHBpbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZi5jYWNoZWRUcmFja3Nba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJhY2tzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzVXBkYXRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdlb2hhc2ggaW4gdHJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2sgb2YgdHJhY2tzW2dlb2hhc2hdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHVzaHBpbklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc3Qgd29yZHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMuY2FjaGVkVHJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrLmlkID09PSB0aGlzLmNhY2hlZFRyYWNrc1tpZF0uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaHBpbklkID0gaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHB1c2hwaW5JZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1c2hwaW4gPSBuZXcgTWljcm9zb2Z0Lk1hcHMuUHVzaHBpbihuZXcgTWljcm9zb2Z0Lk1hcHMuTG9jYXRpb24odHJhY2subG9jYXRpb24ubGF0aXR1ZGUsIHRyYWNrLmxvY2F0aW9uLmxvbmdpdHVkZSksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRyYWNrLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRpdGxlOiB0aGlzLmZvcm1hdFRpbWUodGltZXN0YW1wIC0gdHJhY2sudGltZXN0YW1wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogXCIvaW1hZ2VzL01hcmtlci1TdGFyLnN2Z1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1hZ2UocHVzaHBpbiwgdHJhY2sudXNlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qaWYgKFwiZGljdGlvbmFyeVwiIGluIHRyYWNrICYmIFwid29yZHNcIiBpbiB0cmFjay5kaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBpbiB0cmFjay5kaWN0aW9uYXJ5LndvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9uZWRXb3JkID0gT2JqZWN0LmFzc2lnbih7fSwgdHJhY2suZGljdGlvbmFyeS53b3Jkc1t3b3JkXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVkV29yZFtcIm5hbWVcIl0gPSB3b3JkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMucHVzaChjbG9uZWRXb3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMuc29ydCgoeCwgeSkgPT4geS50aW1lc3RhbXAgLSB4LnRpbWVzdGFtcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrW1wid29yZHNcIl0gPSB3b3JkczsqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZFRyYWNrc1twdXNocGluLmlkXSA9IHRyYWNrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkVHJhY2tzW3B1c2hwaW4uaWRdW1wicHVzaHBpblwiXSA9IHB1c2hwaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRUcmFja3NbcHVzaHBpbi5pZF1bXCJoYW5kbGVyc1wiXSA9IFtNaWNyb3NvZnQuTWFwcy5FdmVudHMuYWRkSGFuZGxlcihwdXNocGluLCAnY2xpY2snLCBhc3luYyAoYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSB0aGlzLmNhY2hlZFRyYWNrc1thcmdzLnRhcmdldC5pZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNSZXZlYWxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIE1pY3Jvc29mdC5NYXBzLkV2ZW50cy5hZGRIYW5kbGVyKHB1c2hwaW4sICdkYmxjbGljaycsIChhcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gc2VsZi5jYWNoZWRUcmFja3NbYXJncy50YXJnZXQuaWRdLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5lbnRpdGllcy5wdXNoKHB1c2hwaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYWNrLnRpbWVzdGFtcCA+IHRoaXMuY2FjaGVkVHJhY2tzW3B1c2hwaW5JZF0udGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVzaHBpbiA9IHRoaXMuY2FjaGVkVHJhY2tzW3B1c2hwaW5JZF1bXCJwdXNocGluXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5jYWNoZWRUcmFja3NbcHVzaHBpbklkXVtcImhhbmRsZXJzXCJdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNocGluLnNldExvY2F0aW9uKG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbih0cmFjay5sb2NhdGlvbi5sYXRpdHVkZSwgdHJhY2subG9jYXRpb24ubG9uZ2l0dWRlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaHBpbi5zZXRPcHRpb25zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRyYWNrLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRpdGxlOiB0aGlzLmZvcm1hdFRpbWUodGltZXN0YW1wIC0gdHJhY2sudGltZXN0YW1wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1hZ2UocHVzaHBpbiwgdHJhY2sudXNlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qaWYgKFwiZGljdGlvbmFyeVwiIGluIHRyYWNrICYmIFwid29yZHNcIiBpbiB0cmFjay5kaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBpbiB0cmFjay5kaWN0aW9uYXJ5LndvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9uZWRXb3JkID0gT2JqZWN0LmFzc2lnbih7fSwgdHJhY2suZGljdGlvbmFyeS53b3Jkc1t3b3JkXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVkV29yZFtcIm5hbWVcIl0gPSB3b3JkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMucHVzaChjbG9uZWRXb3JkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMuc29ydCgoeCwgeSkgPT4geS50aW1lc3RhbXAgLSB4LnRpbWVzdGFtcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrW1wid29yZHNcIl0gPSB3b3JkczsqL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZFRyYWNrc1twdXNocGluSWRdID0gdHJhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRUcmFja3NbcHVzaHBpbklkXVtcInB1c2hwaW5cIl0gPSBwdXNocGluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkVHJhY2tzW3B1c2hwaW5JZF1bXCJoYW5kbGVyc1wiXSA9IGhhbmRsZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdlb2hhc2ggaW4gdHJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2sgb2YgdHJhY2tzW2dlb2hhc2hdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHMucHVzaCh0cmFjay5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGVkVHJhY2tzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpZHMuc29tZSh4ID0+IHggPT09IHNlbGYuY2FjaGVkVHJhY2tzW2tleV0uaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXJJZCBvZiBzZWxmLmNhY2hlZFRyYWNrc1trZXldLmhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWljcm9zb2Z0Lk1hcHMuRXZlbnRzLnJlbW92ZUhhbmRsZXIoaGFuZGxlcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1hcC5lbnRpdGllcy5yZW1vdmUoc2VsZi5jYWNoZWRUcmFja3Nba2V5XS5wdXNocGluKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZi5jYWNoZWRUcmFja3Nba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVXBkYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXggPSAxMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFkZXJib2FyZCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2tEaWN0aW9uYXJ5ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFja1JhbmtpbmcgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0cmFja3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRyYWNrc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFjay51c2VyLmlkIGluIHRyYWNrRGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tEaWN0aW9uYXJ5W3RyYWNrLnVzZXIuaWRdLmNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmFzc2lnbih7fSwgdHJhY2sudXNlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtcImNvdW50XCJdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrRGljdGlvbmFyeVt0cmFjay51c2VyLmlkXSA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdHJhY2tEaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tSYW5raW5nLnB1c2godHJhY2tEaWN0aW9uYXJ5W2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrUmFua2luZy5zb3J0KCh4LCB5KSA9PiB5LmNvdW50IC0geC5jb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cmFja1JhbmtpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGVhZGVyYm9hcmQuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIGxlYWRlcmJvYXJkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYWRlcmJvYXJkLnB1c2goZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXBzaWxvbiA9IE1hdGgucG93KDEwLCAtNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRvY3VtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGV0IGZpbHRlcmVkRG9jdW1lbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm1GcmVxdWVuY2llcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnZlcnNlRG9jdW1lbnRGcmVxdWVuY3kgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IGJhc2VUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc3QgbGltaXQgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmVEaWN0aW9uYXJ5ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXhTY29yZSA9IGVwc2lsb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRyYWNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9rZW5zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtU2V0ID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRyYWNrc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh0cmFjay5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1TZXQuaW5jbHVkZXModHJhY2submFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2submFtZSBpbiBpbnZlcnNlRG9jdW1lbnRGcmVxdWVuY3kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZURvY3VtZW50RnJlcXVlbmN5W3RyYWNrLm5hbWVdICs9IDEuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRG9jdW1lbnRGcmVxdWVuY3lbdHJhY2submFtZV0gPSAxLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtU2V0LnB1c2godHJhY2submFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50cy5wdXNoKHRva2Vucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnRzLnB1c2goeyB0b2tlbnM6IHRva2VucywgdGltZXN0YW1wOiB1c2VyLnRpbWVzdGFtcCwgdXNlcjogeyBpZDogdXNlci5pZCwgbmFtZTogdXNlci5uYW1lLCBpbWFnZTogXCJpbWFnZVwiIGluIHVzZXIgPyB1c2VyLmltYWdlIDogbnVsbCB9IH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLypmb3IgKGNvbnN0IHRyYWNrIG9mIHRyYWNrc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJ3b3Jkc1wiIGluIHVzZXIgJiYgdXNlci53b3Jkcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGludmVyc2VEb2N1bWVudEZyZXF1ZW5jeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRG9jdW1lbnRGcmVxdWVuY3lba2V5XSA9IE1hdGgubG9nKGRvY3VtZW50cy5sZW5ndGggLyAoaW52ZXJzZURvY3VtZW50RnJlcXVlbmN5W2tleV0gKyBlcHNpbG9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmZvciAoY29uc3QgZG9jdW1lbnQgb2YgZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC50aW1lc3RhbXAgKiAxMDAwID4gYmFzZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRG9jdW1lbnRzLnB1c2goZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWREb2N1bWVudHMubGVuZ3RoIDwgbGltaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWluID0gTWF0aC5tYXgoZG9jdW1lbnRzLmxlbmd0aCAtIGxpbWl0LCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRG9jdW1lbnRzLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkb2N1bWVudHMubGVuZ3RoIC0gMTsgaSA+PSBtaW47IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWREb2N1bWVudHMudW5zaGlmdChkb2N1bWVudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZG9jdW1lbnQgb2YgZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZiA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBkb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGZbdG9rZW5dICs9IDEuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGZbdG9rZW5dID0gMS4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0Zikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGZba2V5XSAvPSBkb2N1bWVudC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHNjb3JlRGljdGlvbmFyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZURpY3Rpb25hcnlba2V5XSA9IDAuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybUZyZXF1ZW5jaWVzLnB1c2godGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NvcmVEaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGVybUZyZXF1ZW5jeSBvZiB0ZXJtRnJlcXVlbmNpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gdGVybUZyZXF1ZW5jeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRmaWRmID0gdGVybUZyZXF1ZW5jeVtrZXldICogaW52ZXJzZURvY3VtZW50RnJlcXVlbmN5W2tleV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZmlkZiA+IHNjb3JlRGljdGlvbmFyeVtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlRGljdGlvbmFyeVtrZXldID0gdGZpZGY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY29yZURpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5sZW5ndGggPiAxICYmIGtleSAhPSBcIi4uLlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaCh7IHRlcm06IGtleSwgdmFsdWU6IHNjb3JlRGljdGlvbmFyeVtrZXldIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMuc29ydCgoeCwgeSkgPT4geS52YWx1ZSAtIHgudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmVzLmxlbmd0aCA+IG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMuc3BsaWNlKG1heCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNjb3JlIG9mIHNjb3Jlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUudmFsdWUgPiBtYXhTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzY29yZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzY29yZSBvZiBzY29yZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmUudmFsdWUgLz0gbWF4U2NvcmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMuc29ydCgoeCwgeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeC50ZXJtID4geS50ZXJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh4LnRlcm0gPCB5LnRlcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoW2RvY3VtZW50cywgc2NvcmVzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZERvY3VtZW50cy5zcGxpY2UoMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFncy5zcGxpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiByZXN1bHRzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZWREb2N1bWVudHMucHVzaChkb2N1bWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRzWzFdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdzLnB1c2goeyBpbmRleDogaSwgbmFtZTogcmVzdWx0c1sxXVtpXS50ZXJtLCBzY29yZTogcmVzdWx0c1sxXVtpXS52YWx1ZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuaXNCbGluZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vYWN0aXZhdGVUaW1lID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmV0Y2g6IGFzeW5jIGZ1bmN0aW9uIChpZ25vcmUsIGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJlY2lzaW9ucyA9IHsgMTogMiwgMjogMiwgMzogMiwgNDogMiwgNTogMiwgNjogMiwgNzogMiwgODogMiwgOTogMiwgMTA6IDMsIDExOiAzLCAxMjogNCwgMTM6IDQsIDE0OiA0LCAxNTogNSwgMTY6IDUsIDE3OiA1LCAxODogNiwgMTk6IDYsIDIwOiA2IH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJHZW9oYXNoID0gdGhpcy5lbmNvZGVHZW9oYXNoKGxhdGl0dWRlLCBsb25naXR1ZGUsIHByZWNpc2lvbnNbdGhpcy5tYXAuZ2V0Wm9vbSgpXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ2VvaGFzaGVzID0gW2NlbnRlckdlb2hhc2hdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcFJlY2VudCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgbGV0IHByaW1pdGl2ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCByZWN0ID0gdGhpcy5kZWNvZGVHZW9oYXNoKGNlbnRlckdlb2hhc2gpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gNjA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wQ2FjaGUgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmVzLnB1c2gobmV3IE1pY3Jvc29mdC5NYXBzLlBvbHlnb24oW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbihyZWN0LnRvcGxlZnQubGF0aXR1ZGUsIHJlY3QudG9wbGVmdC5sb25naXR1ZGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbihyZWN0LnRvcHJpZ2h0LmxhdGl0dWRlLCByZWN0LnRvcHJpZ2h0LmxvbmdpdHVkZSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE1pY3Jvc29mdC5NYXBzLkxvY2F0aW9uKHJlY3QuYm90dG9tcmlnaHQubGF0aXR1ZGUsIHJlY3QuYm90dG9tcmlnaHQubG9uZ2l0dWRlKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTWljcm9zb2Z0Lk1hcHMuTG9jYXRpb24ocmVjdC5ib3R0b21sZWZ0LmxhdGl0dWRlLCByZWN0LmJvdHRvbWxlZnQubG9uZ2l0dWRlKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTWljcm9zb2Z0Lk1hcHMuTG9jYXRpb24ocmVjdC50b3BsZWZ0LmxhdGl0dWRlLCByZWN0LnRvcGxlZnQubG9uZ2l0dWRlKV0sIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICdyZ2JhKDI1NSwgMCwgMCwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICdyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogMVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjZW50ZXJHZW9oYXNoLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZWlnaGJvcnMgPSB0aGlzLmdldE5laWdoYm9ycyhjZW50ZXJHZW9oYXNoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmVpZ2hib3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb2hhc2hlcy5wdXNoKG5laWdoYm9yc1trZXldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmRlY29kZUdlb2hhc2gobmVpZ2hib3JzW2tleV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlcy5wdXNoKG5ldyBNaWNyb3NvZnQuTWFwcy5Qb2x5Z29uKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbihyZWN0LnRvcGxlZnQubGF0aXR1ZGUsIHJlY3QudG9wbGVmdC5sb25naXR1ZGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE1pY3Jvc29mdC5NYXBzLkxvY2F0aW9uKHJlY3QudG9wcmlnaHQubGF0aXR1ZGUsIHJlY3QudG9wcmlnaHQubG9uZ2l0dWRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbihyZWN0LmJvdHRvbXJpZ2h0LmxhdGl0dWRlLCByZWN0LmJvdHRvbXJpZ2h0LmxvbmdpdHVkZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTWljcm9zb2Z0Lk1hcHMuTG9jYXRpb24ocmVjdC5ib3R0b21sZWZ0LmxhdGl0dWRlLCByZWN0LmJvdHRvbWxlZnQubG9uZ2l0dWRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbihyZWN0LnRvcGxlZnQubGF0aXR1ZGUsIHJlY3QudG9wbGVmdC5sb25naXR1ZGUpXSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAncmdiYSgyNTUsIDAsIDAsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICdyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllci5zZXRQcmltaXRpdmVzKHByaW1pdGl2ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlRdWV1ZS5wdXNoKGNlbnRlckdlb2hhc2gpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZ2VvaGFzaCBvZiBnZW9oYXNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlnbm9yZSAmJiBnZW9oYXNoIGluIHRoaXMucXVlcnlDYWNoZSAmJiB0aW1lc3RhbXAgLSB0aGlzLnF1ZXJ5Q2FjaGVbZ2VvaGFzaF0udGltZXN0YW1wIDwgdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdGhpcy5xdWVyeUNhY2hlW2dlb2hhc2hdLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBSZWNlbnQucHVzaCh1c2VyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvaGFzaCBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtnZW9oYXNoXS5wdXNoKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2dlb2hhc2hdID0gW3VzZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3RyYWNrc1wiKS5vcmRlckJ5Q2hpbGQoXCJrZXlcIikubGltaXRUb0xhc3QoNTApLnN0YXJ0QXQoZ2VvaGFzaCkuZW5kQXQoZ2VvaGFzaC5wYWRFbmQoMTIsIFwielwiKSArIFwiXFx1ZjhmZlwiKS5vbmNlKCd2YWx1ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0ZW1wQ2FjaGVbZ2VvaGFzaF0gPSB7IHRpbWVzdGFtcDogdGltZXN0YW1wLCBkYXRhOiBbXSB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGljdGlvbmFyeSA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdGlvbmFyeVtrZXldW1wiaWRcIl0gPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUmVjZW50LnB1c2goZGljdGlvbmFyeVtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBDYWNoZVtnZW9oYXNoXS5kYXRhLnB1c2goZGljdGlvbmFyeVtrZXldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvaGFzaCBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtnZW9oYXNoXS5wdXNoKGRpY3Rpb25hcnlba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbZ2VvaGFzaF0gPSBbZGljdGlvbmFyeVtrZXldXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5UXVldWUuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWVyeVF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdlb2hhc2ggaW4gdGVtcENhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeUNhY2hlW2dlb2hhc2hdID0gdGVtcENhY2hlW2dlb2hhc2hdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMucXVlcnlDYWNoZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCAtIHNlbGYucXVlcnlDYWNoZVtrZXldLnRpbWVzdGFtcCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxmLnF1ZXJ5Q2FjaGVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNlbnQgPSB0aGlzLnRha2UodGVtcFJlY2VudC5zb3J0KCh4LCB5KSA9PiB5LnRpbWVzdGFtcCAtIHgudGltZXN0YW1wKSwgMTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZGF0YVtrZXldLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWNlbnQuaW5jbHVkZXMoZGF0YVtrZXldW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtrZXldLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFba2V5XS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3RhcnRQZWRvbWV0ZXI6IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChEZXZpY2VNb3Rpb25FdmVudC5yZXF1ZXN0UGVybWlzc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb25TdGF0ZSA9IGF3YWl0IERldmljZU1vdGlvbkV2ZW50LnJlcXVlc3RQZXJtaXNzaW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uU3RhdGUgIT09IFwiZ3JhbnRlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2VNb3Rpb24gPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWcgPSBldmVudC5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gTWF0aC5zcXJ0KGFnLnggKiBhZy54ICsgYWcueSAqIGFnLnkgKyBhZy56ICogYWcueik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc1N0ZXBwaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDkuOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vd0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VEYXRlID0gbm93RGF0ZS5nZXRUaW1lKCkgLSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0ZXBzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pc1N0ZXBwaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGRheXMgPSBzZWxmLnN0YXRzLmxlbmd0aCAtIDE7IGRheXMgPiAwOyBkYXlzLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuc3RhdHNbZGF5c10uZGF0ZS5nZXRUaW1lKCkgPD0gYmFzZURhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhdHMuc3BsaWNlKGRheXMsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuc3RhdHNbZGF5c10uZGF0ZS5nZXRGdWxsWWVhcigpICE9PSBub3dEYXRlLmdldEZ1bGxZZWFyKCkgJiYgc2VsZi5zdGF0c1tkYXlzXS5kYXRlLmdldE1vbnRoKCkgIT09IG5vd0RhdGUuZ2V0TW9udGgoKSAmJiBzZWxmLnN0YXRzW2RheXNdLmRhdGUuZ2V0RGF0ZSgpICE9PSBub3dEYXRlLmdldERhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMucHVzaCh7IGRhdGU6IHNlbGYuc3RhdHNbZGF5c10uZGF0ZS50b0lTT1N0cmluZygpLCBzdGVwczogc2VsZi5zdGF0c1tkYXlzXS5zdGVwcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMudW5zaGlmdCh7IGRhdGU6IG5ldyBEYXRlKG5vd0RhdGUuZ2V0RnVsbFllYXIoKSwgbm93RGF0ZS5nZXRNb250aCgpLCBub3dEYXRlLmdldERhdGUoKSwgMCwgMCwgMCkudG9JU09TdHJpbmcoKSwgc3RlcHM6IHNlbGYuc3RlcHMgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3RhdHNcIiwgSlNPTi5zdHJpbmdpZnkoc3RhdHMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwic3RhdHNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5zdGVwcyAlIDEwID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtaW5Db3VudCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX3JhbmRvbShtaW4sIG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9cXHsoXFxkKVxcfS9nLCBmdW5jdGlvbiAobSwgYykgeyByZXR1cm4gYXJnc1twYXJzZUludChjKSArIDFdIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIHNlbGYuY2hhcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBqID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGQgb2YgZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAucHVzaCh7IHBhdGg6IHsgcm93OiBpLCBjb2x1bW46IGogfSwgZGF0YTogZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLmNvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluQ291bnQgPSBkLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBtYXAubGVuZ3RoIC0gMTsgaiA+IDA7IGotLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFtqXS5kYXRhLmNvdW50ID4gbWluQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFBhdGggPSBtYXBbX3JhbmRvbSgwLCBtYXAubGVuZ3RoKV0ucGF0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hhcnNbaW5kZXhQYXRoLnJvd11baW5kZXhQYXRoLmNvbHVtbl0uY291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGFyc1tpbmRleFBhdGgucm93XVtpbmRleFBhdGguY29sdW1uXS50aW1lc3RhbXAgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkgLyAxMDAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qZm9yIChjb25zdCBvYmogb2YgdGhpcy5wcmVwYXJlKHRoaXMuY2hhcmFjdGVyLnNlcXVlbmNlcy5maWx0ZXIoKHgpID0+IHgubmFtZSA9PT0gXCJDYXB0dXJlXCIpLCBzZWxmLmNoYXJzW2luZGV4UGF0aC5yb3ddW2luZGV4UGF0aC5jb2x1bW5dLnNldFswXSwgdGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubm90aWZ5KHsgdGV4dDogZm9ybWF0KG9iai50ZXh0LCBzZWxmLmNoYXJzW2luZGV4UGF0aC5yb3ddW2luZGV4UGF0aC5jb2x1bW5dLnNldFswXSksIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvYmogb2YgdGhpcy5wcmVwYXJlKHRoaXMuY2hhcmFjdGVyLnNlcXVlbmNlcy5maWx0ZXIoKHgpID0+IHgubmFtZSA9PT0gXCJDYXB0dXJlXCIpLCBzZWxmLmNoYXJzW2luZGV4UGF0aC5yb3ddW2luZGV4UGF0aC5jb2x1bW5dLnNldFswXSwgdGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgY2hhcmFjdGVyOiB0aGlzLmNoYXJhY3RlciwgdGV4dDogZm9ybWF0KG9iai50ZXh0LCBzZWxmLmNoYXJzW2luZGV4UGF0aC5yb3ddW2luZGV4UGF0aC5jb2x1bW5dLnNldFswXSkgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtcImNoYXJhY3RlclwiXSA9IHRoaXMuY2hhcmFjdGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5wdXNoKHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkID4gMTIuMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pc1N0ZXBwaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZW1vdGlvblwiLCB0aGlzLmRldmljZU1vdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0b3BQZWRvbWV0ZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlbW90aW9uXCIsIHRoaXMuZGV2aWNlTW90aW9uLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlTW90aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbG9jYXRlOiBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcInBlcm1pc3Npb25zXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVybWlzc2lvblN0YXR1cyA9IGF3YWl0IG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7IG5hbWU6IFwiZ2VvbG9jYXRpb25cIiB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb25TdGF0dXMuc3RhdGUgPT0gXCJncmFudGVkXCIgfHwgcGVybWlzc2lvblN0YXR1cy5zdGF0ZSA9PSBcInByb21wdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvY2F0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlzTG9jYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWFwLnNldFZpZXcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogbmV3IE1pY3Jvc29mdC5NYXBzLkxvY2F0aW9uKHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogc2VsZi5tYXAuZ2V0Wm9vbSgpIDwgMTYgPyAxNiA6IHNlbGYubWFwLmdldFpvb20oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pc0xvY2F0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSh7IHRleHQ6IGVycm9yLm1lc3NhZ2UsIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtQWdlOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2NhdGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHBvc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNMb2NhdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1hcC5zZXRWaWV3KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogbmV3IE1pY3Jvc29mdC5NYXBzLkxvY2F0aW9uKHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBzZWxmLm1hcC5nZXRab29tKCkgPCAxNiA/IDE2IDogc2VsZi5tYXAuZ2V0Wm9vbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlzTG9jYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZnkoeyB0ZXh0OiBlcnJvci5tZXNzYWdlLCBhY2NlbnQ6IHNlbGYuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IHNlbGYuY2hhcmFjdGVyLmltYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1BZ2U6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qY29uc3QgcGVybWlzc2lvblN0YXR1cyA9IGF3YWl0IG5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7IG5hbWU6IFwiZ2VvbG9jYXRpb25cIiB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvblN0YXR1cy5zdGF0ZSA9PSBcImdyYW50ZWRcIiB8fCBwZXJtaXNzaW9uU3RhdHVzLnN0YXRlID09IFwicHJvbXB0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbigocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXAuc2V0Vmlldyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IG5ldyBNaWNyb3NvZnQuTWFwcy5Mb2NhdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsIHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogc2VsZi5tYXAuZ2V0Wm9vbSgpIDwgMTYgPyAxNiA6IHNlbGYubWFwLmdldFpvb20oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZnkoeyB0ZXh0OiBlcnJvci5tZXNzYWdlLCBhY2NlbnQ6IHNlbGYuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IHNlbGYuY2hhcmFjdGVyLmltYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1BZ2U6IDBcclxuICAgICAgICAgICAgICAgICAgICB9KTsqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbigocG9zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtQWdlOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pOyovXHJcblxyXG4gICAgICAgICAgICAgICAgLypjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdlb2hhc2ggPSB0aGlzLmVuY29kZUdlb2hhc2gocG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLCBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvdXNlcnMvXCIgKyB0aGlzLnVzZXIudWlkKS50cmFuc2FjdGlvbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsga2V5OiBnZW9oYXNoICsgdGltZXN0YW1wLCBuYW1lOiBzZWxmLnVzZXIuZGlzcGxheU5hbWUsIGltYWdlOiBzZWxmLnVzZXIucGhvdG9VUkwsIGxvY2F0aW9uOiB7IGxhdGl0dWRlOiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsIGxvbmdpdHVkZTogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSB9LCBnZW9oYXNoOiBnZW9oYXNoLCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyW1wia2V5XCJdID0gZ2VvaGFzaCArIHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcltcIm5hbWVcIl0gPSBzZWxmLnVzZXIuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJbXCJpbWFnZVwiXSA9IHNlbGYudXNlci5waG90b1VSTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcltcImxvY2F0aW9uXCJdID0geyBsYXRpdHVkZTogcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLCBsb25naXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcltcImdlb2hhc2hcIl0gPSBnZW9oYXNoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyW1widGltZXN0YW1wXCJdID0gdGltZXN0YW1wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yLCBjb21taXR0ZWQsIHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29tbWl0dGVkICYmIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgc2VsZi51c2VyLnVpZCkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgY29tbWl0dGVkLCBzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29tbWl0dGVkICYmIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvKn0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VuZDogYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RlYnVnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFncyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiB0aGlzLmlucHV0LnNwbGl0KC9cXHMvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlcy5zb21lKCh4KSA9PiB4LmlkID09PSB0b2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2godG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzLnB1c2godG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5cy5sZW5ndGggPiAwICYmIHRhZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi9pbWFnZXMvXCIgKyBrZXkpLnRyYW5zYWN0aW9uKGZ1bmN0aW9uIChpbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVtcInRhZ3NcIl0gPSB0YWdzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMZWFybmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQubGVuZ3RoIDw9IHRoaXMubWF4SW5wdXRMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5tYXAuZ2V0Q2VudGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWFybih7IG5hbWU6IHRoaXMuaW5wdXQsIGxvY2F0aW9uOiB7IGxhdGl0dWRlOiBsb2NhdGlvbi5sYXRpdHVkZSwgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sb25naXR1ZGUgfSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xlYXJuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGltYWdlIG9mIHRoaXMuYmFja2dyb3VuZEltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IGltYWdlLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlucHV0Lmxlbmd0aCA+IDAgJiYgdGhpcy5pbnB1dC5sZW5ndGggPD0gdGhpcy5tYXhJbnB1dExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5tYXAuZ2V0Q2VudGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVhcm4oeyBuYW1lOiB0aGlzLmlucHV0LCBsb2NhdGlvbjogeyBsYXRpdHVkZTogbG9jYXRpb24ubGF0aXR1ZGUsIGxvbmdpdHVkZTogbG9jYXRpb24ubG9uZ2l0dWRlIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xlYXJuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hha2UodGhpcy4kcmVmcy5pbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldEltYWdlOiBhc3luYyBmdW5jdGlvbiAocHVzaHBpbiwgdXNlciwgc2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnN0IGhvdXJzID0gbmV3IERhdGUodHJhY2sucG9zaXRpb24udGltZXN0YW1wICogMTAwMCkuZ2V0SG91cnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXCJpbWFnZVwiIGluIHVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLypwdXNocGluLnNldE9wdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBgPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIiBzdGFuZGFsb25lPVwibm9cIj8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwhRE9DVFlQRSBzdmcgUFVCTElDIFwiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU5cIiBcImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMTggMThcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCIgeG1sbnM6c2VyaWY9XCJodHRwOi8vd3d3LnNlcmlmLmNvbS9cIiBzdHlsZT1cImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoyO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPVwibWF0cml4KDEsMCwwLDEsLTE3LjcwNzcsLTE4Ljc1MzgpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0yNi43MDgsMTkuNzU0QzMxLjEyMywxOS43NTQgMzQuNzA4LDIzLjMzOSAzNC43MDgsMjcuNzU0QzM0LjcwOCwzMi4xNjkgMzEuMTIzLDM1Ljc1NCAyNi43MDgsMzUuNzU0QzIyLjI5MiwzNS43NTQgMTguNzA4LDMyLjE2OSAxOC43MDgsMjcuNzU0QzE4LjcwOCwyMy4zMzkgMjIuMjkyLDE5Ljc1NCAyNi43MDgsMTkuNzU0Wk0yNi43MDgsMjMuNzU0QzI4LjkxNSwyMy43NTQgMzAuNzA4LDI1LjU0NiAzMC43MDgsMjcuNzU0QzMwLjcwOCwyOS45NjIgMjguOTE1LDMxLjc1NCAyNi43MDgsMzEuNzU0QzI0LjUsMzEuNzU0IDIyLjcwOCwyOS45NjIgMjIuNzA4LDI3Ljc1NEMyMi43MDgsMjUuNTQ2IDI0LjUsMjMuNzU0IDI2LjcwOCwyMy43NTRaXCIgc3R5bGU9XCJmaWxsOnJnYigyNTUsMjM4LDApO1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+YFxyXG4gICAgICAgICAgICAgICAgICAgIH0pOyovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gYXdhaXQgbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLmltYWdlLnN0YXJ0c1dpdGgoXCJnczovL1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc3JjID0gYXdhaXQgc3RvcmFnZS5yZWZGcm9tVVJMKHVzZXIuaW1hZ2UpLmdldERvd25sb2FkVVJMKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuY3Jvc3NPcmlnaW4gPSBcIkFub255bW91c1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc3JjID0gdXNlci5pbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNocGluLnNldE9wdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogYDw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cIm5vXCI/PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPCFET0NUWVBFIHN2ZyBQVUJMSUMgXCItLy9XM0MvL0RURCBTVkcgMS4xLy9FTlwiIFwiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCI1NFwiIHZpZXdCb3g9XCIwIDAgNTAgNTRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCIgeG1sbnM6c2VyaWY9XCJodHRwOi8vd3d3LnNlcmlmLmNvbS9cIiBzdHlsZT1cImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoyO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cIm1hdHJpeCgwLjk5OTk5OSwwLDAsMC45OTk5OTksMTcuMDAxMSwtMTMpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMCw1MEwxNiw1MEw4LDY2TDAsNTBaXCIgc3R5bGU9XCJmaWxsOnJnYigyNTUsMjM4LDApO1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPVwibWF0cml4KDEuOTY0OTEsMCwwLDEuOTY0OTEsLTMwLjAwOTksLTI0LjU5MzEpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIyNy45OTZcIiBjeT1cIjI1LjIzOVwiIHI9XCIxMi4yMTRcIiBzdHlsZT1cImZpbGw6cmdiKDI1NSwyMzgsMCk7XCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09XCJtYXRyaXgoMC40MTA1NzQsMCwwLDAuNDEwNTc0LDM0LjA0OTgsMjYuNzY5NClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMCwtNy4yOUMtMC4zMTEsLTguMjQ3IC0xLjEzOCwtOC45NDQgLTIuMTMzLC05LjA4OUwtOS4yMSwtMTAuMTE3TC0xMi4zNzUsLTE2LjUyOUMtMTIuODE5LC0xNy40MzIgLTEzLjczOCwtMTguMDAzIC0xNC43NDQsLTE4LjAwM0MtMTUuNzUsLTE4LjAwMyAtMTYuNjcsLTE3LjQzMiAtMTcuMTE0LC0xNi41M0wtMjAuMjc5LC0xMC4xMTdMLTI3LjM1NSwtOS4wODlDLTI4LjM1MiwtOC45NDQgLTI5LjE3OSwtOC4yNDcgLTI5LjQ5LC03LjI5Qy0yOS44MDEsLTYuMzMzIC0yOS41NDEsLTUuMjgzIC0yOC44MiwtNC41ODFMLTIzLjcsMC40MUwtMjQuOTA4LDcuNDU5Qy0yNS4wNzgsOC40NSAtMjQuNjcyLDkuNDUyIC0yMy44NTcsMTAuMDQzQy0yMy4wNDMsMTAuNjM1IC0yMS45NjUsMTAuNzEzIC0yMS4wNzQsMTAuMjQ0TC0xNC43NDQsNi45MTdMLTguNDE1LDEwLjI0NEMtOC4wMjgsMTAuNDQ3IC03LjYwNiwxMC41NDggLTcuMTg2LDEwLjU0OEMtNi42MzgsMTAuNTQ4IC02LjA5MiwxMC4zNzcgLTUuNjMyLDEwLjA0M0MtNC44MTgsOS40NTIgLTQuNDEsOC40NSAtNC41OCw3LjQ1OEwtNS43ODksMC40MUwtMC42NjgsLTQuNTgxQzAuMDUyLC01LjI4MyAwLjMxMiwtNi4zMzMgMCwtNy4yOVwiIHN0eWxlPVwiZmlsbDp3aGl0ZTtmaWxsLXJ1bGU6bm9uemVybztcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IGMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYy53aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBvcGFjaXR5ID0gaG91cnMgPj0gNiAmJiBob3VycyA8IDE4ID8gXCIwLjA1XCIgOiBcIjFcIjtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IGFjY2VudENvbG9yID0gc2VsZi51c2VyLnVpZCA9PT0gd29yZC5pZCA/IHNlbGYuY2hhcmFjdGVyLmFjY2VudCA6ICcjZmZmZmZmJztcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IHNlbGVjdGVkQ29sb3IgPSBzZWxlY3RlZCA/IHNlbGYuY2hhcmFjdGVyLmFjY2VudCA6ICdyZ2IoMjU0LDIyMSw4MCknO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubGluZVN2ZyA9IGA8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJub1wiPz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPCFET0NUWVBFIHN2ZyBQVUJMSUMgXCItLy9XM0MvL0RURCBTVkcgMS4xLy9FTlwiIFwiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjU0XCIgdmlld0JveD1cIjAgMCA1MCA1NFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIiB4bWxuczpzZXJpZj1cImh0dHA6Ly93d3cuc2VyaWYuY29tL1wiIHN0eWxlPVwiZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjI7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09XCJtYXRyaXgoMC45OTk5OTksMCwwLDAuOTk5OTk5LDE3LjAwMTEsLTEzKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMCw1MEwxNiw1MEw4LDY2TDAsNTBaXCIgc3R5bGU9XCJmaWxsOnJnYigyNTUsMjM4LDApO1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cIm1hdHJpeCgxLjk2NDkxLDAsMCwxLjk2NDkxLC0zMC4wMDk5LC0yNC41OTMxKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIyNy45OTZcIiBjeT1cIjI1LjIzOVwiIHI9XCIxMi4yMTRcIiBzdHlsZT1cImZpbGw6cmdiKDI1NSwyMzgsMCk7XCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjbGlwUGF0aCBpZD1cIl9jbGlwMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMjcuOTk2XCIgY3k9XCIyNS4yMzlcIiByPVwiMTIuMjE0XCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvY2xpcFBhdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgY2xpcC1wYXRoPVwidXJsKCNfY2xpcDEpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cIm1hdHJpeCgwLjc5MTY2NywwLDAsMC43OTE2NjcsNS44MzI0OSw1LjI1ODIpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMjcuOTk2XCIgY3k9XCIyNS4yMzlcIiByPVwiMTIuMjE0XCIgc3R5bGU9XCJmaWxsOndoaXRlO1wiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjbGlwUGF0aCBpZD1cIl9jbGlwMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIyNy45OTZcIiBjeT1cIjI1LjIzOVwiIHI9XCIxMi4yMTRcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2NsaXBQYXRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgY2xpcC1wYXRoPVwidXJsKCNfY2xpcDIpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9XCJCYWNrZ3JvdW5kXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMDIzODU2LDAsMCwwLjAyMzg1NiwtMi41Mzk2NCwtNS4yOTY1OClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiI19JbWFnZTNcIiB4PVwiNzY3XCIgeT1cIjc2N1wiIHdpZHRoPVwiMTAyNnB4XCIgaGVpZ2h0PVwiMTAyNnB4XCIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZWZzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWFnZSBpZD1cIl9JbWFnZTNcIiB3aWR0aD1cIjEwMjZweFwiIGhlaWdodD1cIjEwMjZweFwiIHhsaW5rOmhyZWY9XCJgICsgYy50b0RhdGFVUkwoKSArIGBcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RlZnM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPmA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHB1c2hwaW4uc2V0T3B0aW9ucyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGlubGluZVN2Z1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXQubGVuZ3RoIDw9IHRoaXMubWF4SW5wdXRMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0SGFzRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEhhc0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdXBsb2FkOiBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlVXVpZCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lL2Nocm9tZS1wbGF0Zm9ybS1hbmFseXRpY3MvYmxvYi9tYXN0ZXIvc3JjL2ludGVybmFsL2lkZW50aWZpZXIuanNcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBGT1JNQVQ6IHN0cmluZyA9IFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJzID0gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5zcGxpdChcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGNoYXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2hhcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnNbaV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNikudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInlcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc1tpXSA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSArIDgpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJzLmpvaW4oXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yYWdlUmVmID0gc3RvcmFnZS5yZWYoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRocyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBldmVudC50YXJnZXQuZmlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlcy5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zb3J0KCh4LCB5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHgubmFtZSA+IHkubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHgubmFtZSA8IHkubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBsb2FkVGFzayA9IHN0b3JhZ2VSZWYuY2hpbGQoYGltYWdlcy8ke2dlbmVyYXRlVXVpZCgpfWApLnB1dChmaWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkVGFzay5vbihcInN0YXRlX2NoYW5nZWRcIiwgZnVuY3Rpb24gKHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcyA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzIC8gZmlsZXMubGVuZ3RoICsgcGF0aHMubGVuZ3RoIC8gZmlsZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhzLnB1c2godXBsb2FkVGFzay5zbmFwc2hvdC5yZWYuZnVsbFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi9pbWFnZXNcIikucHVzaCh7IHBhdGhzOiBwYXRocywgdGltZXN0YW1wOiBNYXRoLmZsb29yKG5ldyBEYXRlKCkgLyAxMDAwKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVhcm46IGFzeW5jIGZ1bmN0aW9uICh3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXQoZm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFx7KFxcZClcXH0vZywgZnVuY3Rpb24gKG0sIGMpIHsgcmV0dXJuIGFyZ3NbcGFyc2VJbnQoYykgKyAxXSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXF1ZW5jZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChcImF0dHJpYnV0ZXNcIiBpbiB3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdGhpcy5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgaW4gd29yZC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKHsgbmFtZTogYXR0cmlidXRlLCB2YWx1ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKHsgbmFtZTogYXR0cmlidXRlLCB2YWx1ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgdGhpcy51c2VyLnVpZCArIFwiL2RpY3Rpb25hcnkvd29yZHMvXCIgKyB3b3JkLm5hbWUpLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRoaXMuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiB3LmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAody5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaCh7IG5hbWU6IGF0dHJpYnV0ZSwgdmFsdWU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKHsgbmFtZTogYXR0cmlidXRlLCB2YWx1ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdGhpcy5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnB1c2goeyBuYW1lOiBhdHRyaWJ1dGUsIHZhbHVlOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmQgPSB7IG5hbWU6IHdvcmQubmFtZSwgYXR0cmlidXRlczogYXR0cmlidXRlcyB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChcImxvY2F0aW9uXCIgaW4gd29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29yZFtcImxvY2F0aW9uXCJdID0gd29yZC5sb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXCJ1c2VyXCIgaW4gd29yZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29yZFtcInVzZXJcIl0gPSB3b3JkLnVzZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBvYmogb2YgdGhpcy5wcmVwYXJlKHRoaXMuY2hhcmFjdGVyLnNlcXVlbmNlcy5maWx0ZXIoKHgpID0+IHgubmFtZSA9PT0gXCJMZWFyblwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT09IFwiTWVzc2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgdGV4dDogZm9ybWF0KG9iai50ZXh0LCB3b3JkLm5hbWUpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcXVlbmNlUXVldWUucHVzaChzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRoaXMud29yZC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gZXZlbnQudGFyZ2V0LmRhdGFzZXQuYXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS52YWx1ZSA9IGV2ZW50LnRhcmdldC5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2hhcmU6IGFzeW5jIGZ1bmN0aW9uICh3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gXCJsb2NhdGlvblwiIGluIHdvcmQgPyB3b3JkLmxvY2F0aW9uIDogdGhpcy5tYXAuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnZW9oYXNoID0gdGhpcy5lbmNvZGVHZW9oYXNoKGxvY2F0aW9uLmxhdGl0dWRlLCBsb2NhdGlvbi5sb25naXR1ZGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHsgaWQ6IHRoaXMudXNlci51aWQsIG5hbWU6IHRoaXMudXNlci5kaXNwbGF5TmFtZSwgaW1hZ2U6IHRoaXMudXNlci5waG90b1VSTCB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdvcmQubmFtZSBpbiB0aGlzLndvcmREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMud29yZERpY3Rpb25hcnlbd29yZC5uYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2tleV0ud29yZHMuc29tZSgoeCkgPT4geCA9PT0gd29yZC5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU3VibWl0dGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci5wcm92aWRlckRhdGFbMF0ucHJvdmlkZXJJZCA9PT0gZmlyZWJhc2UuYXV0aC5Ud2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGF3YWl0IGRhdGFiYXNlLnJlZihgJHtkYXRhYmFzZVJvb3R9L3VzZXJzLyR7dGhpcy51c2VyLnVpZH0vbGlua2ApLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcltcImxpbmtcIl0gPSBsaW5rLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvdXNlcnMvXCIgKyB0aGlzLnVzZXIudWlkICsgXCIvZGljdGlvbmFyeS93b3Jkcy9cIiArIHdvcmQubmFtZSkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlUmVxdWlyZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHdvcmQuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5uYW1lIGluIGN1cnJlbnQuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZXF1aXJlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlUmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWxldGVSZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0geyBhdHRyaWJ1dGVzOiB7fSB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHdvcmQuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5uYW1lIGluIGN1cnJlbnQuYXR0cmlidXRlcyAmJiBjdXJyZW50LmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IGN1cnJlbnQuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdID0gdGltZXN0YW1wIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlUmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZVJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNbXCJ0aW1lc3RhbXBcIl0gPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB7IGF0dHJpYnV0ZXM6IHt9LCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2Ygd29yZC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInVzZXJcIiBpbiB3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1widXNlclwiXSA9IHsgaWQ6IHdvcmQudXNlci5pZCwgbmFtZTogd29yZC51c2VyLm5hbWUsIGltYWdlOiB3b3JkLnVzZXIuaW1hZ2UgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9LCBhc3luYyBmdW5jdGlvbiAoZXJyb3IsIGNvbW1pdHRlZCwgc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWl0dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGljdGlvbmFyeSA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRpY3Rpb25hcnkuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGljdGlvbmFyeS5hdHRyaWJ1dGVzW2tleV0gPT09IFwibnVtYmVyXCIgJiYgZGljdGlvbmFyeS5hdHRyaWJ1dGVzW2tleV0gPiAwICYmIHNlbGYuYXR0cmlidXRlcy5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcHMucHVzaChkaWN0aW9uYXJ5LmF0dHJpYnV0ZXNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXBzLmxlbmd0aCA9PT0gMSAmJiB0aW1lc3RhbXBzWzBdID09PSBkaWN0aW9uYXJ5LnRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdChmb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xceyhcXGQpXFx9L2csIGZ1bmN0aW9uIChtLCBjKSB7IHJldHVybiBhcmdzW3BhcnNlSW50KGMpICsgMV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvdXNlcnMvXCIgKyBzZWxmLnVzZXIudWlkICsgXCIvZGljdGlvbmFyeS9jb3VudFwiKS50cmFuc2FjdGlvbihmdW5jdGlvbiAoY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjb3VudCB8fCAwKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHNlbGYucHJlcGFyZShzZWxmLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiTGVhcm5lZFwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZnkoeyB0ZXh0OiBmb3JtYXQob2JqLnRleHQsIHdvcmQubmFtZSksIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdGFyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdGFyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLmlzTXV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi4kcmVmcy50d2lua2xlLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwidXNlclwiIGluIHdvcmQgPT09IGZhbHNlIHx8IHdvcmQudXNlci5pZCA9PT0gc2VsZi51c2VyLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi90cmFja3MvXCIgKyBhd2FpdCBzZWxmLmRpZ2VzdE1lc3NhZ2UoYCR7c2VsZi51c2VyLnVpZH0mJHt3b3JkLm5hbWV9YCkpLnRyYW5zYWN0aW9uKGZ1bmN0aW9uIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1wia2V5XCJdID0gYCR7Z2VvaGFzaH0ke3RpbWVzdGFtcH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcImxvY2F0aW9uXCJdID0geyBsYXRpdHVkZTogbG9jYXRpb24ubGF0aXR1ZGUsIGxvbmdpdHVkZTogbG9jYXRpb24ubG9uZ2l0dWRlIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1wiZ2VvaGFzaFwiXSA9IGdlb2hhc2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1widGltZXN0YW1wXCJdID0gdGltZXN0YW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IHsga2V5OiBgJHtnZW9oYXNofSR7dGltZXN0YW1wfWAsIG5hbWU6IHdvcmQubmFtZSwgbG9jYXRpb246IHsgbGF0aXR1ZGU6IGxvY2F0aW9uLmxhdGl0dWRlLCBsb25naXR1ZGU6IGxvY2F0aW9uLmxvbmdpdHVkZSB9LCBnZW9oYXNoOiBnZW9oYXNoLCB1c2VyOiB1c2VyLCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkaWN0aW9uYXJ5LmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmF0dHJpYnV0ZXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNba2V5XSA9IGRpY3Rpb25hcnkuYXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1wiYXR0cmlidXRlc1wiXSA9IGF0dHJpYnV0ZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgYywgcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiBzZWxmLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiBzZWxmLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyphd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmID0gZGF0YWJhc2UucmVmKGAke2RhdGFiYXNlUm9vdH0vdHJhY2tzYCkucHVzaCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYuc2V0KHsga2V5OiBnZW9oYXNoICsgdGltZXN0YW1wLCBuYW1lOiB3b3JkLm5hbWUsIGF0dHJpYnV0ZXM6IHdvcmQuYXR0cmlidXRlcywgbG9jYXRpb246IHsgbGF0aXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwgbG9uZ2l0dWRlOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlIH0sIGdlb2hhc2g6IGdlb2hhc2gsIHRpbWVzdGFtcDogdGltZXN0YW1wLCB1c2VyOiB7IGlkOiBzZWxmLnVzZXIudWlkLCBuYW1lOiBzZWxmLnVzZXIuZGlzcGxheU5hbWUsIGltYWdlOiBzZWxmLnVzZXIucGhvdG9VUkwgfSB9LCBhc3luYyAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgc2VsZi51c2VyLnVpZCArIFwiL2RpY3Rpb25hcnkvY291bnRcIikudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ICYmIGNvdW50ID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi90cmFja3MvXCIgKyBhd2FpdCBzZWxmLmRpZ2VzdE1lc3NhZ2UoYCR7c2VsZi51c2VyLnVpZH0mJHt3b3JkLm5hbWV9YCkpLnRyYW5zYWN0aW9uKGZ1bmN0aW9uIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgYywgcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcy5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZnkoeyB0ZXh0OiBlLm1lc3NhZ2UsIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlzU3VibWl0dGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubm90aWZ5KHsgdGV4dDogZXJyb3IubWVzc2FnZSwgYWNjZW50OiBzZWxmLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiBzZWxmLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcInVzZXJcIiBpbiB3b3JkID09PSBmYWxzZSB8fCB3b3JkLnVzZXIuaWQgPT09IHNlbGYudXNlci51aWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3RyYWNrcy9cIiArIGF3YWl0IHNlbGYuZGlnZXN0TWVzc2FnZShgJHtzZWxmLnVzZXIudWlkfSYke3dvcmQubmFtZX1gKSkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcImtleVwiXSA9IGAke2dlb2hhc2h9JHt0aW1lc3RhbXB9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1wibG9jYXRpb25cIl0gPSB7IGxhdGl0dWRlOiBsb2NhdGlvbi5sYXRpdHVkZSwgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sb25naXR1ZGUgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W1wiZ2VvaGFzaFwiXSA9IGdlb2hhc2g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtcInVzZXJcIl0gPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRbXCJ0aW1lc3RhbXBcIl0gPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHdvcmQuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdID0gdGltZXN0YW1wIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0geyBrZXk6IGAke2dlb2hhc2h9JHt0aW1lc3RhbXB9YCwgbmFtZTogd29yZC5uYW1lLCBsb2NhdGlvbjogeyBsYXRpdHVkZTogbG9jYXRpb24ubGF0aXR1ZGUsIGxvbmdpdHVkZTogbG9jYXRpb24ubG9uZ2l0dWRlIH0sIGdlb2hhc2g6IGdlb2hhc2gsIGF0dHJpYnV0ZXM6IHt9LCB1c2VyOiB1c2VyLCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgYywgcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiBzZWxmLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiBzZWxmLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5leHQ6IGFzeW5jIGZ1bmN0aW9uICh1c2VySWQsIHN0YXJ0QXQsIGxpbWl0ID0gNTApIHtcclxuICAgICAgICAgICAgICAgIGxldCBzbmFwc2hvdDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRBdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgdXNlcklkICsgXCIvZGljdGlvbmFyeS93b3Jkc1wiKS5vcmRlckJ5S2V5KCkubGltaXRUb0ZpcnN0KGxpbWl0ICsgMSkub25jZShcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHVzZXJJZCArIFwiL2RpY3Rpb25hcnkvd29yZHNcIikub3JkZXJCeUtleSgpLnN0YXJ0QXQoc3RhcnRBdCkubGltaXRUb0ZpcnN0KGxpbWl0ICsgMSkub25jZShcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChcIndvcmRzXCIgaW4gdGhpcy5tb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcFdvcmRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlLndvcmRzICE9PSBudWxsICYmIHRoaXMubW9kZS53b3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGUuaW5kZXhlcy5wdXNoKHRoaXMubW9kZS53b3Jkc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB3b3Jkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFdvcmRzLnB1c2goXCJ1c2VyXCIgaW4gd29yZHNbbmFtZV0gPyB7IG5hbWU6IG5hbWUsIGF0dHJpYnV0ZXM6IHdvcmRzW25hbWVdLmF0dHJpYnV0ZXMsIHVzZXI6IHdvcmRzW25hbWVdLnVzZXIgfSA6IHsgbmFtZTogbmFtZSwgYXR0cmlidXRlczogd29yZHNbbmFtZV0uYXR0cmlidXRlcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9kZS53b3Jkcy5sZW5ndGggPT09IGxpbWl0ICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlLm5leHQgPSB0aGlzLm1vZGUud29yZHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGUubmV4dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZS53b3JkcyA9IHRlbXBXb3JkcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJldmlvdXM6IGFzeW5jIGZ1bmN0aW9uICh1c2VySWQsIHN0YXJ0QXQsIGxpbWl0ID0gNTApIHtcclxuICAgICAgICAgICAgICAgIGxldCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHVzZXJJZCArIFwiL2RpY3Rpb25hcnkvd29yZHNcIikub3JkZXJCeUtleSgpLnN0YXJ0QXQoc3RhcnRBdCkubGltaXRUb0ZpcnN0KGxpbWl0KS5vbmNlKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFwid29yZHNcIiBpbiB0aGlzLm1vZGUgJiYgc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkcyA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RlLndvcmRzICE9PSBudWxsICYmIHRoaXMubW9kZS53b3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZS5uZXh0ID0gdGhpcy5tb2RlLndvcmRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlLndvcmRzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB3b3Jkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGUud29yZHMucHVzaChcInVzZXJcIiBpbiB3b3Jkc1tuYW1lXSA/IHsgbmFtZTogbmFtZSwgYXR0cmlidXRlczogd29yZHNbbmFtZV0uYXR0cmlidXRlcywgdXNlcjogd29yZHNbbmFtZV0udXNlciB9IDogeyBuYW1lOiBuYW1lLCBhdHRyaWJ1dGVzOiB3b3Jkc1tuYW1lXS5hdHRyaWJ1dGVzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlzY292ZXI6IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRTZXQgPSB7fTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcXVlbmNlID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2h1ZmZsZShhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IFtdLmNvbmNhdChhcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBhcnJheS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrID0gX3JhbmRvbSgwLCBuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhW25dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYVtuXSA9IGFba107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFba10gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHRoaXMucmVjZW50V29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VyLnVpZCAhPT0gd29yZC51c2VyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRzLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRTZXRbd29yZC5uYW1lXSA9IHdvcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuY2FjaGVkVHJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci51aWQgIT09IHRoaXMuY2FjaGVkVHJhY2tzW2tleV0udXNlci5pZCAmJiB0aGlzLmNhY2hlZFRyYWNrc1trZXldLm5hbWUgaW4gd29yZFNldCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMucHVzaCh0aGlzLmNhY2hlZFRyYWNrc1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0Rpc2NvdmVyaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygc2h1ZmZsZSh3b3JkcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgdGhpcy51c2VyLnVpZCArIFwiL2RpY3Rpb25hcnkvd29yZHMvXCIgKyB3b3JkLm5hbWUpLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHNlbGYudXNlci51aWQgKyBcIi9kaWN0aW9uYXJ5L3dvcmRzL1wiICsgd29yZC5uYW1lKS50cmFuc2FjdGlvbihmdW5jdGlvbiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiB7IGtleTogd29yZC5rZXksIG5hbWU6IHdvcmQubmFtZSwgYXR0cmlidXRlczogd29yZC5hdHRyaWJ1dGVzLCBsb2NhdGlvbjogd29yZC5sb2NhdGlvbiwgZ2VvaGFzaDogd29yZC5nZW9oYXNoLCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yLCBjb21taXR0ZWQsIHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1pdHRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xceyhcXGQpXFx9L2csIGZ1bmN0aW9uIChtLCBjKSB7IHJldHVybiBhcmdzW3BhcnNlSW50KGMpICsgMV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Rpc2NvdmVyaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypmb3IgKGNvbnN0IG9iaiBvZiB0aGlzLnByZXBhcmUodGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIkRpc2NvdmVyXCIpLCB3b3JkLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGZvcm1hdChvYmoudGV4dCwgd29yZC5uYW1lKSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiB0aGlzLnByZXBhcmUodGhpcy5jaGFyYWN0ZXIuYWx0ZXJuYXRpdmUuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIkRpc2NvdmVyXCIpLCB3b3JkLm5hbWUsIHRoaXMuY2hhcmFjdGVyLmFsdGVybmF0aXZlLnNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT09IFwiTWVzc2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgY2hhcmFjdGVyOiB0aGlzLmNoYXJhY3Rlci5hbHRlcm5hdGl2ZSwgdGV4dDogZm9ybWF0KG9iai50ZXh0LCB3b3JkLm5hbWUpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtcImNoYXJhY3RlclwiXSA9IHRoaXMuY2hhcmFjdGVyLmFsdGVybmF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVF1ZXVlLnB1c2goc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGVhcm4oeyBuYW1lOiB3b3JkLm5hbWUsIGF0dHJpYnV0ZXM6IHdvcmQuYXR0cmlidXRlcywgbG9jYXRpb246IHdvcmQubG9jYXRpb24sIHVzZXI6IHdvcmQudXNlciB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnNldFZpZXcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogbmV3IE1pY3Jvc29mdC5NYXBzLkxvY2F0aW9uKHdvcmQubG9jYXRpb24ubGF0aXR1ZGUsIHdvcmQubG9jYXRpb24ubG9uZ2l0dWRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiBzZWxmLm1hcC5nZXRab29tKCkgPCAxNiA/IDE2IDogc2VsZi5tYXAuZ2V0Wm9vbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KHsgdGV4dDogZS5tZXNzYWdlLCBhY2NlbnQ6IHRoaXMuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IHRoaXMuY2hhcmFjdGVyLmltYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRGlzY292ZXJpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKmZvciAoY29uc3Qgb2JqIG9mIHRoaXMucHJlcGFyZSh0aGlzLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiRGlzY292ZXJcIiksIFwiXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IG9iai50ZXh0LCBhY2NlbnQ6IHRoaXMuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IHRoaXMuY2hhcmFjdGVyLmltYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHRoaXMucHJlcGFyZSh0aGlzLmNoYXJhY3Rlci5hbHRlcm5hdGl2ZS5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiRGlzY292ZXJcIiksIFwiXCIsIHRoaXMuY2hhcmFjdGVyLmFsdGVybmF0aXZlLnNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT09IFwiTWVzc2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgY2hhcmFjdGVyOiB0aGlzLmNoYXJhY3Rlci5hbHRlcm5hdGl2ZSwgdGV4dDogb2JqLnRleHQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW1wiY2hhcmFjdGVyXCJdID0gdGhpcy5jaGFyYWN0ZXIuYWx0ZXJuYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcXVlbmNlUXVldWUucHVzaChzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRpZ2VzdE1lc3NhZ2U6IGFzeW5jIGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtc2dVaW50OCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShtZXNzYWdlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmNvZGUgYXMgKHV0Zi04KSBVaW50OEFycmF5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBtc2dVaW50OCk7ICAgICAgICAgICAvLyBoYXNoIHRoZSBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTsgICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGJ1ZmZlciB0byBieXRlIGFycmF5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNoSGV4ID0gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpOyAvLyBjb252ZXJ0IGJ5dGVzIHRvIGhleCBzdHJpbmdcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaEhleDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWN0aXZhdGU6IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlkbGVUaW1lID0gYWN0aXZhdGVUaW1lID0gMC4wO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhY2hlZERvY3VtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRRdWV1ZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaHVmZmxlKGFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfcmFuZG9tKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhID0gW10uY29uY2F0KGFycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuID0gYXJyYXkubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBfcmFuZG9tKDAsIG4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhW25dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhW25dID0gYVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhW2tdID0gdGVtcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiBzaHVmZmxlKHRoaXMuY2FjaGVkRG9jdW1lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2N1bWVudFF1ZXVlLnB1c2goZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IHRoaXMuZG9jdW1lbnRRdWV1ZS5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF3YWl0IHRoaXMudGFsayh0aGlzLnVzZXIudWlkLCBkb2N1bWVudC5maWx0ZXIoKHgpID0+IHggIT09IHRoaXMuY2hhcmFjdGVyLm5hbWUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhbGsodGhpcy51c2VyLnVpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhbGsodGhpcy51c2VyLnVpZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRhbGs6IGFzeW5jIGZ1bmN0aW9uICh1c2VySWQsIHRva2VucyA9IFtdKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VxdWVuY2VzID0gdGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIkFjdGl2YXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlcXVlbmNlID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaHVmZmxlKGFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGguY2VpbChtaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhID0gW10uY29uY2F0KGFycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBhcnJheS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBfcmFuZG9tKDAsIG4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYVtuXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhW25dID0gYVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFba10gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSA2MCAqIDYwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBTdGF0ZXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnN0YXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudGVyID0gbmV3IFRpbnlTZWdtZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5TZXQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRoaXMud29yZERpY3Rpb25hcnkgPT09IGZhbHNlIHx8IHRpbWVzdGFtcCAtIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLnRpbWVzdGFtcCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHVzZXJJZCArIFwiL2RpY3Rpb25hcnkvd29yZHMvXCIgKyB0b2tlbikub25jZShcInZhbHVlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dID0geyBhdHRyaWJ1dGVzOiBbXSwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAod29yZC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0pID09PSBcIm51bWJlclwiICYmIHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdID4gMCAmJiB0aGlzLmF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0uYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlcy5pbmNsdWRlcyhhdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBzaHVmZmxlKHNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlcGFyZWRTZXF1ZW5jZSA9IHRoaXMucHJlcGFyZShbc10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNBYm9ydGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG8gb2YgcHJlcGFyZWRTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgQXJyYXkuaXNBcnJheShvLnRleHQpID8gby50ZXh0IDogc2VnbWVudGVyLnNlZ21lbnQoby50ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0b2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHByZXBhcmVkU2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGUodXNlcklkLCBvYmoudGV4dCwgdG9rZW5zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Fib3J0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FjaGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RleHQsIGNhY2hlXSA9IHRlbXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2UucHVzaCh7IHR5cGU6IG9iai50eXBlLCBzcGVlZDogb2JqLnNwZWVkLCBkdXJhdGlvbjogb2JqLmR1cmF0aW9uLCB0ZXh0OiB0ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWJvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVF1ZXVlLnB1c2goc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG9rZW4ubGVuZ3RoID4gMSAmJiAhdG9rZW5TZXQuaW5jbHVkZXModG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gaW4gdGhpcy53b3JkRGljdGlvbmFyeSA9PT0gZmFsc2UgfHwgdGltZXN0YW1wIC0gdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0udGltZXN0YW1wID49IHRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHVzZXJJZCArIFwiL2RpY3Rpb25hcnkvd29yZHMvXCIgKyB0b2tlbikub25jZShcInZhbHVlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXSA9IHsgYXR0cmlidXRlczogW10sIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdKSA9PT0gXCJudW1iZXJcIiAmJiB3b3JkLmF0dHJpYnV0ZXNbYXR0cmlidXRlXSA+IDAgJiYgdGhpcy5hdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHJpYnV0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXS5hdHRyaWJ1dGVzLnB1c2goYXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBwcmVwYXJlZFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYXdhaXQgdGhpcy5nZW5lcmF0ZSh1c2VySWQsIG9iai50ZXh0LCB0b2tlbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Fib3J0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWNoZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0ZXh0LCBjYWNoZV0gPSB0ZW1wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2UucHVzaCh7IHR5cGU6IG9iai50eXBlLCBzcGVlZDogb2JqLnNwZWVkLCBkdXJhdGlvbjogb2JqLmR1cmF0aW9uLCB0ZXh0OiB0ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2UucHVzaChvYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBYm9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5wdXNoKHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblNldC5wdXNoKHRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBYm9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2Uuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZXMgPSB0ZW1wU3RhdGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHRoaXMucHJlcGFyZShzZXF1ZW5jZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYXdhaXQgdGhpcy5nZW5lcmF0ZSh1c2VySWQsIG9iai50ZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhY2hlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0ZXh0LCBjYWNoZV0gPSB0ZW1wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgdGV4dDogdGV4dCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcXVlbmNlUXVldWUucHVzaChzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdlbmVyYXRlOiBhc3luYyBmdW5jdGlvbiAodXNlcklkLCBtZXNzYWdlLCBoaW50cyA9IFtdKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaG9pY2UocHJvYmFiaWxpdGllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdW0gPSAwLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcHJvYmFiaWxpdHkgb2YgcHJvYmFiaWxpdGllcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VtIDw9IHIgJiYgciA8IHN1bSArIHByb2JhYmlsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IHByb2JhYmlsaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNvZnRtYXgoeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1heCA9IE51bWJlci5NSU5fVkFMVUU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN1bSA9IDAuMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4W2ldID4gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSB4W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IE1hdGguZXhwKHhbaV0gLSBtYXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChNYXRoLmV4cCh4W2ldIC0gbWF4KSAvIHN1bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSA2MCAqIDYwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlZ21lbnRlciA9IG5ldyBUaW55U2VnbWVudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG9rZW5zID0gQXJyYXkuaXNBcnJheShtZXNzYWdlKSA/IG1lc3NhZ2UgOiBzZWdtZW50ZXIuc2VnbWVudChtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGxldCBoaW50RGljdGlvbmFyeSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgbGV0IHRva2VuU2V0ID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKFwiWy4jJFxcXFxbXFxcXF1dXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhY2hEaWN0aW9uYXJ5ID0ge307XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXBzaWxvbiA9IE1hdGgucG93KDEwLCAtNik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWFtV2lkdGggPSAxMDtcclxuICAgICAgICAgICAgICAgIGxldCBzZXF1ZW5jZXMgPSBbeyBzZXF1ZW5jZTogW10sIHNjb3JlOiAxLjAgfV1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGhpbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRoaXMud29yZERpY3Rpb25hcnkgPT09IGZhbHNlIHx8IHRpbWVzdGFtcCAtIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLnRpbWVzdGFtcCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgdXNlcklkICsgXCIvZGljdGlvbmFyeS93b3Jkcy9cIiArIHRva2VuKS5vbmNlKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXSA9IHsgYXR0cmlidXRlczogW10sIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh3b3JkLmF0dHJpYnV0ZXNbYXR0cmlidXRlXSkgPT09IFwibnVtYmVyXCIgJiYgd29yZC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0gPiAwICYmIHRoaXMuYXR0cmlidXRlcy5pbmNsdWRlcyhhdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0uYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlIGluIGhpbnREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaW50RGljdGlvbmFyeVthdHRyaWJ1dGVdLnB1c2godG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGludERpY3Rpb25hcnlbYXR0cmlidXRlXSA9IFt0b2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuU2V0LmluY2x1ZGVzKHRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0b2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiBoaW50RGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgaGludERpY3Rpb25hcnlbYXR0cmlidXRlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtcy5pbmNsdWRlcyhzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1zLnB1c2gocyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRoaXMudGFncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9PT0gdGFnLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jlcy5wdXNoKHRhZy5zY29yZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05ldyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnB1c2goZXBzaWxvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeSA9PT0gZmFsc2UgfHwgdGltZXN0YW1wIC0gdGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnlbYXR0cmlidXRlXS50aW1lc3RhbXAgPj0gdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvdXNlcnMvXCIgKyB1c2VySWQgKyBcIi9kaWN0aW9uYXJ5L3dvcmRzXCIpLm9yZGVyQnlDaGlsZChgYXR0cmlidXRlcy8ke2F0dHJpYnV0ZX1gKS5saW1pdFRvTGFzdCgxMDApLnN0YXJ0QXQoMSkub25jZShcInZhbHVlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0gPSB7IHdvcmRzOiBbXSwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkcyA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgaW4gd29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnlbYXR0cmlidXRlXS53b3Jkcy5wdXNoKHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0ud29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbnMuaW5jbHVkZXMod29yZCkgJiYgIXRlcm1zLmluY2x1ZGVzKHdvcmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzTmV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybXMucHVzaCh3b3JkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkID09IHRhZy5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaCh0YWcuc2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jlcy5wdXNoKGVwc2lsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVybXMubGVuZ3RoID4gMCAmJiBzY29yZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2JhYmlsaXRpZXMgPSBzb2Z0bWF4KHNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXF1ZW5jZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwcm9iYWJpbGl0aWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VxdWVuY2UgPSBbXS5jb25jYXQoc2VxdWVuY2VzW2ldLnNlcXVlbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKHsgaW5kZXg6IGluZGV4LCB0ZXJtOiB0ZXJtc1tqXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7IHNlcXVlbmNlOiBzZXF1ZW5jZSwgc2NvcmU6IHNlcXVlbmNlc1tpXS5zY29yZSAqIHByb2JhYmlsaXRpZXNbal0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlcy5zcGxpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudGFrZShjYW5kaWRhdGVzLnNvcnQoKHgsIHkpID0+IHkuc2NvcmUgLSB4LnNjb3JlKSwgYmVhbVdpZHRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMucHVzaChjYW5kaWRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghcmVnZXgudGVzdCh0b2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbiBpbiB0aGlzLndvcmREaWN0aW9uYXJ5ID09PSBmYWxzZSB8fCB0aW1lc3RhbXAgLSB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXS50aW1lc3RhbXAgPj0gdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgdXNlcklkICsgXCIvZGljdGlvbmFyeS93b3Jkcy9cIiArIHRva2VuKS5vbmNlKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dID0geyBhdHRyaWJ1dGVzOiBbXSwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIGluIHdvcmQuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAod29yZC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0pID09PSBcIm51bWJlclwiICYmIHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdID4gMCAmJiB0aGlzLmF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlIGluIGhpbnREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGhpbnREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1zLnB1c2goa2V5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHRhZy5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaCh0YWcuc2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jlcy5wdXNoKGVwc2lsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgaW4gdGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnkgPT09IGZhbHNlIHx8IHRpbWVzdGFtcCAtIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0udGltZXN0YW1wID49IHRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3VzZXJzL1wiICsgdXNlcklkICsgXCIvZGljdGlvbmFyeS93b3Jkc1wiKS5vcmRlckJ5Q2hpbGQoYGF0dHJpYnV0ZXMvJHthdHRyaWJ1dGV9YCkubGltaXRUb0xhc3QoMTAwKS5zdGFydEF0KDEpLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeVthdHRyaWJ1dGVdID0geyB3b3JkczogW10sIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHdvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0ud29yZHMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0ud29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbnMuaW5jbHVkZXMod29yZCkgJiYgIXRlcm1zLmluY2x1ZGVzKHdvcmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzTmV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybXMucHVzaCh3b3JkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkID09IHRhZy5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaCh0YWcuc2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jlcy5wdXNoKGVwc2lsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVybXMubGVuZ3RoID4gMCAmJiBzY29yZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2JhYmlsaXRpZXMgPSBzb2Z0bWF4KHNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXF1ZW5jZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwcm9iYWJpbGl0aWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VxdWVuY2UgPSBbXS5jb25jYXQoc2VxdWVuY2VzW2ldLnNlcXVlbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKHsgaW5kZXg6IGluZGV4LCB0ZXJtOiB0ZXJtc1tqXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7IHNlcXVlbmNlOiBzZXF1ZW5jZSwgc2NvcmU6IHNlcXVlbmNlc1tpXS5zY29yZSAqIHByb2JhYmlsaXRpZXNbal0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlcy5zcGxpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudGFrZShjYW5kaWRhdGVzLnNvcnQoKHgsIHkpID0+IHkuc2NvcmUgLSB4LnNjb3JlKSwgYmVhbVdpZHRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMucHVzaChjYW5kaWRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5TZXQucHVzaCh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBzZXF1ZW5jZXNbY2hvaWNlKHNvZnRtYXgoc2VxdWVuY2VzLm1hcCh4ID0+IHguc2NvcmUpKSldO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkodG9rZW5zW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSBpbiBjYWNoRGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhY2hEaWN0aW9uYXJ5W2tleV0gPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdG9rZW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBjYWNoRGljdGlvbmFyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzTmV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcy5zZXF1ZW5jZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuc2VxdWVuY2Vbal0uaW5kZXggPT0gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gcy5zZXF1ZW5jZVtqXS50ZXJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hEaWN0aW9uYXJ5W2tleV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaERpY3Rpb25hcnlba2V5XSA9IHMuc2VxdWVuY2Vbal0udGVybTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBzLnNlcXVlbmNlW2pdLnRlcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0b2tlbnNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0b2tlbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0ZXh0LCBjYWNoRGljdGlvbmFyeV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5vdGlmeTogZnVuY3Rpb24gKGRhdGEsIGR1cmF0aW9uID0gMzAwMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0YVtcImlkXCJdID0gd2luZG93LnNldFRpbWVvdXQoKGQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGYubm90aWZpY2F0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5ub3RpZmljYXRpb25zW2ldLmlkID09PSBkLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGksIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgZHVyYXRpb24sIGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy51bnNoaWZ0KGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBibGluZGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBfcmFuZG9tKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRJbWFnZXNRdWV1ZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX3JhbmRvbShtaW4sIG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBbXS5jb25jYXQoYXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IGFycmF5Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IF9yYW5kb20oMCwgbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhW25dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbbl0gPSBhW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYVtrXSA9IHRlbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbWFnZSBvZiBzaHVmZmxlKHRoaXMucmVjZW50SW1hZ2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRJbWFnZXNRdWV1ZS5wdXNoKGltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmJhY2tncm91bmRJbWFnZXNRdWV1ZS5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJlbG9hZEltYWdlcy5zcGxpY2UoMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRJbWFnZXMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBpbWFnZS5wYXRocykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlbG9hZEltYWdlcy5wdXNoKHsgaWQ6IGltYWdlLmlkLCB1cmw6IGF3YWl0IHN0b3JhZ2UucmVmKCkuY2hpbGQocGF0aCkuZ2V0RG93bmxvYWRVUkwoKSwgdGltZXN0YW1wOiBpbWFnZS50aW1lc3RhbXAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFwidGFnc1wiIGluIGltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWxrKHRoaXMudXNlci51aWQsIGltYWdlLnRhZ3MuZmlsdGVyKCh4KSA9PiB4ICE9PSB0aGlzLmNoYXJhY3Rlci5uYW1lKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpc0NvbXBsZXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW1hZ2Ugb2YgdGhpcy5wcmVsb2FkSW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLnVybCA9PSB1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VbXCJpc0xvYWRlZFwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghKFwiaXNMb2FkZWRcIiBpbiBpbWFnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbWFnZSBvZiB0aGlzLnByZWxvYWRJbWFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmlzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRJbWFnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbWFnZS5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGltYWdlLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGltYWdlLnRpbWVzdGFtcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVsb2FkSW1hZ2VzLnNwbGljZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQmxpbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzQ29tcGxldGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbWFnZSBvZiB0aGlzLnByZWxvYWRJbWFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UudXJsID09IHVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVtcImlzTG9hZGVkXCJdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEoXCJpc0xvYWRlZFwiIGluIGltYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGltYWdlIG9mIHRoaXMucHJlbG9hZEltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuaXNMb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGltYWdlLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogaW1hZ2UudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogaW1hZ2UudGltZXN0YW1wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRJbWFnZXMuc3BsaWNlKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNCbGluZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNoYWtlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hbmltYXRlKFtcclxuICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoOHB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoLThweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKDdweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKC03cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCg2cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgtNnB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoNXB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoLTVweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKDRweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKC00cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgzcHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgtM3B4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoMnB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoLTJweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKDFweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKC0xcHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiIH1dLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZHVyYXRpb246IDEwMDAsIGl0ZXJhdGlvbnM6IDEgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNjcm9sbFRvVG9wKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2Nyb2xsVG9FbmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zY3JvbGxUaW1lb3V0SUQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaW1lb3V0SUQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGltZW91dElEID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZvcm1hdERhdGU6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgbW9tZW50LmxvY2FsZSh3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KGV2ZW50KS5mb3JtYXQoXCJMVFwiKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYW5pbWF0aW9uU3RhcnQ6IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkVuZDogZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZmljYXRpb25IZWlnaHQgPSBzZWxmLiRyZWZzLm5vdGlmaWNhdGlvbnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubGVhZGVyYm9hcmRIZWlnaHQgPSBzZWxmLiRyZWZzLmxlYWRlcmJvYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1BvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRpY2tlclVwZGF0ZWQ6IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2xpcCBvZiBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjaW5wdXQ+LmNvbHVtbnM6bGFzdC1vZi10eXBlPi5jb2x1bW4+LmNvbnRyb2wgLmNsaXBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBjbGlwLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6c2NvcGUgLnRpY2tlci13cmFwIC50aWNrZXIgLml0ZW1cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGlja2VyV2lkdGggPSBNYXRoLm1pbih3aWR0aCAvIDIsIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNpbnB1dD4uY29sdW1uczpsYXN0LW9mLXR5cGU+LmNvbHVtbj4uY29udHJvbCAubGV2ZWxcIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcC5xdWVyeVNlbGVjdG9yKFwiOnNjb3BlIC50aWNrZXItd3JhcCAudGlja2VyXCIpLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmFuZ2U6IGZ1bmN0aW9uIChkYXRlLCBkYXlzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2YgZGF5cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaChuZXcgRGF0ZShuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCksIGRhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCksIGRhdGUuZ2V0U2Vjb25kcygpLCBkYXRlLmdldE1pbGxpc2Vjb25kcygpKS5nZXRUaW1lKCkgKyBkYXkgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFycmFuZ2U6IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJvd3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPCBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKGNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zID0gW2l0ZW1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByb3dzLnB1c2goY29sdW1ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd3M7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRha2U6IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb24ubGVuZ3RoID4gY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IFtdLmNvbmNhdChjb2xsZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoY291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmV2ZXJzZTogZnVuY3Rpb24gKGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoY29sbGVjdGlvbikucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb3JtYXRUaW1lOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IodGltZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcih0IC8gODY0MDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHQgLyAzNjAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHQgLyA2MCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gdCAlIDYwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXlzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgXCJkXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMgKyBcImhcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzICsgXCJtXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlY29uZHMgKyBcInNcIjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlnZXN0TWVzc2FnZTogYXN5bmMgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1zZ1VpbnQ4ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKG1lc3NhZ2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuY29kZSBhcyAodXRmLTgpIFVpbnQ4QXJyYXlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS0yNTZcIiwgbXNnVWludDgpOyAgICAgICAgICAgLy8gaGFzaCB0aGUgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyKSk7ICAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydCBidWZmZXIgdG8gYnl0ZSBhcnJheVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaEhleCA9IGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpLmpvaW4oXCJcIik7IC8vIGNvbnZlcnQgYnl0ZXMgdG8gaGV4IHN0cmluZ1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBoYXNoSGV4O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXREaXN0YW5jZTogZnVuY3Rpb24gKGxhdDEsIGxvbjEsIGxhdDIsIGxvbjIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBSID0gNjM3MTsgLy8gUmFkaXVzIG9mIHRoZSBlYXJ0aCBpbiBrbVxyXG4gICAgICAgICAgICAgICAgdmFyIGRMYXQgPSB0aGlzLmRlZzJyYWQobGF0MiAtIGxhdDEpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRMb24gPSB0aGlzLmRlZzJyYWQobG9uMiAtIGxvbjEpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPVxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGguc2luKGRMYXQgLyAyKSAqIE1hdGguc2luKGRMYXQgLyAyKSArXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3ModGhpcy5kZWcycmFkKGxhdDEpKSAqIE1hdGguY29zKHRoaXMuZGVnMnJhZChsYXQyKSkgKlxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGguc2luKGRMb24gLyAyKSAqIE1hdGguc2luKGRMb24gLyAyKTtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcclxuICAgICAgICAgICAgICAgIHZhciBkID0gUiAqIGM7IC8vIERpc3RhbmNlIGluIGttXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZzJyYWQ6IGZ1bmN0aW9uIChkZWcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWcgKiAoTWF0aC5QSSAvIDE4MClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW5jb2RlR2VvaGFzaDogZnVuY3Rpb24gKGxhdGl0dWRlLCBsb25naXR1ZGUsIHByZWNpc2lvbiA9IDEyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBCSVRTID0gWzE2LCA4LCA0LCAyLCAxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IEJBU0UzMiA9IFwiMDEyMzQ1Njc4OWJjZGVmZ2hqa21ucHFyc3R1dnd4eXpcIjtcclxuICAgICAgICAgICAgICAgIHZhciBpc19ldmVuID0gMTtcclxuICAgICAgICAgICAgICAgIHZhciBsYXQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBsb24gPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBnZW9oYXNoID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBsYXRbMF0gPSAtOTAuMDsgbGF0WzFdID0gOTAuMDtcclxuICAgICAgICAgICAgICAgIGxvblswXSA9IC0xODAuMDsgbG9uWzFdID0gMTgwLjA7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGdlb2hhc2gubGVuZ3RoIDwgcHJlY2lzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2V2ZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkID0gKGxvblswXSArIGxvblsxXSkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvbmdpdHVkZSA+IG1pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2ggfD0gQklUU1tiaXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uWzBdID0gbWlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvblsxXSA9IG1pZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWQgPSAobGF0WzBdICsgbGF0WzFdKSAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF0aXR1ZGUgPiBtaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoIHw9IEJJVFNbYml0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdFswXSA9IG1pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRbMV0gPSBtaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpc19ldmVuID0gIWlzX2V2ZW47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiaXQgPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb2hhc2ggKz0gQkFTRTMyW2NoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYml0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2ggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2VvaGFzaDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVjb2RlR2VvaGFzaDogZnVuY3Rpb24gKGdlb2hhc2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IEJJVFMgPSBbMTYsIDgsIDQsIDIsIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgQkFTRTMyID0gXCIwMTIzNDU2Nzg5YmNkZWZnaGprbW5wcXJzdHV2d3h5elwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzX2V2ZW4gPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhdF9lcnIgPSA5MC4wO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvbl9lcnIgPSAxODAuMDtcclxuXHJcbiAgICAgICAgICAgICAgICBsYXRbMF0gPSAtOTAuMDtcclxuICAgICAgICAgICAgICAgIGxhdFsxXSA9IDkwLjA7XHJcbiAgICAgICAgICAgICAgICBsb25bMF0gPSAtMTgwLjA7XHJcbiAgICAgICAgICAgICAgICBsb25bMV0gPSAxODAuMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb2hhc2gubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGdlb2hhc2hbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gQkFTRTMyLmluZGV4T2YoYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hc2sgPSBCSVRTW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2V2ZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbl9lcnIgLz0gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2QgJiBtYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uWzBdID0gKGxvblswXSArIGxvblsxXSkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25bMV0gPSAobG9uWzBdICsgbG9uWzFdKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRfZXJyIC89IDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNkICYgbWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdFswXSA9IChsYXRbMF0gKyBsYXRbMV0pIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0WzFdID0gKGxhdFswXSArIGxhdFsxXSkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19ldmVuID0gIWlzX2V2ZW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxhdFsyXSA9IChsYXRbMF0gKyBsYXRbMV0pIC8gMjtcclxuICAgICAgICAgICAgICAgIGxvblsyXSA9IChsb25bMF0gKyBsb25bMV0pIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBsYXRbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb25bMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wbGVmdDogeyBsYXRpdHVkZTogbGF0WzBdLCBsb25naXR1ZGU6IGxvblswXSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcHJpZ2h0OiB7IGxhdGl0dWRlOiBsYXRbMV0sIGxvbmdpdHVkZTogbG9uWzBdIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tcmlnaHQ6IHsgbGF0aXR1ZGU6IGxhdFsxXSwgbG9uZ2l0dWRlOiBsb25bMV0gfSxcclxuICAgICAgICAgICAgICAgICAgICBib3R0b21sZWZ0OiB7IGxhdGl0dWRlOiBsYXRbMF0sIGxvbmdpdHVkZTogbG9uWzFdIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldE5laWdoYm9yczogZnVuY3Rpb24gKGdlb2hhc2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0R2VvaGFzaCA9IHRoaXMuY2FsY3VsYXRlQWRqYWNlbnQoZ2VvaGFzaCwgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0R2VvaGFzaCA9IHRoaXMuY2FsY3VsYXRlQWRqYWNlbnQoZ2VvaGFzaCwgJ2xlZnQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5jYWxjdWxhdGVBZGphY2VudChnZW9oYXNoLCAndG9wJyksXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiB0aGlzLmNhbGN1bGF0ZUFkamFjZW50KGdlb2hhc2gsICdib3R0b20nKSxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogcmlnaHRHZW9oYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRHZW9oYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcGxlZnQ6IHRoaXMuY2FsY3VsYXRlQWRqYWNlbnQobGVmdEdlb2hhc2gsICd0b3AnKSxcclxuICAgICAgICAgICAgICAgICAgICB0b3ByaWdodDogdGhpcy5jYWxjdWxhdGVBZGphY2VudChyaWdodEdlb2hhc2gsICd0b3AnKSxcclxuICAgICAgICAgICAgICAgICAgICBib3R0b21yaWdodDogdGhpcy5jYWxjdWxhdGVBZGphY2VudChyaWdodEdlb2hhc2gsICdib3R0b20nKSxcclxuICAgICAgICAgICAgICAgICAgICBib3R0b21sZWZ0OiB0aGlzLmNhbGN1bGF0ZUFkamFjZW50KGxlZnRHZW9oYXNoLCAnYm90dG9tJylcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGN1bGF0ZUFkamFjZW50OiBmdW5jdGlvbiAoc3JjSGFzaCwgZGlyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBCQVNFMzIgPSBcIjAxMjM0NTY3ODliY2RlZmdoamttbnBxcnN0dXZ3eHl6XCI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBORUlHSEJPUlMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHsgZXZlbjogXCJiYzAxZmc0NTIzODk2N2RldXZoanl6bnBrbXN0cXJ3eFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogeyBldmVuOiBcIjIzODk2N2RlYmMwMWZnNDVrbXN0cXJ3eHV2aGp5em5wXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHsgZXZlbjogXCJwMHIyMTQzNng4emI5ZGNmNWg3a2pubXFlc2d1dHd2eVwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiB7IGV2ZW46IFwiMTQzNjVoN2s5ZGNmZXNndWpubXFwMHIydHd2eXg4emJcIiB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgQk9SREVSUyA9IHtcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogeyBldmVuOiBcImJjZmd1dnl6XCIgfSxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB7IGV2ZW46IFwiMDE0NWhqbnBcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogeyBldmVuOiBcInByeHpcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogeyBldmVuOiBcIjAyOGJcIiB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIE5FSUdIQk9SUy5ib3R0b20ub2RkID0gTkVJR0hCT1JTLmxlZnQuZXZlbjtcclxuICAgICAgICAgICAgICAgIE5FSUdIQk9SUy50b3Aub2RkID0gTkVJR0hCT1JTLnJpZ2h0LmV2ZW47XHJcbiAgICAgICAgICAgICAgICBORUlHSEJPUlMubGVmdC5vZGQgPSBORUlHSEJPUlMuYm90dG9tLmV2ZW47XHJcbiAgICAgICAgICAgICAgICBORUlHSEJPUlMucmlnaHQub2RkID0gTkVJR0hCT1JTLnRvcC5ldmVuO1xyXG5cclxuICAgICAgICAgICAgICAgIEJPUkRFUlMuYm90dG9tLm9kZCA9IEJPUkRFUlMubGVmdC5ldmVuO1xyXG4gICAgICAgICAgICAgICAgQk9SREVSUy50b3Aub2RkID0gQk9SREVSUy5yaWdodC5ldmVuO1xyXG4gICAgICAgICAgICAgICAgQk9SREVSUy5sZWZ0Lm9kZCA9IEJPUkRFUlMuYm90dG9tLmV2ZW47XHJcbiAgICAgICAgICAgICAgICBCT1JERVJTLnJpZ2h0Lm9kZCA9IEJPUkRFUlMudG9wLmV2ZW47XHJcblxyXG4gICAgICAgICAgICAgICAgc3JjSGFzaCA9IHNyY0hhc2gudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdENociA9IHNyY0hhc2guY2hhckF0KHNyY0hhc2gubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IChzcmNIYXNoLmxlbmd0aCAlIDIpID8gJ29kZCcgOiAnZXZlbic7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFzZSA9IHNyY0hhc2guc3Vic3RyaW5nKDAsIHNyY0hhc2gubGVuZ3RoIC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEJPUkRFUlNbZGlyXVt0eXBlXS5pbmRleE9mKGxhc3RDaHIpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMuY2FsY3VsYXRlQWRqYWNlbnQoYmFzZSwgZGlyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZSArIEJBU0UzMltORUlHSEJPUlNbZGlyXVt0eXBlXS5pbmRleE9mKGxhc3RDaHIpXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJlcGFyZTogZnVuY3Rpb24gKHNlcXVlbmNlcywgc3RhdGUgPSBudWxsLCBzZWxlY3RlZFNlcXVlbmNlcyA9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLmNlaWwobWluKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNob29zZWRTZXF1ZW5jZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBmbGF0dGVuZWRTZXF1ZW5jZSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBzZXF1ZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wU3RhdGUgPSBzdGF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBudWxsICYmIHMubmFtZSBpbiB0aGlzLnN0YXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU3RhdGUgPSB0aGlzLnN0YXRlc1tzLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBTdGF0ZSAhPT0gbnVsbCAmJiBcInN0YXRlXCIgaW4gcyAmJiBzLnN0YXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAocy5zdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdCh0ZW1wU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2VkU2VxdWVuY2VzLnB1c2gocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNob29zZWRTZXF1ZW5jZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHNlcXVlbmNlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdGF0ZVwiIGluIHMgPT09IGZhbHNlIHx8IHMuc3RhdGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob29zZWRTZXF1ZW5jZXMucHVzaChzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaG9vc2VkU2VxdWVuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcXVldWUgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGNob29zZWRTZXF1ZW5jZXNbX3JhbmRvbSgwLCBjaG9vc2VkU2VxdWVuY2VzLmxlbmd0aCldLnNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZXNbcy5uYW1lXSA9IHN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqID0gcXVldWUuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudHlwZSA9PSBcIlNlcXVlbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInNlcXVlbmNlXCIgaW4gb2JqID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFjZWRTZXF1ZW5jZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGFibGVTZXF1ZW5jZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHNlbGVjdGVkU2VxdWVuY2VzID09PSBudWxsID8gdGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzIDogc2VsZWN0ZWRTZXF1ZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlcXVlbmNlU3RhY2sgPSB0aGlzLmdldFNlcXVlbmNlU3RhY2socywgb2JqKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZVN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9wcGVkU2VxdWVuY2UgPSBzZXF1ZW5jZVN0YWNrLnBvcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2VTdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wU3RhY2sgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBzZXF1ZW5jZVN0YWNrW3NlcXVlbmNlU3RhY2subGVuZ3RoIC0gMV0uc2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLnR5cGUgPT0gXCJTZXF1ZW5jZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwic2VxdWVuY2VcIiBpbiBvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRlbXBTZXF1ZW5jZSBvZiBzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBTZXF1ZW5jZSA9PT0gbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTdGFjay5wdXNoKG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gcG9wcGVkU2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGVtcFN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2godGVtcFN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwic2VxdWVuY2VcIiBpbiBwb3BwZWRTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNOZXcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0ZW1wU2VxdWVuY2Ugb2Ygc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wU2VxdWVuY2UgPT09IHBvcHBlZFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChwb3BwZWRTZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChzZXF1ZW5jZVN0YWNrLmxlbmd0aCA+IDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2VkU2VxdWVuY2VzLnB1c2goc3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2VkU2VxdWVuY2VzLnB1c2gocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInN0YXRlXCIgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVzW29iai5uYW1lXSA9IG9iai5zdGF0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0cmFjZWRTZXF1ZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm5hbWUgPT0gb2JqLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKHMuc3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3Qob2JqLnN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxhYmxlU2VxdWVuY2VzLnB1c2gocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdHJhY2VkU2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5uYW1lID09IG9iai5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RhdGVcIiBpbiBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm5hbWUgaW4gdGhpcy5zdGF0ZXMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChzLnN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdCh0aGlzLnN0YXRlc1tzLm5hbWVdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxhYmxlU2VxdWVuY2VzLnB1c2gocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYWJsZVNlcXVlbmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG8gb2YgY2FsbGFibGVTZXF1ZW5jZXNbX3JhbmRvbSgwLCBjYWxsYWJsZVNlcXVlbmNlcy5sZW5ndGgpXS5zZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUuc3BsaWNlKGluZGV4LCAwLCBvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGF0dGVuZWRTZXF1ZW5jZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5lZFNlcXVlbmNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRTZXF1ZW5jZVN0YWNrOiBmdW5jdGlvbiAoc291cmNlU2VxdWVuY2UsIHRhcmdldFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VxdWVuY2VTdGFjayA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlU3RhY2sucHVzaChzb3VyY2VTZXF1ZW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlU3RhY2tbc2VxdWVuY2VTdGFjay5sZW5ndGggLSAxXSAhPT0gdGFyZ2V0U2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzZXF1ZW5jZVwiIGluIHNvdXJjZVNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBzb3VyY2VTZXF1ZW5jZS5zZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcIlNlcXVlbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhY2sgPSB0aGlzLmdldFNlcXVlbmNlU3RhY2sobywgdGFyZ2V0U2VxdWVuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID4gMCAmJiBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PT0gdGFyZ2V0U2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBTdGFjayA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFN0YWNrLnB1c2goc3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChzdGFjay5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlU3RhY2sucHVzaCh0ZW1wU3RhY2sucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICh0ZW1wU3RhY2subGVuZ3RoID4gMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VxdWVuY2VTdGFjaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlU3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcXVlbmNlU3RhY2s7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFuaW1hdGU6IGFzeW5jIGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSAodGltZXN0YW1wIC0gdGhpcy5lbGFwc2VkKSAvIDEwMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxhcHNlZCA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VxdWVuY2VRdWV1ZS5sZW5ndGggPiAwICYmIEFycmF5LmlzQXJyYXkodGhpcy5zZXF1ZW5jZVF1ZXVlWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSArPSBkZWx0YVRpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZVRpbWUgKz0gZGVsdGFUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXF1ZW5jZVF1ZXVlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZhdGVUaW1lID49IGFjdGl2YXRlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FjaGVkRG9jdW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRRdWV1ZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2h1ZmZsZShhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IFtdLmNvbmNhdChhcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBhcnJheS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChuID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrID0gX3JhbmRvbSgwLCBuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhW25dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVtuXSA9IGFba107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFba10gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiBzaHVmZmxlKHRoaXMuY2FjaGVkRG9jdW1lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRRdWV1ZS5wdXNoKGRvY3VtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50UXVldWUuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFsayh0aGlzLnVzZXIudWlkLCBkb2N1bWVudC5maWx0ZXIoKHgpID0+IHggIT09IHRoaXMuY2hhcmFjdGVyLm5hbWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVUaW1lID0gYWN0aXZhdGVUaW1lID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZGxlVGltZSA+PSBibGlua1RocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5wdXNoKHsgc2VxdWVuY2VzOiB0aGlzLnByZXBhcmUodGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIklkbGVcIikpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVUaW1lID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNMb2NrZWQgJiYgdGhpcy5zZXF1ZW5jZVF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBBcnJheS5pc0FycmF5KHRoaXMuc2VxdWVuY2VRdWV1ZVswXSkgPyB0aGlzLnNlcXVlbmNlUXVldWVbMF0gOiB0aGlzLnNlcXVlbmNlUXVldWVbMF0uc2VxdWVuY2VzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZVswXS50eXBlID09IFwiQW5pbWF0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJmcmFtZXNcIiBpbiBzZXF1ZW5jZVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzZXF1ZW5jZVswXS5mcmFtZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJjaGFyYWN0ZXJcIiBpbiBzZXF1ZW5jZVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvblF1ZXVlLnB1c2goeyBjaGFyYWN0ZXI6IHNlcXVlbmNlWzBdLmNoYXJhY3RlciwgaW1hZ2VzOiBvYmogfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25RdWV1ZS5wdXNoKHsgY2hhcmFjdGVyOiB0aGlzLmNoYXJhY3RlciwgaW1hZ2VzOiBvYmogfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKG9iaikgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJpdGVyYXRpb25zXCIgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImltYWdlc1wiIGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IFwiY2hhcmFjdGVyXCIgaW4gc2VxdWVuY2VbMF0gPyBzZXF1ZW5jZVswXS5jaGFyYWN0ZXIgOiB0aGlzLmNoYXJhY3RlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iai5pdGVyYXRpb25zOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvblF1ZXVlLnB1c2goeyBjaGFyYWN0ZXI6IGMsIGltYWdlczogb2JqLmltYWdlcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcInNwcml0ZXNcIiBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBcImNoYXJhY3RlclwiIGluIHNlcXVlbmNlWzBdID8gc2VxdWVuY2VbMF0uY2hhcmFjdGVyIDogdGhpcy5jaGFyYWN0ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmouaXRlcmF0aW9uczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25RdWV1ZS5wdXNoKHsgY2hhcmFjdGVyOiBjLCBpbWFnZXM6IG9iai5zcHJpdGVzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXF1ZW5jZVswXS50eXBlID09IFwiTWVzc2FnZVwiICYmIHRoaXMubWVzc2FnZSA9PT0gbnVsbCAmJiB0aGlzLmFuaW1hdGlvblF1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImNoYXJhY3RlclwiIGluIHNlcXVlbmNlWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHsgdGltZTogMCwgZHVyYXRpb246IHNlcXVlbmNlWzBdLmR1cmF0aW9uLCB0eXBlOiB7IGVsYXBzZWQ6IC0xLCBzcGVlZDogc2VxdWVuY2VbMF0uc3BlZWQsIHJldmVyc2U6IGZhbHNlLCBidWZmZXI6IFwiXCIsIGNvdW50OiAwIH0sIGNoYXJhY3Rlcjogc2VxdWVuY2VbMF0uY2hhcmFjdGVyLCB0ZXh0OiBzZXF1ZW5jZVswXS50ZXh0IH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0geyB0aW1lOiAwLCBkdXJhdGlvbjogc2VxdWVuY2VbMF0uZHVyYXRpb24sIHR5cGU6IHsgZWxhcHNlZDogLTEsIHNwZWVkOiBzZXF1ZW5jZVswXS5zcGVlZCwgcmV2ZXJzZTogZmFsc2UsIGJ1ZmZlcjogXCJcIiwgY291bnQ6IDAgfSwgY2hhcmFjdGVyOiB7IG5hbWU6IHRoaXMuY2hhcmFjdGVyLm5hbWUsIGFjY2VudDogdGhpcy5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogdGhpcy5jaGFyYWN0ZXIuaW1hZ2UgfSwgdGV4dDogc2VxdWVuY2VbMF0udGV4dCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2Uuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyppZiAoIXRoaXMuaXNNdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5tZXNzYWdlLnRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYWkubWlsY2hjaGFuLmNvbS9hcGkvc3ludGhlc2l6ZT90ZXh0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhd2FpdCByZXNwb25zZS5ibG9iKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZSAhPT0gbnVsbCAmJiB0ZXh0ID09PSB0aGlzLm1lc3NhZ2UudGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1lc3NhZ2UgPT09IG51bGwgJiYgdGhpcy5hbmltYXRpb25RdWV1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGVkSW1hZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuY2FjaGVkU3ByaXRlcy5zb21lKHggPT4geC5zb3VyY2UgPT09IGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNlbGYuY2FjaGVkSW1hZ2VzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsdGVybmF0aXZlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZS50eXBlLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkICs9IGRlbHRhVGltZSAqIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkID49IDEuMCAvIHRoaXMubWVzc2FnZS50eXBlLnNwZWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMubWVzc2FnZS50eXBlLmNvdW50IC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IHRoaXMubWVzc2FnZS50ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gTWF0aC5mbG9vcih0aGlzLm1lc3NhZ2UudGV4dC5sZW5ndGggLyAyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCA8PSB3aWR0aCAmJiB0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlciA9IHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5zdWJzdHJpbmcoMCwgdGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQb3B1cCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGggPCB0aGlzLm1lc3NhZ2UudGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkICs9IGRlbHRhVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1BvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmVsYXBzZWQgPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BvcHVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZS50eXBlLmVsYXBzZWQgPj0gMS4wIC8gdGhpcy5tZXNzYWdlLnR5cGUuc3BlZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IE1hdGguZmxvb3IodGhpcy5tZXNzYWdlLnRleHQubGVuZ3RoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHRoaXMubWVzc2FnZS50ZXh0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZS50eXBlLmNvdW50ID49IHdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlciArPSB0aGlzLm1lc3NhZ2UudGV4dC5jaGFyQXQoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZS50eXBlLmNvdW50IDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50aW1lICs9IGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnRpbWUgPj0gdGhpcy5tZXNzYWdlLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLnR5cGUucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudGV4dC5sZW5ndGggPT09IHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSB0aGlzLm1lc3NhZ2UudGV4dC5zcGxpdChcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcmFjdGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dC5wdXNoKHsga2V5OiBpLCB2YWx1ZTogY2hhcmFjdGVyc1tpXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyQXJyYXkgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYW5kb21CdWZmZXIgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZXNzYWdlLnRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckFycmF5LmluZGV4T2YodGhpcy5tZXNzYWdlLnRleHQuY2hhckF0KGkpKSA9PSAtMSAmJiB0aGlzLm1lc3NhZ2UudGV4dC5jaGFyQXQoaSkgIT0gXCJcXG5cIiAmJiB0aGlzLm1lc3NhZ2UudGV4dC5jaGFyQXQoaSkubWF0Y2goL1xccy8pID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckFycmF5LnB1c2godGhpcy5tZXNzYWdlLnRleHQuY2hhckF0KGkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJBcnJheS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lc3NhZ2UudHlwZS5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudGV4dC5jaGFyQXQoaSkgPT0gXCJcXG5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tQnVmZmVyICs9IFwiXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5kb21CdWZmZXIgKz0gY2hhckFycmF5W35+X3JhbmRvbSgwLCBjaGFyQXJyYXkubGVuZ3RoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmRvbUJ1ZmZlci5sZW5ndGggPiB0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVycyA9ICh0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIgKyByYW5kb21CdWZmZXIuc3Vic3RyaW5nKHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGgsIHJhbmRvbUJ1ZmZlci5sZW5ndGgpKS5zcGxpdChcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0LnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dC5wdXNoKHsga2V5OiBpLCB2YWx1ZTogY2hhcmFjdGVyc1tpXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dC5sZW5ndGggIT09IHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gdGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLnNwbGl0KFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0LnB1c2goeyBrZXk6IGksIHZhbHVlOiBjaGFyYWN0ZXJzW2ldIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uUXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLmFuaW1hdGlvblF1ZXVlWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb25zID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhIG9mIHRoaXMuYW5pbWF0aW9uUXVldWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zLnB1c2goYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvY2tlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhIG9mIGFuaW1hdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcml0ZSBvZiBhLmltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ByaXRlLnNvdXJjZSBpbiB0aGlzLmNhY2hlZEltYWdlcyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuY3Jvc3NPcmlnaW4gPSBcIkFub255bW91c1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnNyYyA9IHNwcml0ZS5zb3VyY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkSW1hZ2VzW3Nwcml0ZS5zb3VyY2VdID0gaW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9ja2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5jaGFyYWN0ZXIubmFtZSA9PT0gdGhpcy5jaGFyYWN0ZXIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkU3ByaXRlcy5zcGxpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaXRlIG9mIHRoaXMucmVuZGVyKHRoaXMuJHJlZnMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQsIGFuaW1hdGlvbi5pbWFnZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkU3ByaXRlcy5wdXNoKHNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsdGVybmF0aXZlID0gdGhpcy5jaGFyYWN0ZXIuYWx0ZXJuYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHRlcm5hdGl2ZUNhY2hlZFNwcml0ZXMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcml0ZSBvZiB0aGlzLnJlbmRlcih0aGlzLiRyZWZzLmFsdGVybmF0aXZlLmdldENvbnRleHQoXCIyZFwiKSwgdGhpcy5hbHRlcm5hdGl2ZUNhbnZhc1dpZHRoLCB0aGlzLmFsdGVybmF0aXZlQ2FudmFzSGVpZ2h0LCBhbmltYXRpb24uaW1hZ2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsdGVybmF0aXZlQ2FjaGVkU3ByaXRlcy5wdXNoKHNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uUXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY3R4LCB3aWR0aCwgaGVpZ2h0LCBhbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwcml0ZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaXRlIG9mIGFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcHJpdGUuc291cmNlIGluIHRoaXMuY2FjaGVkSW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIm9wYWNpdHlcIiBpbiBzcHJpdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHNwcml0ZS5vcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmNhY2hlZEltYWdlc1tzcHJpdGUuc291cmNlXSwgc3ByaXRlLnggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgc3ByaXRlLnkgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgc3ByaXRlLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIHNwcml0ZS5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzcHJpdGVzLnB1c2goc3ByaXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3ByaXRlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXBkYXRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL2xldCBjb250YWluZXIgPSB0aGlzLiRyZWZzLmNvbnRhaW5lcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5zZXRUb3AgPSB0aGlzLiRyZWZzLmluZGljYXRvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zZXRCb3R0b20gPSB0aGlzLiRyZWZzLmJsYW5rLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIC8vdGhpcy4kcmVmcy50aWNrZXIuc3R5bGUud2lkdGggPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQgLmNvbHVtbnM+LmNvbHVtbiAuY29udHJvbDpudGgtbGFzdC1vZi10eXBlKDEpIC5sZXZlbDpudGgtbGFzdC1vZi10eXBlKDEpIGZvcm1cIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgLy9kb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjaGVhZGluZz4uY29sdW1ucz4uY29sdW1uPi5jb2x1bW5zOmZpcnN0LWNoaWxkPi5jb2x1bW4+LmNvbHVtbnM6bGFzdC1jaGlsZCAubGV2ZWw6Zmlyc3QtY2hpbGQgLmxldmVsLWl0ZW0gLmZpZWxkIC50aWNrZXJcIikuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgLyp0aGlzLiRyZWZzLnRpY2tlci5zdHlsZS53aWR0aCA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNpbnB1dCAuY29sdW1ucz4uY29sdW1uIC5jb250cm9sOm50aC1sYXN0LW9mLXR5cGUoMSkgLmxldmVsOm50aC1sYXN0LW9mLXR5cGUoMSkgZm9ybVwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIC8qZm9yIChjb25zdCBjbGlwIG9mIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvckFsbChcIiNpbnB1dD4uY29sdW1uczpsYXN0LW9mLXR5cGU+LmNvbHVtbj4uY29udHJvbCAuY2xpcFwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgY2xpcC5xdWVyeVNlbGVjdG9yQWxsKFwiOnNjb3BlIC50aWNrZXItd3JhcCAudGlja2VyIC5pdGVtXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggKz0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAod2lkdGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aWNrZXJXaWR0aCA9IE1hdGgubWluKHdpZHRoIC8gMiwgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiI2lucHV0Pi5jb2x1bW5zOmxhc3Qtb2YtdHlwZT4uY29sdW1uPi5jb250cm9sIC5sZXZlbFwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpcC5xdWVyeVNlbGVjdG9yKFwiOnNjb3BlIC50aWNrZXItd3JhcCAudGlja2VyXCIpLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0qL1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW91bnRlZDogYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaG9pY2UoY29sbGVjdGlvbiwgZnVuYykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VtID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9iYWJpbGl0eSA9IGZ1bmMoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW0gPD0gciAmJiByIDwgc3VtICsgcHJvYmFiaWxpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdW0gKz0gcHJvYmFiaWxpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbltpbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBjb25zdCBib3RTdG9yYWdlSXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2hhcmFjdGVyXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjcmVkZW50aWFsU3RvcmFnZUl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNyZWRlbnRpYWxcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzU3RvcmFnZUl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInN0YXRzXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudHNTdG9yYWdlSXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZnJhZ21lbnRzXCIpO1xyXG4gICAgICAgICAgICBsZXQgY3JlZGVudGlhbCA9IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBmcmFnbWVudHM7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSBbeyBwYXRoOiBcIi9hc3NldHMvbWlsY2guanNvblwiLCBwcm9iYWJpbGl0eTogMS4wIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBhbHRlcm5hdGl2ZXMgPSBbeyBwYXRoOiBcIi9hc3NldHMvbWVya3UuanNvblwiLCBwcm9iYWJpbGl0eTogMS4wIH1dO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJvdFN0b3JhZ2VJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdCA9IEpTT04ucGFyc2UoYm90U3RvcmFnZUl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm90ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNdXRlZCA9IGJvdC5tdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNoYXJhY3RlclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNyZWRlbnRpYWxTdG9yYWdlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsID0gSlNPTi5wYXJzZShjcmVkZW50aWFsU3RvcmFnZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3JlZGVudGlhbFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHN0YXRzU3RvcmFnZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VEYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIEpTT04ucGFyc2Uoc3RhdHNTdG9yYWdlSXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRheS5kYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRlLmdldFRpbWUoKSA+IGJhc2VEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRzLnB1c2goeyBkYXRlOiBkYXRlLCBzdGVwczogZGF5LnN0ZXBzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwic3RhdHNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmcmFnbWVudHNTdG9yYWdlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudHMgPSBKU09OLnBhcnNlKGZyYWdtZW50c1N0b3JhZ2VJdGVtKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImZyYWdtZW50c1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRyZWZzLmNvbnRhaW5lci5hZnRlcihzdGF0cy5kb21FbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5zZXRUb3AgPSB0aGlzLiRyZWZzLmluZGljYXRvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zZXRCb3R0b20gPSB0aGlzLiRyZWZzLmJsYW5rLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWFwID0gbmV3IE1pY3Jvc29mdC5NYXBzLk1hcCh0aGlzLiRyZWZzLm1hcCwge1xyXG4gICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBNaWNyb3NvZnQuTWFwcy5NYXBUeXBlSWQuY2FudmFzTGlnaHRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubWFwLnNldE9wdGlvbnMoe1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlSGlnaERwaTogd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2hvd0xvY2F0ZU1lQnV0dG9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNob3dNYXBUeXBlU2VsZWN0b3I6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2hvd1pvb21CdXR0b25zOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNob3dTY2FsZWJhcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRNYXBUeXBlczogW01pY3Jvc29mdC5NYXBzLk1hcFR5cGVJZC5ncmF5c2NhbGUsIE1pY3Jvc29mdC5NYXBzLk1hcFR5cGVJZC5jYW52YXNMaWdodCwgTWljcm9zb2Z0Lk1hcHMuTWFwVHlwZUlkLmNhbnZhc0RhcmtdXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXllciA9IG5ldyBNaWNyb3NvZnQuTWFwcy5MYXllcigpO1xyXG4gICAgICAgICAgICB0aGlzLmxheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLm1hcC5sYXllcnMuaW5zZXJ0KHRoaXMubGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgTWljcm9zb2Z0Lk1hcHMuRXZlbnRzLmFkZEhhbmRsZXIodGhpcy5tYXAsICd2aWV3Y2hhbmdlZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYudXNlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlMSA9IGF3YWl0IGZldGNoKGNob2ljZShjaGFyYWN0ZXJzLCAoeCkgPT4geC5wcm9iYWJpbGl0eSkucGF0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UxLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gYXdhaXQgcmVzcG9uc2UxLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXF1ZW5jZSA9IHRoaXMucHJlcGFyZShjaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIlN0YXJ0XCIpLCBudWxsLCBjaGFyYWN0ZXIuc2VxdWVuY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlMiA9IGF3YWl0IGZldGNoKGNob2ljZShhbHRlcm5hdGl2ZXMsICh4KSA9PiB4LnByb2JhYmlsaXR5KS5wYXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbHRlcm5hdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlMi5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHRlcm5hdGl2ZSA9IGF3YWl0IHJlc3BvbnNlMi5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlMi5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlMyA9IGF3YWl0IGZldGNoKFwiL2Fzc2V0cy9mcmFnbWVudHMuanNvblwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gMjQgKiA2MCAqIDYwICogMTAwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgYXdhaXQgcmVzcG9uc2UzLmpzb24oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2V0IG9mIGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZnJhZ21lbnRzLmZpbmQoeCA9PiBzZXQuc29tZSh5ID0+IHguc2V0LmluY2x1ZGVzKHkpKSAmJiB4LmNvdW50ID4gMCAmJiB4LnRpbWVzdGFtcCAqIDEwMDAgPiBiYXNlVGltZSAmJiB4LmNoZWNrc3VtID09PSBbLi4uU3RyaW5nKHgudGltZXN0YW1wKV0ucmVkdWNlKCh4LCB5KSA9PiB4ICsgeSwgMCkgKyBbLi4uU3RyaW5nKHguY291bnQpXS5yZWR1Y2UoKHgsIHkpID0+IHggKyB5LCAwKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaCh7IHNldDogc2V0LCBpbmRleDogMCwgY291bnQ6IDAsIHRpbWVzdGFtcDogdGltZXN0YW1wIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaCh7IHNldDogc2V0LCBpbmRleDogMCwgY291bnQ6IHJlc3VsdC5jb3VudCwgdGltZXN0YW1wOiByZXN1bHQudGltZXN0YW1wIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJzLnB1c2goZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UzLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNTaXplLndpZHRoID0gY2hhcmFjdGVyLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzU2l6ZS5oZWlnaHQgPSBjaGFyYWN0ZXIuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzU2l6ZS5kZXZpY2VXaWR0aCA9IGNoYXJhY3Rlci53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzU2l6ZS5kZXZpY2VIZWlnaHQgPSBjaGFyYWN0ZXIuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNTaXplLmFsdGVybmF0aXZlLndpZHRoID0gYWx0ZXJuYXRpdmUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNTaXplLmFsdGVybmF0aXZlLmhlaWdodCA9IGFsdGVybmF0aXZlLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhc1NpemUuYWx0ZXJuYXRpdmUuZGV2aWNlV2lkdGggPSBhbHRlcm5hdGl2ZS53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzU2l6ZS5hbHRlcm5hdGl2ZS5kZXZpY2VIZWlnaHQgPSBhbHRlcm5hdGl2ZS5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygc2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09IFwiQW5pbWF0aW9uXCIgJiYgXCJmcmFtZXNcIiBpbiBvYmogJiYgb2JqLmZyYW1lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VzID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmouZnJhbWVzWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcyA9IG9iai5mcmFtZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAob2JqLmZyYW1lc1swXSkgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJpdGVyYXRpb25zXCIgaW4gb2JqLmZyYW1lc1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJpbWFnZXNcIiBpbiBvYmouZnJhbWVzWzBdICYmIG9iai5mcmFtZXNbMF0uaW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcyA9IG9iai5mcmFtZXNbMF0uaW1hZ2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwic3ByaXRlc1wiIGluIG9iai5mcmFtZXNbMF0gJiYgb2JqLmZyYW1lc1swXS5zcHJpdGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlcyA9IG9iai5mcmFtZXNbMF0uc3ByaXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpdGUgb2YgaW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcHJpdGUuc291cmNlIGluIHRoaXMuY2FjaGVkSW1hZ2VzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5jcm9zc09yaWdpbiA9IFwiQW5vbnltb3VzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc3JjID0gc3ByaXRlLnNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRJbWFnZXNbc3ByaXRlLnNvdXJjZV0gPSBpbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZFNwcml0ZXMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcml0ZSBvZiB0aGlzLnJlbmRlcih0aGlzLiRyZWZzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIHRoaXMuY2FudmFzV2lkdGgsIHRoaXMuY2FudmFzSGVpZ2h0LCBpbWFnZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkU3ByaXRlcy5wdXNoKHNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlciA9IGNoYXJhY3RlcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlcltcImFsdGVybmF0aXZlXCJdID0gYWx0ZXJuYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVF1ZXVlLnB1c2goc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UxLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KHsgdGV4dDogZS5tZXNzYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hbmltYXRlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3JlZGVudGlhbCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlID0gXCJzaWduLWluXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzUmV2ZWFsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNyZWRlbnRpYWwucHJvdmlkZXJJZCA9PT0gZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aENyZWRlbnRpYWwoZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChjcmVkZW50aWFsLmlkVG9rZW4pKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3JlZGVudGlhbC5wcm92aWRlcklkID09PSBmaXJlYmFzZS5hdXRoLkZhY2Vib29rQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhDcmVkZW50aWFsKGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChjcmVkZW50aWFsLmFjY2Vzc1Rva2VuKSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNyZWRlbnRpYWwucHJvdmlkZXJJZCA9PT0gZmlyZWJhc2UuYXV0aC5Ud2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhDcmVkZW50aWFsKGZpcmViYXNlLmF1dGguVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsKGNyZWRlbnRpYWwuYWNjZXNzVG9rZW4sIGNyZWRlbnRpYWwuc2VjcmV0KSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZSA9IFwic2lnbi1pblwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZXZlYWxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qZmlyZWJhc2UuYXV0aCgpLnNpZ25JbkFub255bW91c2x5KCkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSh7IHRleHQ6IGVycm9yLm1lc3NhZ2UsIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTsqL1xyXG5cclxuICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIGlzIHNpZ25lZCBpbi5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3dEYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51c2VyID0gdXNlcjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiBzZWxmLnN0YXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXkuZGF0ZS5nZXRGdWxsWWVhcigpID09PSBub3dEYXRlLmdldEZ1bGxZZWFyKCkgJiYgZGF5LmRhdGUuZ2V0TW9udGgoKSA9PT0gbm93RGF0ZS5nZXRNb250aCgpICYmIGRheS5kYXRlLmdldERhdGUoKSA9PT0gbm93RGF0ZS5nZXREYXRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3RlcHMgPSBkYXkuc3RlcHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHVzZXIudWlkICsgXCIvZGljdGlvbmFyeS9jb3VudFwiKS5vbihcInZhbHVlXCIsIHNuYXBzaG90ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFycyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXJzID0gY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvdHJhY2tzXCIpLm9yZGVyQnlDaGlsZChcInRpbWVzdGFtcFwiKS5saW1pdFRvTGFzdCgxMCkub24oXCJ2YWx1ZVwiLCBzbmFwc2hvdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBXb3JkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB3b3Jkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRzW2tleV1bXCJpZFwiXSA9IGtleTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFdvcmRzLnB1c2god29yZHNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHRlbXBXb3Jkcy5zb3J0KCh4LCB5KSA9PiB5LnRpbWVzdGFtcCAtIHgudGltZXN0YW1wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZW1vdmVJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGYucmVjZW50V29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmVjZW50V29yZHNbaV0ubmFtZSA9PSB3b3JkLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUluZGV4ID0gaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZUluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNlbnRXb3Jkcy5zcGxpY2UocmVtb3ZlSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNlbnRXb3Jkcy5zcGxpY2UoaW5kZXgsIDAsIHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNlbGYucmVjZW50V29yZHMubGVuZ3RoIC0gMTsgaSA+PSBpbmRleDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNlbnRXb3Jkcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi51c2VyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBpcyBzaWduZWQgb3V0LlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi91c2Vycy9cIiArIHNlbGYudXNlci51aWQgKyBcIi9kaWN0aW9uYXJ5L2NvdW50XCIpLm9mZihcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi90cmFja3NcIikub2ZmKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudXNlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFycyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9kYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvd29yZHNcIikub3JkZXJCeUNoaWxkKFwidGltZXN0YW1wXCIpLmxpbWl0VG9MYXN0KDEwMCkub24oXCJ2YWx1ZVwiLCBzbmFwc2hvdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICBjb25zdCB3b3JkcyA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgLypsZXQgaXNVcGRhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLnJlY2VudEltYWdlcy5zb21lKHggPT4geC5pZCA9PT0ga2V5ICYmIHgudGltZXN0YW1wID09PSBpbWFnZXNba2V5XS50aW1lc3RhbXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBkYXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzVXBkYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVjZW50SW1hZ2VzLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlc1trZXldW1wiaWRcIl0gPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVjZW50SW1hZ2VzLnB1c2goaW1hZ2VzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5yZWNlbnRJbWFnZXMsIHNlbGYubWF4VGFncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pc0JsaW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgICAgICAgICAvL30pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVubW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudGlja0ludGVydmFsSUQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aWNrSW50ZXJ2YWxJRCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh2cm1Nb2RlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc2NlbmUucmVtb3ZlKHZybU1vZGVsLnNjZW5lKTtcclxuICAgICAgICAgICAgICAgIHZybU1vZGVsID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pLm1vdW50KFwiI2FwcFwiKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgYXBwLmluc2V0VG9wID0gYXBwLiRyZWZzLmluZGljYXRvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgYXBwLmluc2V0Qm90dG9tID0gYXBwLiRyZWZzLmJsYW5rLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICBhcHAuY2FudmFzU2l6ZS53aWR0aCA9IGFwcC5jaGFyYWN0ZXIud2lkdGg7XHJcbiAgICAgICAgYXBwLmNhbnZhc1NpemUuaGVpZ2h0ID0gYXBwLmNoYXJhY3Rlci5oZWlnaHQ7XHJcbiAgICAgICAgYXBwLmNhbnZhc1NpemUuZGV2aWNlV2lkdGggPSBhcHAuY2hhcmFjdGVyLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgYXBwLmNhbnZhc1NpemUuZGV2aWNlSGVpZ2h0ID0gYXBwLmNoYXJhY3Rlci5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICBhcHAuY2FudmFzU2l6ZS5hbHRlcm5hdGl2ZS53aWR0aCA9IGFwcC5jaGFyYWN0ZXIuYWx0ZXJuYXRpdmUud2lkdGg7XHJcbiAgICAgICAgYXBwLmNhbnZhc1NpemUuYWx0ZXJuYXRpdmUuaGVpZ2h0ID0gYXBwLmNoYXJhY3Rlci5hbHRlcm5hdGl2ZS5oZWlnaHQ7XHJcbiAgICAgICAgYXBwLmNhbnZhc1NpemUuYWx0ZXJuYXRpdmUuZGV2aWNlV2lkdGggPSBhcHAuY2hhcmFjdGVyLmFsdGVybmF0aXZlLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgYXBwLmNhbnZhc1NpemUuYWx0ZXJuYXRpdmUuZGV2aWNlSGVpZ2h0ID0gYXBwLmNoYXJhY3Rlci5hbHRlcm5hdGl2ZS5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICBhcHAuYW5pbWF0aW9uUXVldWUudW5zaGlmdCh7IGNoYXJhY3RlcjogYXBwLmNoYXJhY3RlciwgaW1hZ2VzOiBbXS5jb25jYXQoYXBwLmNhY2hlZFNwcml0ZXMpIH0pO1xyXG5cclxuICAgICAgICBpZiAoYXBwLmFsdGVybmF0aXZlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGFwcC5hbmltYXRpb25RdWV1ZS51bnNoaWZ0KHsgY2hhcmFjdGVyOiBhcHAuY2hhcmFjdGVyLmFsdGVybmF0aXZlLCBpbWFnZXM6IFtdLmNvbmNhdChhcHAuYWx0ZXJuYXRpdmVDYWNoZWRTcHJpdGVzKSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLypcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBPYmplY3Qua2V5cyhhcHAuY2FjaGVkSW1hZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGFwcC5jYWNoZWRJbWFnZXNba2V5XTtcclxuICAgICAgICB9KTsqL1xyXG5cclxuICAgICAgICAvL2FwcC4kcmVmcy50aWNrZXIuc3R5bGUud2lkdGggPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjaW5wdXQgLmNvbHVtbnM+LmNvbHVtbiAuY29udHJvbDpudGgtbGFzdC1vZi10eXBlKDEpIC5sZXZlbDpudGgtbGFzdC1vZi10eXBlKDEpIGZvcm1cIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAncHgnO1xyXG5cclxuICAgICAgICAvKmNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gd2luZG93Lm91dGVySGVpZ2h0O1xyXG4gICAgIFxyXG4gICAgICAgIGJsb29tUGFzcy5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIGZ4YWFTaGFkZXIudW5pZm9ybXMucmVzb2x1dGlvbi52YWx1ZS5zZXQoMSAvICh3aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSwgMSAvIChoZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykpO1xyXG4gICAgIFxyXG4gICAgICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xyXG4gICAgICAgIHJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgXHJcbiAgICAgICAgY2FtZXJhLmFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xyXG4gICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICAgXHJcbiAgICAgICAgY29tcG9zZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgY29tcG9zZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTsqL1xyXG5cclxuICAgICAgICAvKmFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNsaXAgb2YgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKFwiI2lucHV0Pi5jb2x1bW5zOmxhc3Qtb2YtdHlwZT4uY29sdW1uPi5jb250cm9sIC5jbGlwXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBjbGlwLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6c2NvcGUgLnRpY2tlci13cmFwIC50aWNrZXIgLml0ZW1cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCArPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHAudGlja2VyV2lkdGggPSBNYXRoLm1pbih3aWR0aCAvIDIsIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNpbnB1dD4uY29sdW1uczpsYXN0LW9mLXR5cGU+LmNvbHVtbj4uY29udHJvbCAubGV2ZWxcIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaXAucXVlcnlTZWxlY3RvcihcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlclwiKS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7Ki9cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudCA9PiB7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIC8vYXBwLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgLy9hY3RpdmF0ZVRpbWUgPSAwLjA7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICAvKmlmIChldmVudC5idXR0b24gPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKGJlc3RJbnRlcnNlY3QgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzcHJpbmdCb25lSW5kZXggPSAwO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGVCb25lID0geyBwb2ludDogeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0sIGRpcmVjdGlvbjogeyB4OiAwLCB5OiAwLCB9LCBkaXN0YW5jZTogMCwgaW5kZXg6IC0xIH07XHJcbiAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcmluZ0JvbmVHcm91cCBvZiB2cm1Nb2RlbC5zcHJpbmdCb25lTWFuYWdlci5zcHJpbmdCb25lR3JvdXBMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lIG9mIHNwcmluZ0JvbmVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHNwcmluZ0JvbmUuYm9uZS5nZXRXb3JsZFBvc2l0aW9uKG5ldyBUSFJFRS5WZWN0b3IzKCkpLmRpc3RhbmNlVG8oYmVzdEludGVyc2VjdC5wb2ludCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZUJvbmUuaW5kZXggPSBzcHJpbmdCb25lSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW5nQm9uZUluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwLmNoYXJhY3RlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5zZXF1ZW5jZVF1ZXVlLnB1c2goYXBwLnByZXBhcmUoYXBwLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiVG91Y2hTdGFydFwiKSwgYmVzdEludGVyc2VjdC5vYmplY3QubmFtZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSovXHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGV2ZW50ID0+IHtcclxuXHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgLyppZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChhcHAuY2hhcmFjdGVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhcHAuc2VxdWVuY2VRdWV1ZS5wdXNoKGFwcC5wcmVwYXJlKGFwcC5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIlRvdWNoRW5kXCIpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9Ki9cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGV2ZW50ID0+IHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgaWYgKHRhcENvdW50ID09IDApIHtcclxuICAgICAgICAgICAgdGFwQ291bnQrKztcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFwQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG5cclxuICAgICAgICAgICAgLypsZXQgbWluRGlzdGFuY2UgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICAgICAgbGV0IGJlc3RJbnRlcnNlY3QgPSBudWxsO1xyXG4gICAgXHJcbiAgICAgICAgICAgIG1vdXNlLnggPSAoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoKSAqIDIuMCAtIDEuMDtcclxuICAgICAgICAgICAgbW91c2UueSA9IC0oZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAvIHdpbmRvdy5vdXRlckhlaWdodCkgKiAyLjAgKyAxLjA7XHJcbiAgICBcclxuICAgICAgICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XHJcbiAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgaW50ZXJzZWN0IG9mIHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHNjZW5lLmNoaWxkcmVuLCB0cnVlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdC5kaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdEludGVyc2VjdCA9IGludGVyc2VjdDtcclxuICAgICAgICAgICAgICAgICAgICBtaW5EaXN0YW5jZSA9IGludGVyc2VjdC5kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmIChiZXN0SW50ZXJzZWN0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ByaW5nQm9uZUluZGV4ID0gMDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlQm9uZSA9IHsgcG9pbnQ6IHsgeDogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCwgeTogZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSB9LCBkaXJlY3Rpb246IHsgeDogMCwgeTogMCwgfSwgZGlzdGFuY2U6IDAsIGluZGV4OiAtMSB9O1xyXG4gICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lR3JvdXAgb2YgdnJtTW9kZWwuc3ByaW5nQm9uZU1hbmFnZXIuc3ByaW5nQm9uZUdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZSBvZiBzcHJpbmdCb25lR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBzcHJpbmdCb25lLmJvbmUuZ2V0V29ybGRQb3NpdGlvbihuZXcgVEhSRUUuVmVjdG9yMygpKS5kaXN0YW5jZVRvKGJlc3RJbnRlcnNlY3QucG9pbnQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGVCb25lLmluZGV4ID0gc3ByaW5nQm9uZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcmluZ0JvbmVJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGFwcC5jaGFyYWN0ZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHAuc2VxdWVuY2VRdWV1ZS5wdXNoKGFwcC5wcmVwYXJlKGFwcC5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIlRvdWNoU3RhcnRcIiksIGJlc3RJbnRlcnNlY3Qub2JqZWN0Lm5hbWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGxvb2tBbmltYXRpb24gPSB7IHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc291cmNlOiB7IHg6IGxvb2tBdFRhcmdldC5wb3NpdGlvbi54LCB5OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueSB9LCB0YXJnZXQ6IHsgeDogKGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggLSAwLjUgKiB3aW5kb3cuaW5uZXJXaWR0aCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiAxMC4wLCB5OiAoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIDAuNSAqIHdpbmRvdy5vdXRlckhlaWdodCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiAtMTAuMCB9IH07XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSwgY2FtZXJhKTtcclxuXHJcbiAgICAgICAgICAgIC8vaWYgKHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHNjZW5lLmNoaWxkcmVuLCB0cnVlKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vYXBwLnRhbGsoYXBwLnVzZXIudWlkKTtcclxuICAgICAgICAgICAgLy9hY3RpdmF0ZVRpbWUgPSAwLjA7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgdGFwQ291bnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAvL2xvb2tBbmltYXRpb24gPSB7IHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc291cmNlOiB7IHg6IGxvb2tBdFRhcmdldC5wb3NpdGlvbi54LCB5OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueSB9LCB0YXJnZXQ6IHsgeDogKGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggLSAwLjUgKiB3aW5kb3cuaW5uZXJXaWR0aCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiAxMC4wLCB5OiAoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIDAuNSAqIHdpbmRvdy5vdXRlckhlaWdodCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiAtMTAuMCB9IH07XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAvKmxvb2tBbmltYXRpb24gPSB7IHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc291cmNlOiB7IHg6IGxvb2tBdFRhcmdldC5wb3NpdGlvbi54LCB5OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueSB9LCB0YXJnZXQ6IHsgeDogKGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggLSAwLjUgKiB3aW5kb3cuaW5uZXJXaWR0aCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiAxMC4wLCB5OiAoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIDAuNSAqIHdpbmRvdy5vdXRlckhlaWdodCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiAtMTAuMCB9IH07XHJcbiAgICBcclxuICAgICAgICBpZiAoYXBwLmNoYXJhY3RlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhcHAuc2VxdWVuY2VRdWV1ZS5wdXNoKGFwcC5wcmVwYXJlKGFwcC5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIlRvdWNoRW5kXCIpKSk7XHJcbiAgICAgICAgfSovXHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBlID0+IHtcclxuICAgICAgICBpZiAoZS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICAgIGFwcC5pc0RhcmtNb2RlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcHAuaXNEYXJrTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9