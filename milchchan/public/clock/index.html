<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=852">
    <title>ミルヒちゃんクロック</title>
    <meta name="description" content="milchchan.com">
    <meta name="theme-color" content="#ffffff">
    <meta property="og:title" content="ミルヒちゃんクロック">
    <meta property="og:description" content="milchchan.com">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://milchchan.com/clock/">
    <meta property="og:image" content="https://milchchan.com/images/Milch.png">
    <meta property="twitter:card" content="summary">
    <meta property="twitter:site" content="@milchchan">
    <meta property="twitter:title" content="ミルヒちゃんクロック">
    <meta property="twitter:description" content="milchchan.com">
    <meta property="twitter:image" content="https://milchchan.com/images/Milch.png">
    <meta property="twitter:url" content="https://milchchan.com/clock/">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/touch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/touch-icon-ipad-retina.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Roboto:wght@700&display=swap"
        rel="stylesheet">
    <style type="text/css">
        :root {
            --background-color: #f5f5f5;
            --foreground-color: rgba(0, 0, 0, 0.75);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --foreground-color: rgba(255, 255, 255, 0.75);
            }
        }

        html {
            height: 100%;
            overflow: hidden;
            background: #ffffff;
            margin: 0;
            padding: 0;
        }

        body {
            color: var(--foreground-color);
            font-family: "Segoe UI", "Helvetica", "Arial", sans-serif;
            height: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        #container {
            position: absolute;
            overflow: hidden;
            left: 0px;
            top: 0px;
            right: 0px;
            bottom: 0px;
            margin: calc(16px + env(safe-area-inset-top, 0px)) calc(16px + env(safe-area-inset-right, 0px)) calc(16px + env(safe-area-inset-bottom, 0px)) calc(16px + env(safe-area-inset-left, 0px));
            padding: 0;
            background: transparent;
            transition: .5s;
        }

        #container>.frame {
            position: relative;
            margin: 0;
            border-radius: 16px;
            padding: 0;
            width: 100%;
            height: 100%;
            background: var(--background-color);
            overflow: hidden;
        }

        #wrap {
            position: absolute;
            left: 50%;
            top: 50%;
            margin-top: -179px;
            padding: 0;
            overflow: hidden;
            height: 338px;
            transform-origin: 50% 50%;
            transform: scale(1.0);
        }

        #footer {
            z-index: 2;
            position: absolute;
            bottom: 0;
            margin: 16px 0px 16px 0px;
            padding: 0px 0px 0px 0px;
            width: 100%;
            text-align: left;
        }

        div.content {
            float: left;
            position: relative;
        }

        div.content>div.frame {
            user-select: none;
            position: relative;
            left: 0px;
            top: 0px;
            margin: 0px 4px 0px 4px;
            border: 1px solid var(--foreground-color);
            background: #ffffff;
            overflow: hidden;
            transition: .5s;
        }

        div.digit {
            border: 0px;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
            transform-origin: 50% 50%;
            transform: scale(1.0);
            width: 120px;
            height: 320px;
        }

        div.loading {
            z-index: 1;
            position: absolute;
            left: 0px;
            top: 0px;
            border: 0px;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
            width: 120px;
            height: 320px;
            background: #ffffff;
            background: url('/images/Background.png') 50% 50% repeat, var(--background-color);
            background-size: 100px 100px;
            animation: loop 10s linear infinite;
            transition: .5s;
        }

        div.left {
            float: left;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
            border-width: 0px;
            text-align: left;
            vertical-align: baseline;
        }

        div.right {
            float: right;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
            border-width: 0px;
            text-align: left;
            vertical-align: baseline;
        }

        div.navigation {
            float: left;
            border: 0px;
            margin: 0px 8px 4px 8px;
            padding: 0px 0px 0px 0px;
            line-height: 0px;
        }

        div.legal {
            clear: left;
            float: left;
            border: 0px;
            margin: 0px 16px 0px 16px;
            padding: 0px 0px 0px 0px;
            line-height: 0px;
        }

        div.plugin {
            float: left;
            margin: 4px 16px 4px 0px;
            padding: 0px 0px 0px 0px;
            border-width: 0px;
            line-height: 0px;
        }

        span.button:first-child {
            display: inline-block;
            margin: 0px 8px 4px 8px;
            padding: 0px 0px 0px 0px;
            line-height: 0px;
            vertical-align: middle;
        }

        span.button:nth-child(n+2) {
            display: inline-block;
            margin: 4px 8px 4px 8px;
            padding: 0px 0px 0px 0px;
            line-height: 0px;
            vertical-align: middle;
        }

        span.control {
            display: inline-block;
            margin: 4px 8px 4px 8px;
            padding: 0px 0px 0px 0px;
            line-height: 0px;
            vertical-align: middle;
        }

        span.caption {
            user-select: none;
            float: right;
            color: var(--foreground-color);
            margin: 4px 8px 4px 4px;
            font-family: "Roboto Condensed", "Segoe UI", "Helvetica", "Arial", sans-serif;
            font-size: 8px;
            font-weight: bold;
            line-height: 8px;
            text-transform: uppercase;
            transition: .5s;
        }

        img.digit {
            transform-origin: 0% 0%;
            transform: translate(0px, 0px);
        }

        img.caption {
            float: right;
            margin: 4px 8px 4px 4px;
        }

        img.control {
            border: 1px solid var(--foreground-color);
            margin: 0px 0px 0px 0px;
            padding: 1px 1px 1px 1px;
            vertical-align: top;
            opacity: 0.5;
            transition: .5s;
        }

        img {
            border: 0px;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
            vertical-align: baseline;
        }

        a:link {
            color: var(--foreground-color);
            font-weight: bold;
            text-decoration: none;
            transition: .5s;
        }

        a:visited {
            color: var(--foreground-color);
            font-weight: bold;
            text-decoration: none;
            transition: .5s;
        }

        a:hover {
            color: var(--foreground-color);
            font-weight: bold;
            text-decoration: underline;
            transition: .5s;
        }

        a:active {
            color: var(--foreground-color);
            font-weight: bold;
            text-decoration: underline;
            transition: .5s;
        }        

        @keyframes loop {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: -100px 0px;
            }
        }

        @media screen and (-webkit-min-device-pixel-ratio:2),
        (min-resolution: 2dppx) {
            div.loading {
                background: url('/images/Background@2x.png') 50% 50% repeat, var(--background-color);
                background-size: 100px 100px;
            }
        }

        @media screen and (-webkit-min-device-pixel-ratio:3),
        (min-resolution: 3dppx) {
            div.loading {
                background: url('/images/Background@3x.png') 50% 50% repeat, var(--background-color);
                background-size: 100px 100px;
            }
        }
    </style>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-313424-1"></script>
    
</head>

<body>
    <div id="container">
        <div class="frame">
            <div id="wrap"></div>
        </div>
    </div>
    <script type="text/javascript">
        const digits = [[3240, 0, 360, 640], [2880, 0, 360, 640], [2520, 0, 360, 640], [2160, 0, 360, 640], [1800, 0, 360, 640], [1440, 0, 360, 640], [1080, 0, 360, 640], [720, 0, 360, 640], [360, 0, 360, 640], [0, 0, 360, 640]];
        const maxWidth = 120.0;
        const maxHeight = 320.0;
        const clockQueue = new Array();
        const idQueue = new Array();
        const xArray = new Array(10);
        const yArray = new Array(10);
        const widthArray = new Array(10);
        const heightArray = new Array(10);
        let oldSecond1 = -1, second1X = 0.0, second1Y = 0.0, second1Width = maxWidth, second1Height = maxHeight, second1Step = 0.0;
        let oldSecond2 = -1, second2X = 0.0, second2Y = 0.0, second2Width = maxWidth, second2Height = maxHeight, second2Step = 0.0;
        let oldMinute1 = -1, minute1X = 0.0, minute1Y = 0.0, minute1Width = maxWidth, minute1Height = maxHeight, minute1Step = 0.0;
        let oldMinute2 = -1, minute2X = 0.0, minute2Y = 0.0, minute2Width = maxWidth, minute2Height = maxHeight, minute2Step = 0.0;
        let oldHour1 = -1, hour1X = 0.0, hour1Y = 0.0, hour1Width = maxWidth, hour1Height = maxHeight, hour1Step = 0.0;
        let oldHour2 = -1, hour2X = 0.0, hour2Y = 0.0, hour2Width = maxWidth, hour2Height = maxHeight, hour2Step = 0.0;
        let oldDay1 = -1, day1X = 0.0, day1Y = 0.0, day1Width = maxWidth, day1Height = maxHeight, day1Step = 0.0;
        let oldDay2 = -1, day2X = 0.0, day2Y = 0.0, day2Width = maxWidth, day2Height = maxHeight, day2Step = 0.0;
        let oldMonth1 = -1, month1X = 0.0, month1Y = 0.0, month1Width = maxWidth, month1Height = maxHeight, month1Step = 0.0;
        let oldMonth2 = -1, month2X = 0.0, month2Y = 0.0, month2Width = maxWidth, month2Height = maxHeight, month2Step = 0.0;
        let oldYear1 = -1, year1X = 0.0, year1Y = 0.0, year1Width = maxWidth, year1Height = maxHeight, year1Step = 0.0;
        let oldYear2 = -1, year2X = 0.0, year2Y = 0.0, year2Width = maxWidth, year2Height = maxHeight, year2Step = 0.0;
        let oldYear3 = -1, year3X = 0.0, year3Y = 0.0, year3Width = maxWidth, year3Height = maxHeight, year3Step = 0.0;
        let oldYear4 = -1, year4X = 0.0, year4Y = 0.0, year4Width = maxWidth, year4Height = maxHeight, year4Step = 0.0;
        let lastDate = new Date();
        let isPaused = false;
        let clocks = [{ source: "images/Digits1.png", digits: digits }, { source: "images/Digits2.png", digits: digits }];
        
        function shuffle(array) {
            function _random(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);

                return Math.floor(Math.random() * (max - min)) + min;
            }

            let a = [].concat(array);
            let n = array.length;

            while (n > 1) {
                const k = _random(0, n);

                n--;

                const temp = a[n];

                a[n] = a[k];
                a[k] = temp;
            }

            return a;
        }

        function renderDigit(element, i, x, y, width, height, step) {
            let scale1 = Math.max(maxWidth / width, maxHeight / height);
            let scale2 = Math.max(maxWidth / widthArray[i], maxHeight / heightArray[i]);

            if (scale1 > 1) {
                scale1 = 1.0;
            }

            if (scale2 > 1) {
                scale2 = 1.0;
            }

            if (widthArray[i] > maxWidth && heightArray[i] > maxHeight) {
                element.style.transform = "translate3d(" + Math.round(-(x + (xArray[i] + (widthArray[i] - maxWidth) / 2.0 - x) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, " + Math.round(-(y + (yArray[i] + (heightArray[i] - maxHeight) / 2.0 - y) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, 0)";
            } else if (widthArray[i] > maxWidth) {
                element.style.transform = "translate3d(" + Math.round(-(x + (xArray[i] + (widthArray[i] - maxWidth) / 2.0 - x) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, " + Math.round(-(y + (yArray[i] - y) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, 0)";
            } else if (heightArray[i] > maxHeight) {
                element.style.transform = "translate3d(" + Math.round(-(x + (xArray[i] - x) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, " + Math.round(-(y + (yArray[i] + (heightArray[i] - maxHeight) / 2.0 - y) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, 0)";
            } else {
                element.style.transform = "translate3d(" + Math.round(-(x + (xArray[i] - x) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, " + Math.round(-(y + (yArray[i] - y) * Math.sin(step / 2.0 * Math.PI))).toString() + "px, 0)";
            }

            element.parentElement.style.transform = "scale(" + (scale1 + (scale2 - scale1) * Math.sin(step / 2.0 * Math.PI)).toString() + ")";
        }

        function animate() {
            requestAnimationFrame(animate);

            let date = new Date();
            const frameRate = 1000 / (date - lastDate);
            let newSecond1 = date.getSeconds() % 10;
            let newSecond2 = Math.floor(date.getSeconds() / 10) % 10;
            let newMinute1 = date.getMinutes() % 10;
            let newMinute2 = Math.floor(date.getMinutes() / 10) % 10;
            let newHour1 = date.getHours() % 10;
            let newHour2 = Math.floor(date.getHours() / 10) % 10;
            let newDay1 = date.getDate() % 10;
            let newDay2 = Math.floor(date.getDate() / 10) % 10;
            let newMonth1 = (date.getMonth() + 1) % 10;
            let newMonth2 = Math.floor((date.getMonth() + 1) / 10) % 10;
            let newYear1 = date.getFullYear() % 10;
            let newYear2 = Math.floor(date.getFullYear() / 10) % 10;
            let newYear3 = Math.floor(date.getFullYear() / 100) % 10;
            let newYear4 = Math.floor(date.getFullYear() / 1000) % 10;
            let i = 0;

            for (const element of document.body.querySelectorAll("div.digit > img.digit")) {
                if (element.parentElement.style.visibility === "visible") {
                    if (i === 0 && newYear4 !== oldYear4) {
                        year4Step += 1 / (frameRate / 2);

                        if (year4Step >= 1) {
                            if (widthArray[newYear4] > maxWidth) {
                                year4X = xArray[newYear4] + (widthArray[newYear4] - maxWidth) / 2.0;
                            } else {
                                year4X = xArray[newYear4];
                            }

                            if (heightArray[newYear4] > maxHeight) {
                                year4Y = yArray[newYear4] + (heightArray[newYear4] - maxHeight) / 2.0;
                            } else {
                                year4Y = yArray[newYear4];
                            }

                            year4Width = widthArray[newYear4];
                            year4Height = heightArray[newYear4];
                            year4Step = 0.0;
                            oldYear4 = newYear4;
                        }

                        renderDigit(element, newYear4, year4X, year4Y, year4Width, year4Height, year4Step);
                    } else if (i === 1 && newYear3 !== oldYear3) {
                        year3Step += 1 / (frameRate / 2);

                        if (year3Step >= 1) {
                            if (widthArray[newYear3] > maxWidth) {
                                year3X = xArray[newYear3] + (widthArray[newYear3] - maxWidth) / 2.0;
                            } else {
                                year3X = xArray[newYear3];
                            }

                            if (heightArray[newYear3] > maxHeight) {
                                year3Y = yArray[newYear3] + (heightArray[newYear3] - maxHeight) / 2.0;
                            } else {
                                year3Y = yArray[newYear3];
                            }

                            year3Width = widthArray[newYear3];
                            year3Height = heightArray[newYear3];
                            year3Step = 0.0;
                            oldYear3 = newYear3;
                        }

                        renderDigit(element, newYear3, year3X, year3Y, year3Width, year3Height, year3Step);
                    } else if (i === 2 && newYear2 !== oldYear2) {
                        year2Step += 1 / (frameRate / 2);

                        if (year2Step >= 1) {
                            if (widthArray[newYear2] > maxWidth) {
                                year2X = xArray[newYear2] + (widthArray[newYear2] - maxWidth) / 2.0;
                            } else {
                                year2X = xArray[newYear2];
                            }

                            if (heightArray[newYear2] > maxHeight) {
                                year2Y = yArray[newYear2] + (heightArray[newYear2] - maxHeight) / 2.0;
                            } else {
                                year2Y = yArray[newYear2];
                            }

                            year2Width = widthArray[newYear2];
                            year2Height = heightArray[newYear2];
                            year2Step = 0.0;
                            oldYear2 = newYear2;
                        }

                        renderDigit(element, newYear2, year2X, year2Y, year2Width, year2Height, year2Step);
                    } else if (i === 3 && newYear1 !== oldYear1) {
                        year1Step += 1 / (frameRate / 2);

                        if (year1Step >= 1) {
                            if (widthArray[newYear1] > maxWidth) {
                                year1X = xArray[newYear1] + (widthArray[newYear1] - maxWidth) / 2.0;
                            } else {
                                year1X = xArray[newYear1];
                            }

                            if (heightArray[newYear1] > maxHeight) {
                                year1Y = yArray[newYear1] + (heightArray[newYear1] - maxHeight) / 2.0;
                            } else {
                                year1Y = yArray[newYear1];
                            }

                            year1Width = widthArray[newYear1];
                            year1Height = heightArray[newYear1];
                            year1Step = 0.0;
                            oldYear1 = newYear1;
                        }

                        renderDigit(element, newYear1, year1X, year1Y, year1Width, year1Height, year1Step);
                    } else if (i === 4 && newMonth2 !== oldMonth2) {
                        month2Step += 1 / (frameRate / 2);

                        if (month2Step >= 1) {
                            if (widthArray[newMonth2] > maxWidth) {
                                month2X = xArray[newMonth2] + (widthArray[newMonth2] - maxWidth) / 2.0;
                            } else {
                                month2X = xArray[newMonth2];
                            }

                            if (heightArray[newMonth2] > maxHeight) {
                                month2Y = yArray[newMonth2] + (heightArray[newMonth2] - maxHeight) / 2.0;
                            } else {
                                month2Y = yArray[newMonth2];
                            }

                            month2Width = widthArray[newMonth2];
                            month2Height = heightArray[newMonth2];
                            month2Step = 0.0;
                            oldMonth2 = newMonth2;
                        }

                        renderDigit(element, newMonth2, month2X, month2Y, month2Width, month2Height, month2Step);
                    } else if (i === 5 && newMonth1 !== oldMonth1) {
                        month1Step += 1 / (frameRate / 2);

                        if (month1Step >= 1) {
                            if (widthArray[newMonth1] > maxWidth) {
                                month1X = xArray[newMonth1] + (widthArray[newMonth1] - maxWidth) / 2.0;
                            } else {
                                month1X = xArray[newMonth1];
                            }

                            if (heightArray[newMonth1] > maxHeight) {
                                month1Y = yArray[newMonth1] + (heightArray[newMonth1] - maxHeight) / 2.0;
                            } else {
                                month1Y = yArray[newMonth1];
                            }

                            month1Width = widthArray[newMonth1];
                            month1Height = heightArray[newMonth1];
                            month1Step = 0.0;
                            oldMonth1 = newMonth1;
                        }

                        renderDigit(element, newMonth1, month1X, month1Y, month1Width, month1Height, month1Step);
                    } else if (i === 6 && newDay2 !== oldDay2) {
                        day2Step += 1 / (frameRate / 2);

                        if (day2Step >= 1) {
                            if (widthArray[newDay2] > maxWidth) {
                                day2X = xArray[newDay2] + (widthArray[newDay2] - maxWidth) / 2.0;
                            } else {
                                day2X = xArray[newDay2];
                            }

                            if (heightArray[newDay2] > maxHeight) {
                                day2Y = yArray[newDay2] + (heightArray[newDay2] - maxHeight) / 2.0;
                            } else {
                                day2Y = yArray[newDay2];
                            }

                            day2Width = widthArray[newDay2];
                            day2Height = heightArray[newDay2];
                            day2Step = 0.0;
                            oldDay2 = newDay2;
                        }

                        renderDigit(element, newDay2, day2X, day2Y, day2Width, day2Height, day2Step);
                    } else if (i === 7 && newDay1 !== oldDay1) {
                        day1Step += 1 / (frameRate / 2);

                        if (day1Step >= 1) {
                            if (widthArray[newDay1] > maxWidth) {
                                day1X = xArray[newDay1] + (widthArray[newDay1] - maxWidth) / 2.0;
                            } else {
                                day1X = xArray[newDay1];
                            }

                            if (heightArray[newDay1] > maxHeight) {
                                day1Y = yArray[newDay1] + (heightArray[newDay1] - maxHeight) / 2.0;
                            } else {
                                day1Y = yArray[newDay1];
                            }

                            day1Width = widthArray[newDay1];
                            day1Height = heightArray[newDay1];
                            day1Step = 0.0;
                            oldDay1 = newDay1;
                        }

                        renderDigit(element, newDay1, day1X, day1Y, day1Width, day1Height, day1Step);
                    } else if (i === 8 && newHour2 !== oldHour2) {
                        hour2Step += 1 / (frameRate / 2);

                        if (hour2Step >= 1) {
                            if (widthArray[newHour2] > maxWidth) {
                                hour2X = xArray[newHour2] + (widthArray[newHour2] - maxWidth) / 2.0;
                            } else {
                                hour2X = xArray[newHour2];
                            }

                            if (heightArray[newHour2] > maxHeight) {
                                hour2Y = yArray[newHour2] + (heightArray[newHour2] - maxHeight) / 2.0;
                            } else {
                                hour2Y = yArray[newHour2];
                            }

                            hour2Width = widthArray[newHour2];
                            hour2Height = heightArray[newHour2];
                            hour2Step = 0.0;
                            oldHour2 = newHour2;
                        }

                        renderDigit(element, newHour2, hour2X, hour2Y, hour2Width, hour2Height, hour2Step);
                    } else if (i === 9 && newHour1 !== oldHour1) {
                        hour1Step += 1 / (frameRate / 2);

                        if (hour1Step >= 1) {
                            if (widthArray[newHour1] > maxWidth) {
                                hour1X = xArray[newHour1] + (widthArray[newHour1] - maxWidth) / 2.0;
                            } else {
                                hour1X = xArray[newHour1];
                            }

                            if (heightArray[newHour1] > maxHeight) {
                                hour1Y = yArray[newHour1] + (heightArray[newHour1] - maxHeight) / 2.0;
                            } else {
                                hour1Y = yArray[newHour1];
                            }

                            hour1Width = widthArray[newHour1];
                            hour1Height = heightArray[newHour1];
                            hour1Step = 0.0;
                            oldHour1 = newHour1;
                        }

                        renderDigit(element, newHour1, hour1X, hour1Y, hour1Width, hour1Height, hour1Step);
                    } else if (i === 10 && newMinute2 !== oldMinute2) {
                        minute2Step += 1 / (frameRate / 2);

                        if (minute2Step >= 1) {
                            if (widthArray[newMinute2] > maxWidth) {
                                minute2X = xArray[newMinute2] + (widthArray[newMinute2] - maxWidth) / 2.0;
                            } else {
                                minute2X = xArray[newMinute2];
                            }

                            if (heightArray[newMinute2] > maxHeight) {
                                minute2Y = yArray[newMinute2] + (heightArray[newMinute2] - maxHeight) / 2.0;
                            } else {
                                minute2Y = yArray[newMinute2];
                            }

                            minute2Width = widthArray[newMinute2];
                            minute2Height = heightArray[newMinute2];
                            minute2Step = 0.0;
                            oldMinute2 = newMinute2;
                        }

                        renderDigit(element, newMinute2, minute2X, minute2Y, minute2Width, minute2Height, minute2Step);
                    } else if (i === 11 && newMinute1 !== oldMinute1) {
                        minute1Step += 1 / (frameRate / 2);

                        if (minute1Step >= 1) {
                            if (widthArray[newMinute1] > maxWidth) {
                                minute1X = xArray[newMinute1] + (widthArray[newMinute1] - maxWidth) / 2.0;
                            } else {
                                minute1X = xArray[newMinute1];
                            }

                            if (heightArray[newMinute1] > maxHeight) {
                                minute1Y = yArray[newMinute1] + (heightArray[newMinute1] - maxHeight) / 2.0;
                            } else {
                                minute1Y = yArray[newMinute1];
                            }

                            minute1Width = widthArray[newMinute1];
                            minute1Height = heightArray[newMinute1];
                            minute1Step = 0.0;
                            oldMinute1 = newMinute1;
                        }

                        renderDigit(element, newMinute1, minute1X, minute1Y, minute1Width, minute1Height, minute1Step);
                    } else if (i === 12 && newSecond2 !== oldSecond2) {
                        second2Step += 1 / (frameRate / 2);

                        if (second2Step >= 1) {
                            if (widthArray[newSecond2] > maxWidth) {
                                second2X = xArray[newSecond2] + (widthArray[newSecond2] - maxWidth) / 2.0;
                            } else {
                                second2X = xArray[newSecond2];
                            }

                            if (heightArray[newSecond2] > maxHeight) {
                                second2Y = yArray[newSecond2] + (heightArray[newSecond2] - maxHeight) / 2.0;
                            } else {
                                second2Y = yArray[newSecond2];
                            }

                            second2Width = widthArray[newSecond2];
                            second2Height = heightArray[newSecond2];
                            second2Step = 0.0;
                            oldSecond2 = newSecond2;
                        }

                        renderDigit(element, newSecond2, second2X, second2Y, second2Width, second2Height, second2Step);
                    } else if (i === 13 && newSecond1 !== oldSecond1) {
                        second1Step += 1 / (frameRate / 2);

                        if (second1Step >= 1) {
                            if (widthArray[newSecond1] > maxWidth) {
                                second1X = xArray[newSecond1] + (widthArray[newSecond1] - maxWidth) / 2.0;
                            } else {
                                second1X = xArray[newSecond1];
                            }

                            if (heightArray[newSecond1] > maxHeight) {
                                second1Y = yArray[newSecond1] + (heightArray[newSecond1] - maxHeight) / 2.0;
                            } else {
                                second1Y = yArray[newSecond1];
                            }

                            second1Width = widthArray[newSecond1];
                            second1Height = heightArray[newSecond1];
                            second1Step = 0.0;
                            oldSecond1 = newSecond1;
                        }

                        renderDigit(element, newSecond1, second1X, second1Y, second1Width, second1Height, second1Step);
                    }
                }

                i++;
            }

            lastDate = date;
        }

        window.addEventListener("load", async event => {
            const width = 130 * 14;
            const container = document.body.querySelector("#container");
            const wrap = document.body.querySelector("#wrap");

            function random(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function attach(clock, visible, width, height, alt, length) {
                for (let i = 0; i < length; i++) {
                    const contentElement = document.createElement("div");
                    const frameElement = document.createElement("div");
                    const digitElement = document.createElement("div");
                    const image = new Image();

                    contentElement.className = "content";

                    if (visible) {
                        contentElement.style.opacity = "1";
                    } else {
                        contentElement.style.opacity = "0";
                    }

                    frameElement.className = "frame";
                    frameElement.style.opacity = "0";

                    digitElement.className = "digit";
                    digitElement.style.visibility = "hidden";

                    image.onload = () => {
                        digitElement.style.visibility = "visible";
                        image.parentElement.parentElement.animate([
                            {
                                opacity: "1"
                            }
                        ], {
                            fill: "forwards",
                            duration: 500,
                            iterations: 1,
                            easing: "ease-out"
                        });
                    };
                    image.className = "digit";
                    image.src = clock.source;
                    image.alt = "Digit";

                    digitElement.appendChild(image);
                    frameElement.appendChild(digitElement);
                    contentElement.appendChild(frameElement);

                    if (i === length - 1) {
                        const captionElement = document.createElement("span");

                        captionElement.className = "caption";
                        captionElement.innerHTML = alt;
                        captionElement.style.opacity = 0

                        contentElement.appendChild(captionElement);
                        captionElement.animate([
                            {
                                opacity: "1"
                            }
                        ], {
                            fill: "forwards",
                            duration: 500,
                            iterations: 1,
                            easing: "ease-out"
                        });
                    }

                    wrap.appendChild(contentElement);
                }
            }

            try {
                const response = await fetch(encodeURI("clocks.json"), {
                    mode: "cors",
                    method: "GET",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    }
                });

                if (response.ok) {
                    clocks = await response.json();
                }
                else {
                    throw new Error(response.statusText);
                }
            }
            catch (e) {
                console.error(e.message);

                return;
            }

            for (const clock of shuffle(clocks)) {
                clockQueue.push(clock);
            }

            const clock = clockQueue.shift();

            for (let i = 0; i < clock.digits.length; i++) {
                xArray[i] = digits[i][0];
                yArray[i] = digits[i][1];
                widthArray[i] = digits[i][2];
                heightArray[i] = digits[i][3];
            }

            animate();

            if (container.clientWidth >= 130 * 14) {
                wrap.style.marginLeft = (-width / 2).toString() + "px";
                wrap.style.width = width + "px";
                wrap.style.transformOrigin = (11 / 14 * 100).toString() + "% 50%";

                attach(clock, true, 23, 8, 'Year', 4);
                attach(clock, true, 32, 8, 'Month', 2);
                attach(clock, true, 17, 8, 'Day', 2);
            } else if (container.clientWidth >= 130 * 10) {
                wrap.style.marginLeft = ((-width - 130 * 4) / 2).toString() + "px";
                wrap.style.width = width + "px";
                wrap.style.transformOrigin = (11 / 14 * 100).toString() + "% 50%";

                attach(clock, false, 23, 8, 'Year', 4);
                attach(clock, true, 32, 8, 'Month', 2);
                attach(clock, true, 17, 8, 'Day', 2);
            } else {
                wrap.style.marginLeft = ((-width - 130 * 8) / 2).toString() + "px";
                wrap.style.width = width + "px";
                wrap.style.transformOrigin = (11 / 14 * 100).toString() + "% 50%";

                if (container.clientWidth < 130 * 6) {
                    wrap.style.transform = `scale(${(container.clientWidth / (130 * 6)).toString()})`;
                }

                attach(clock, false, 23, 8, 'Year', 4);
                attach(clock, false, 32, 8, 'Month', 2);
                attach(clock, false, 17, 8, 'Day', 2);
            }

            attach(clock, true, 26, 8, 'Hour', 2);
            attach(clock, true, 34, 8, 'Minute', 2);
            attach(clock, true, 36, 8, 'Second', 2);

            setTimeout(function tick() {
                function update(data) {
                    const elements = document.body.querySelectorAll("div.digit > img.digit");

                    for (const element of elements) {
                        const animation = element.animate([
                            {
                                opacity: "0"
                            }
                        ], {
                            fill: "forwards",
                            duration: 500,
                            iterations: 1,
                            easing: "ease-in"
                        });
                        const loadingElement = document.createElement("div");

                        loadingElement.className = "loading";
                        loadingElement.style.transform = "translate3d(0px, 100%, 0)";

                        element.parentElement.parentElement.appendChild(loadingElement);

                        loadingElement.animate([
                            {
                                transform: "translate3d(0px, 0%, 0)"
                            }
                        ], {
                            fill: "forwards",
                            duration: 500,
                            iterations: 1,
                            easing: "ease-out"
                        });

                        animation.onfinish = async () => {
                            if (element) {
                                const parent = element.parentElement;
                                const image = new Image();

                                parent.style.visibility = "hidden";
                                element.style.opacity = "0";

                                try {
                                    const image = await new Promise((resolve, reject) => {
                                        const i = new Image();

                                        i.onload = () => {
                                            resolve(i);
                                        };
                                        i.onerror = (e) => {
                                            reject(e);
                                        };
                                        i.src = data.source;
                                    });

                                    image.className = "digit";
                                    image.alt = "Digit";

                                    for (let index = 0; index < elements.length; index++) {
                                        if (elements.item(index) === element) {
                                            for (let i = 0; i < data.digits.length; i++) {
                                                if (xArray[i] !== digits[i][0]) {
                                                    xArray[i] = digits[i][0];
                                                }

                                                if (yArray[i] !== digits[i][1]) {
                                                    yArray[i] = digits[i][1];
                                                }

                                                if (widthArray[i] !== digits[i][2]) {
                                                    widthArray[i] = digits[i][2];
                                                }

                                                if (heightArray[i] !== digits[i][3]) {
                                                    heightArray[i] = digits[i][3];
                                                }
                                            }

                                            if (index === 0) {
                                                oldYear4 = -1;
                                                year4X = day2Y = 0.0;
                                                year4Width = maxWidth;
                                                year4Height = maxHeight;
                                                year4Step = 0.0;
                                            } else if (index === 1) {
                                                oldYear3 = -1;
                                                year3X = month3Y = 0.0;
                                                year3Width = maxWidth;
                                                year3Height = maxHeight;
                                                year3Step = 0.0;
                                            } else if (index === 2) {
                                                oldYear2 = -1;
                                                year2X = day2Y = 0.0;
                                                year2Width = maxWidth;
                                                year2Height = maxHeight;
                                                year2Step = 0.0;
                                            } else if (index === 3) {
                                                oldYear1 = -1;
                                                year1X = month1Y = 0.0;
                                                year1Width = maxWidth;
                                                year1Height = maxHeight;
                                                year1Step = 0.0;
                                            } else if (index === 4) {
                                                oldMonth2 = -1;
                                                month2X = day2Y = 0.0;
                                                month2Width = maxWidth;
                                                month2Height = maxHeight;
                                                month2Step = 0.0;
                                            } else if (index === 5) {
                                                oldMonth1 = -1;
                                                month1X = month1Y = 0.0;
                                                month1Width = maxWidth;
                                                month1Height = maxHeight;
                                                month1Step = 0.0;
                                            } else if (index === 6) {
                                                oldDay2 = -1;
                                                day2X = day2Y = 0.0;
                                                day2Width = maxWidth;
                                                day2Height = maxHeight;
                                                day2Step = 0.0;
                                            } else if (index === 7) {
                                                oldDay1 = -1;
                                                day1X = day1Y = 0.0;
                                                day1Width = maxWidth;
                                                day1Height = maxHeight;
                                                day1Step = 0.0;
                                            } else if (index === 8) {
                                                hour2X = hour2Y = 0.0;
                                                hour2Width = maxWidth;
                                                hour2Height = maxHeight;
                                                hour2Step = 0.0;
                                            } else if (index === 9) {
                                                oldHour1 = -1;
                                                hour1X = hour1Y = 0.0;
                                                hour1Width = maxWidth;
                                                hour1Height = maxHeight;
                                                hour1Step = 0.0;
                                                oldHour2 = -1;
                                            } else if (index === 10) {
                                                oldMinute2 = -1;
                                                minute2X = minute2Y = 0.0;
                                                minute2Width = maxWidth;
                                                minute2Height = maxHeight;
                                                minute2Step = 0.0;
                                            } else if (index === 11) {
                                                oldMinute1 = -1;
                                                minute1X = minute1Y = 0.0;
                                                minute1Width = maxWidth;
                                                minute1Height = maxHeight;
                                                minute1Step = 0.0;
                                            } else if (index === 12) {
                                                oldSecond2 = -1;
                                                second2X = second2Y = 0.0;
                                                second2Width = maxWidth;
                                                second2Height = maxHeight;
                                                second2Step = 0.0;
                                            } else if (index === 13) {
                                                oldSecond1 = -1;
                                                second1X = second1Y = 0.0;
                                                second1Width = maxWidth;
                                                second1Height = maxHeight;
                                                second1Step = 0.0;
                                            }

                                            break;
                                        }
                                    }

                                    parent.removeChild(element);
                                    parent.appendChild(image);
                                    parent.style.visibility = "visible";
                                    image.style.opacity = "0";

                                    const a1 = image.animate([
                                        {
                                            opacity: "1"
                                        }
                                    ], {
                                        fill: "forwards",
                                        duration: 500,
                                        iterations: 1,
                                        easing: "ease-out"
                                    });

                                    a1.onfinish = () => {
                                        image.style.opacity = "1";
                                    }
                                } catch (e) {
                                    parent.style.visibility = "visible";
                                    element.animate([
                                        {
                                            opacity: "1"
                                        }
                                    ], {
                                        fill: "forwards",
                                        duration: 500,
                                        iterations: 1,
                                        easing: "ease-out"
                                    });

                                    console.error(e);
                                }

                                const a2 = loadingElement.animate([
                                    {
                                        transform: "translate3d(0px, -100%, 0)"
                                    }
                                ], {
                                    fill: "forwards",
                                    duration: 500,
                                    iterations: 1,
                                    easing: "ease-in"
                                });

                                a2.onfinish = () => {
                                    loadingElement.remove();
                                }
                            }
                        }
                    }
                }

                if (clocks.length > 1) {
                    if (!isPaused) {
                        if (clockQueue.length === 0) {
                            for (const c of shuffle(clocks)) {
                                clockQueue.push(c);
                            }
                        }

                        const nextClock = clockQueue.shift();

                        update(nextClock);
                    }

                    setTimeout(tick, 15000);
                }
            }, 15000);
        });

        window.addEventListener("resize", event => {
            const container = document.body.querySelector("#container");
            const wrap = document.body.querySelector("#wrap");

            if (container.clientWidth >= 130 * 14) {
                wrap.style.transform = "scale(1.0)";
                wrap.animate([
                    {
                        marginLeft: -wrap.clientWidth / 2 + "px"
                    }
                ], {
                    fill: "forwards",
                    duration: 500,
                    iterations: 1,
                    easing: "ease-out"
                });

                for (let i = 0; i < 8; i++) {
                    wrap.children[i].animate([
                        {
                            opacity: "1"
                        }
                    ], {
                        fill: "forwards",
                        duration: 500,
                        iterations: 1,
                        easing: "ease-out"
                    });
                }
            } else if (container.clientWidth >= 130 * 10) {
                wrap.style.transform = "scale(1.0)";
                wrap.animate([
                    {
                        marginLeft: ((-wrap.clientWidth - 130 * 4) / 2).toString() + "px"
                    }
                ], {
                    fill: "forwards",
                    duration: 500,
                    iterations: 1,
                    easing: "ease-out"
                });

                for (let i = 0; i < 4; i++) {
                    wrap.children[i].animate([
                        {
                            opacity: "0"
                        }
                    ], {
                        fill: "forwards",
                        duration: 500,
                        iterations: 1,
                        easing: "ease-in"
                    });
                }

                for (let i = 4; i < 8; i++) {
                    wrap.children[i].animate([
                        {
                            opacity: "1"
                        }
                    ], {
                        fill: "forwards",
                        duration: 500,
                        iterations: 1,
                        easing: "ease-out"
                    });
                }
            } else {
                if (container.clientWidth < 130 * 6) {
                    wrap.style.transform = "scale(" + (container.clientWidth / (130 * 6)).toString() + ")";
                    wrap.animate([
                        {
                            marginLeft: (((-wrap.clientWidth - 130 * 8) / 2)).toString() + "px"
                        }
                    ], {
                        fill: "forwards",
                        duration: 500,
                        iterations: 1,
                        easing: "ease-out"
                    });
                } else {
                    wrap.style.transform = "scale(1.0)";
                    wrap.animate([
                        {
                            marginLeft: ((-wrap.clientWidth - 130 * 8) / 2).toString() + "px"
                        }
                    ], {
                        fill: "forwards",
                        duration: 500,
                        iterations: 1,
                        easing: "ease-out"
                    });
                }

                for (let i = 0; i < 8; i++) {
                    wrap.children[i].animate([
                        {
                            opacity: "0"
                        }
                    ], {
                        fill: "forwards",
                        duration: 500,
                        iterations: 1,
                        easing: "ease-in"
                    });
                }
            }
        });
        window.addEventListener("focus", event => {
            isPaused = false;
        });
        window.addEventListener("blur", event => {
            isPaused = true;
        });        

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-313424-1');
    </script>
</body>

</html>