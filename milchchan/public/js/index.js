!function(e){function t(t){for(var s,o,r=t[0],c=t[1],l=t[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(h&&h(t);d.length;)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},n={0:0},a=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/js";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var h=c;a.push([19,1]),i()}({19:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i(5),a=i(7),o=i(17),r=i(8),c=i(18),l=i(1),h=i(9),u=i(10),d=i(11),f=i(12),m=i(13),p=i(14),g=i(15),b=i(3),y=i(6),w=i(16),x=i(4);firebase.initializeApp({apiKey:"AIzaSyDTVxDJj7rqG9L-Clvba2Tao9B0hkcxjcE",authDomain:"milchchan.firebaseapp.com",databaseURL:"https://milchchan.firebaseio.com",projectId:"milchchan",storageBucket:"milchchan.appspot.com",messagingSenderId:"355698971889",appId:"1:355698971889:web:e3653c5c31bd7289cd4550",measurementId:"G-3998FJYNWX"}),firebase.analytics();const v="debug"===decodeURIComponent(window.location.hash.substring(1));let k=firebase.database(),L=firebase.storage();const I=new s.Pb({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});I.setClearColor(16777215,0),I.toneMappingExposure=1,I.toneMapping=s.K,I.outputEncoding=s.Qb;const T=new s.cb(60,I.domElement.width/I.domElement.height,.1,1e3);T.position.set(0,1.5,5);const M=new a.a(T,I.domElement);M.enabled=!1,M.enableKeys=!1,M.screenSpacePanning=!1,M.enableDamping=!0,M.minPolarAngle=30*Math.PI/180,M.maxPolarAngle=150*Math.PI/180,M.minAzimuthAngle=-45*Math.PI/180,M.maxAzimuthAngle=45*Math.PI/180,M.minDistance=.75,M.maxDistance=5,M.target.set(0,2.5,1),M.update();const D=new s.tb,P=new s.m(16777215),S=new s.v(14154751,8295592,.7);P.intensity=.9,P.position.set(0,10,10).normalize(),D.add(P),D.add(S);const R=new s.ab;T.add(R);const A=new o.a(I);var E=new c.a(new s.Kb(I.domElement.width,I.domElement.height),1.5,.4,.85),q=new l.a(h.a),W=new l.a(u.a),_=(new l.a(d.a),new l.a(b.a)),B=new l.a(f.a),j=new l.a(m.a),O=new l.a(p.a),H=new l.a(g.a);E.renderToScreen=!0,E.threshold=.5,E.strength=.25,E.radius=0,q.uniforms.hue.value=-.025,q.uniforms.saturation.value=.25,W.uniforms.contrast.value=-.1,j.uniforms.mulRGB.value=new s.Lb(.95,.95,.95),j.uniforms.powRGB.value=new s.Lb(1,1,1),O.uniforms.amount.value=1e-4,O.uniforms.angle.value=0,B.uniforms.darkness.value=.25,B.uniforms.offset.value=0,_.renderToScreen=!0,H.uniforms.resolution.value.set(1/(I.domElement.width*window.devicePixelRatio),1/(I.domElement.height*window.devicePixelRatio)),A.setSize(I.domElement.width,I.domElement.height),A.setPixelRatio(window.devicePixelRatio),A.addPass(new r.a(D,T)),A.addPass(E),A.addPass(q),A.addPass(O),A.addPass(B),A.addPass(_);const C=new w;C.domElement.style.position="fixed",C.domElement.style.top="auto",C.domElement.style.bottom="0",C.domElement.style.left="auto",C.domElement.style.right="0",v||C.domElement.classList.add("is-hidden");const U=new s.k,$=new s.rb,Q=new s.Kb;let N=null,G=[],F=0;let z=0;let V=0;let J=null,X=null;let Y=null,K=null,Z=0;var ee=Vue.createApp({data:()=>({isDebug:v,isDarkMode:!1,isMuted:!0,isLoading:!1,isRevealed:!1,isOverlayed:!1,isUpdating:!1,isBlinded:!1,isPopup:!1,isExpanded:!1,isLearning:!1,isAnimating:!1,isHangingOn:!1,isSubmitting:!1,isStared:!1,mode:null,feedQueue:[],sequenceQueue:[],progress:null,user:null,input:"",animatedInputLength:0,maxInputLength:100,inputHasError:!1,messages:[],maxMessages:10,word:null,words:[],tags:[],maxTags:10,scrollTimeoutID:void 0,tickIntervalID:void 0,stars:-1,animatedStars:0,screenshot:null,notifications:[],notificationHeight:0,animatedNotificationHeight:0,recentImages:[],backgroundImagesQueue:[],backgroundImages:[],preloadImages:[],isUploading:!1,animations:null,currentAnimations:[],blendShapeAnimations:[],insetTop:0,insetBottom:0,text:[],popupTextHeight:0,animatedPopupTextHeight:0,tickerWidth:0,animatedTickerWidth:0,message:null,states:{},character:null,wordDictionary:{},reverseWordDictionary:{},attributes:["名前","所属","時間","場所","する事","生き物","食べ物","飲み物","聞くもの","見るもの","読むもの","使う物","身につけるもの","乗り物","部位","病気"]}),watch:{isMuted(e){try{localStorage.setItem("character",JSON.stringify({mute:e}))}catch(e){localStorage.removeItem("character")}},words:{handler:()=>{ee.$nextTick(()=>{for(const e of document.body.querySelectorAll(".container>.wrap>.frame .clip")){let t=0;for(const i of e.querySelectorAll(":scope .ticker-wrap .ticker .item"))t+=i.getBoundingClientRect().width;t>0&&(ee.tickerWidth=Math.min(t/2,document.body.querySelector(".container>.wrap>.frame .level").getBoundingClientRect().width),e.querySelector(":scope .ticker-wrap .ticker").style.width=t+"px")}})},deep:!0},tickerWidth(e){const t=this,i={width:this.animatedTickerWidth};Object(x.a)({targets:i,width:e,round:1,duration:500,easing:"linear",update:()=>{t.animatedTickerWidth=i.width}})},backgroundImages:{handler:()=>{ee.$nextTick(()=>{const e=document.body.querySelectorAll("#app>.background>div");if(e.length>1){const t=e.length-1,i=15;let s=0,n=null;for(const a of e){const o=[];for(let t=0;t<e.length;t++)t===s?o.push({visibility:"visible"}):o.push({visibility:"hidden"});const r=a.animate(o,{fill:"forwards",easing:"steps("+t+")",duration:1e3/i*e.length,iterations:1/0});null===n?n=r.startTime:r.startTime=n,s++}}})},deep:!0},text:{handler:()=>{ee.$nextTick(()=>{ee.isPopup&&(ee.popupTextHeight=ee.$refs.popupText.getBoundingClientRect().height)})},deep:!0},popupTextHeight(e){const t={height:this.animatedPopupTextHeight};Object(x.a)({targets:t,height:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedPopupTextHeight=t.height}})},notifications:{handler:()=>{ee.$nextTick(()=>{ee.notificationHeight=ee.$refs.notifications.getBoundingClientRect().height})},deep:!0},notificationHeight(e){const t={height:this.animatedNotificationHeight};Object(x.a)({targets:t,height:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedNotificationHeight=t.height}})},stars(e){const t={count:this.animatedStars};Object(x.a)({targets:t,count:e,round:1,duration:500,easing:"linear",update:()=>{this.animatedStars=t.count}})},input:{handler:()=>{ee.$nextTick(()=>{const e={count:ee.animatedInputLength};Object(x.a)({targets:e,count:ee.input.length,round:1,duration:500,easing:"linear",update:()=>{ee.animatedInputLength=e.count}})})},deep:!0}},methods:{signIn:function(e){if(e===firebase.auth.GoogleAuthProvider.PROVIDER_ID)firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider).then(e=>{var t=e.credential;for(const t of e.user.providerData){firebase.auth().currentUser.updateProfile({displayName:t.displayName,photoURL:t.photoURL}).catch((function(e){console.error(e.code,e.message)}));break}try{localStorage.setItem("credential",JSON.stringify({providerId:t.providerId,accessToken:t.accessToken,idToken:t.idToken}))}catch(e){localStorage.removeItem("credential")}}).catch(e=>{console.error(e.code,e.message)});else if(e===firebase.auth.FacebookAuthProvider.PROVIDER_ID){const e=new firebase.auth.FacebookAuthProvider;e.addScope("public_profile"),firebase.auth().signInWithPopup(e).then(e=>{var t=e.credential;for(const t of e.user.providerData){firebase.auth().currentUser.updateProfile({displayName:t.displayName,photoURL:t.photoURL}).catch((function(e){console.error(e.code,e.message)}));break}try{localStorage.setItem("credential",JSON.stringify({providerId:t.providerId,accessToken:t.accessToken}))}catch(e){localStorage.removeItem("credential")}}).catch(e=>{console.error(e.code,e.message)})}else e===firebase.auth.TwitterAuthProvider.PROVIDER_ID&&firebase.auth().signInWithPopup(new firebase.auth.TwitterAuthProvider).then(e=>{var t=e.credential;for(const t of e.user.providerData){const e=t.photoURL.replace(/_normal\.jpg$/,".jpg");firebase.auth().currentUser.updateProfile({displayName:t.displayName,photoURL:e}).catch((function(e){console.error(e.code,e.message)}));break}try{localStorage.setItem("credential",JSON.stringify({providerId:t.providerId,accessToken:t.accessToken,secret:t.secret}))}catch(e){localStorage.removeItem("credential")}}).catch(e=>{console.error(e.code,e.message)})},signOut:function(e){firebase.auth().signOut().then(()=>{localStorage.removeItem("credential"),"serviceWorker"in navigator&&null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({command:"caches"})}).catch(e=>{console.error(e.code,e.message)})},refresh:function(e){this.isBlinded=!0,V=0},send:async function(e){if(this.isDebug)if(this.input.length>0){let e=[],t=[];for(const i of this.input.split(/\s/))this.backgroundImages.some(e=>e.id===i)?e.push(i):t.push(i);if(e.length>0&&t.length>0){for(const i of e)k.ref("bot/images/"+i).transaction((function(e){return e.tags=t,e}));this.isLearning=!1}else this.input.length<=this.maxInputLength&&(this.learn({name:this.input}),this.input="",this.isLearning=!1)}else for(const e of this.backgroundImages){this.input=e.id;break}else{if(this.input.length>0&&this.input.length<=this.maxInputLength)return this.learn({name:this.input}),this.input="",void(this.isLearning=!1);this.shake(this.$refs.input)}},change:function(e){this.input.length<=this.maxInputLength?this.inputHasError=!1:this.inputHasError=!0},upload:async function(e){function t(){let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(let t=0,i=e.length;t<i;t++)switch(e[t]){case"x":e[t]=Math.floor(16*Math.random()).toString(16);break;case"y":e[t]=(Math.floor(4*Math.random())+8).toString(16)}return e.join("")}const i=this,s=L.ref(),n=[],a=[];for(const t of e.target.files)n.push(t);this.isUploading=!0;for(const e of n.sort((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)){const o=s.child("images/"+t()).put(e);try{await new Promise((function(e,t){o.on("state_changed",(function(e){i.progress=e.bytesTransferred/e.totalBytes/n.length+a.length/n.length}),(function(e){t(e)}),(function(){e()}))}))}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}a.push(o.snapshot.ref.fullPath)}k.ref("bot/images").push({paths:a,timestamp:Math.floor(new Date/1e3)}),this.progress=null,this.isUploading=!1},check:function(e){for(const t of this.word.attributes)t===e.target.dataset.attribute&&(t.value=e.target.checked)},share:async function(e){const t=this,i=Math.floor(new Date/1e3);e.name in this.wordDictionary&&delete this.wordDictionary[e.name],Object.keys(this.reverseWordDictionary).forEach(t=>{this.reverseWordDictionary[t].words.some(t=>t===e.name)&&delete this.reverseWordDictionary[t]}),this.isSubmitting=!0,k.ref("bot/words/"+e.name).transaction((function(t){if(!t){t={attributes:{},timestamp:i};for(const s of e.attributes)s.value?t.attributes[s.name]=i:t.attributes[s.name]=0;return t}{let s=!1;for(const i of e.attributes){if(!(i.name in t.attributes)){s=!0;break}if(t.attributes[i.name]>0){if(!i.value){s=!0;break}}else if(i.value){s=!0;break}}if(s){let s=!0;const n={attributes:{}};for(const a of e.attributes)a.value?(a.name in t.attributes&&t.attributes[a.name]>0?n.attributes[a.name]=t.attributes[a.name]:n.attributes[a.name]=i-1,s=!1):n.attributes[a.name]=0;return s?null:(n.timestamp=i,n)}}}),(function(i,s,n){if(s){if(n.exists()){const i=n.val();let s=[];for(const e in i.attributes)"number"==typeof i.attributes[e]&&i.attributes[e]>0&&t.attributes.includes(e)&&s.push(i.attributes[e]);if(1===s.length&&s[0]===i.timestamp){function a(e){var t=arguments;return e.replace(/\{(\d)\}/g,(function(e,i){return t[parseInt(i)+1]}))}k.ref("bot/stars").transaction((function(e){return(e||0)+1}));for(const i of t.prepare(t.character.sequences.filter(e=>"Learned"===e.name)))"Message"===i.type&&t.notify({text:a(i.text,e.name),accent:t.character.accent,image:t.character.image});t.isStared=!0,window.setTimeout(()=>{t.isStared=!1},3e3),t.isMuted||t.$refs.twinkle.play()}}else k.ref("bot/stars").transaction((function(e){if(e)return e-1}));t.word=null}else i&&(t.notify({text:i.message,accent:t.character.accent,image:t.character.image}),console.error(i));t.isSubmitting=!1}))},learn:async function(e){function t(e){var t=arguments;return e.replace(/\{(\d)\}/g,(function(e,i){return t[parseInt(i)+1]}))}const i=[],s=[];if("attributes"in e)for(const t of this.attributes)t in e.attributes&&(e.attributes[t]>0?s.push({name:t,value:!0}):s.push({name:t,value:!1}));else{const t=await k.ref("bot/words/"+e.name).once("value");if(t.exists()){const e=t.val();for(const t of this.attributes)t in e.attributes&&(e.attributes[t]>0?s.push({name:t,value:!0}):s.push({name:t,value:!1}))}else for(const e of this.attributes)s.push({name:e,value:!1})}this.word={name:e.name,attributes:s};for(const s of this.prepare(this.character.sequences.filter(e=>"Learn"===e.name)))"Message"===s.type?i.push({type:s.type,speed:s.speed,duration:s.duration,text:t(s.text,e.name)}):i.push(s);i.length>0&&this.sequenceQueue.push(i)},activate:async function(e=[]){z=V=0,await this.talk(e)||this.talk()},talk:async function(e=[]){let t=this.character.sequences.filter(e=>"Activate"===e.name),i=[];if(this.isLoading=!0,e.length>0){const s=Math.floor(new Date/1e3),n=3600,a=Object.assign({},this.states),o=new TinySegmenter,r=[],c=[];for(const t of e){if(t in this.wordDictionary==!1||s-this.wordDictionary[t].timestamp>=n){const e=await k.ref("bot/words/"+t).once("value");if(this.wordDictionary[t]={attributes:[],timestamp:s},e.exists()){const i=e.val();for(let e in i.attributes)"number"==typeof i.attributes[e]&&i.attributes[e]>0&&this.attributes.includes(e)&&this.wordDictionary[t].attributes.push(e)}}for(const e of this.wordDictionary[t].attributes)r.includes(e)||r.push(e)}for(const l of function(e){let t=[].concat(e),i=e.length;for(;i>1;){const e=(s=0,n=i,s=Math.ceil(s),n=Math.floor(n),Math.floor(Math.random()*(n-s))+s);i--;const a=t[i];t[i]=t[e],t[e]=a}var s,n;return t}(t)){const t=this.prepare([l]);let h=!1;for(const a of t){if("Message"==a.type)for(const l of Array.isArray(a.text)?a.text:o.segment(a.text)){if(Array.isArray(l)){for(const s of t)if("Message"==s.type){const t=await this.generate(s.text,e);if(null===t){h=!0;break}{let e,n;[e,n]=t,i.push({type:s.type,speed:s.speed,duration:s.duration,text:e})}}else i.push(s);if(h)break;return i.length>0&&this.sequenceQueue.push(i),this.isLoading=!1,!0}if(l.length>1&&!c.includes(l)){if(l in this.wordDictionary==!1||s-this.wordDictionary[l].timestamp>=n){const e=await k.ref("bot/words/"+l).once("value");if(this.wordDictionary[l]={attributes:[],timestamp:s},e.exists()){const t=e.val();for(const e in t.attributes)"number"==typeof t.attributes[e]&&t.attributes[e]>0&&this.attributes.includes(e)&&this.wordDictionary[l].attributes.push(e)}}for(const s of this.wordDictionary[l].attributes)if(r.includes(s)){for(const s of t)if("Message"==s.type){const t=await this.generate(s.text,e);if(null===t){h=!0;break}{let e,n;[e,n]=t,i.push({type:s.type,speed:s.speed,duration:s.duration,text:e})}}else i.push(s);if(h)break;return i.length>0&&this.sequenceQueue.push(i),this.isLoading=!1,!0}c.push(l)}}if(h){i.splice(0);break}}this.states=a}return this.isLoading=!1,!1}for(const e of this.prepare(t))if("Message"===e.type){const t=await this.generate(e.text);if(null===t)return this.isLoading=!1,!1;{let s,n;[s,n]=t,i.push({type:e.type,speed:e.speed,duration:e.duration,text:s})}}else i.push(e);return i.length>0?(this.sequenceQueue.push(i),this.isLoading=!1,!0):(this.isLoading=!1,!1)},generate:async function(e,t=[]){function i(e){let t=[],i=Number.MIN_VALUE,s=0;for(let t=0;t<e.length;t++)e[t]>i&&(i=e[t]);for(let t=0;t<e.length;t++)s+=Math.exp(e[t]-i);for(let n=0;n<e.length;n++)t.push(Math.exp(e[n]-i)/s);return t}const s=Math.floor(new Date/1e3);let n=new TinySegmenter,a=Array.isArray(e)?e:n.segment(e),o={},r=[],c=new RegExp("[.#$\\[\\]]"),l={},h="",u=0;const d=Math.pow(10,-6);let f=[{sequence:[],score:1}];for(const e of t){if(e in this.wordDictionary==!1||s-this.wordDictionary[e].timestamp>=3600){const t=await k.ref("bot/words/"+e).once("value");if(this.wordDictionary[e]={attributes:[],timestamp:s},t.exists()){const i=t.val();for(const t in i.attributes)"number"==typeof i.attributes[t]&&i.attributes[t]>0&&this.attributes.includes(t)&&this.wordDictionary[e].attributes.push(t)}}for(const t of this.wordDictionary[e].attributes)t in o?o[t].push(e):o[t]=[e]}for(const e of a){if(!r.includes(e)){if(Array.isArray(e)){let t=[],n=[];for(const i of e)if(i in o){for(const e of o[i])if(!t.includes(e)){let i=!0;t.push(e);for(const t of this.tags)if(e===t.name){n.push(t.score),i=!1;break}i&&n.push(d)}}else{if(i in this.reverseWordDictionary==!1||s-this.reverseWordDictionary[i].timestamp>=3600){const e=await k.ref("bot/words").orderByChild("attributes/"+i).limitToLast(100).startAt(1).once("value");if(this.reverseWordDictionary[i]={words:[],timestamp:s},e.exists()){const t=e.val();for(const e in t)this.reverseWordDictionary[i].words.push(e)}}for(const e of this.reverseWordDictionary[i].words)if(a.includes(e)&&!t.includes(e)){let i=!0;t.push(e);for(const t of this.tags)if(e==t.name){n.push(t.score),i=!1;break}i&&n.push(d)}}if(t.length>0&&n.length>0){const e=i(n);let s=[];for(let i=0;i<f.length;i++)for(let n=0;n<e.length;n++){let a=[].concat(f[i].sequence);a.push({index:u,term:t[n]}),s.push({sequence:a,score:f[i].score*e[n]})}f.splice(0);for(const e of this.take(s.sort((e,t)=>t.score-e.score),10))f.push(e)}}else if(!c.test(e)){let t=[],n=[];if(e in this.wordDictionary==!1||s-this.wordDictionary[e].timestamp>=3600){const t=await k.ref("bot/words/"+e).once("value");if(this.wordDictionary[e]={attributes:[],timestamp:s},t.exists()){const i=t.val();for(const t in i.attributes)"number"==typeof i.attributes[t]&&i.attributes[t]>0&&this.attributes.includes(t)&&this.wordDictionary[e].attributes.push(t)}}for(const i of this.wordDictionary[e].attributes)if(i in o){for(const e of o[i])if(!t.includes(e)){let i=!0;t.push(e);for(const t of this.tags)if(e===t.name){n.push(t.score),i=!1;break}i&&n.push(d)}}else{if(i in this.reverseWordDictionary==!1||s-this.reverseWordDictionary[i].timestamp>=3600){const e=await k.ref("bot/words").orderByChild("attributes/"+i).limitToLast(100).startAt(1).once("value");if(this.reverseWordDictionary[i]={words:[],timestamp:s},e.exists()){const t=e.val();for(let e in t)this.reverseWordDictionary[i].words.push(e)}}for(const e of this.reverseWordDictionary[i].words)if(a.includes(e)&&!t.includes(e)){let i=!0;t.push(e);for(const t of this.tags)if(e==t.name){n.push(t.score),i=!1;break}i&&n.push(d)}}if(t.length>0&&n.length>0){const e=i(n);let s=[];for(let i=0;i<f.length;i++)for(let n=0;n<e.length;n++){let a=[].concat(f[i].sequence);a.push({index:u,term:t[n]}),s.push({sequence:a,score:f[i].score*e[n]})}f.splice(0);for(const e of this.take(s.sort((e,t)=>t.score-e.score),10))f.push(e)}}r.push(e)}u++}const m=f[function(e){const t=Math.random();let i=0,s=0;for(let n of e){if(i<=t&&t<i+n)break;i+=n,s++}return s}(i(f.map(e=>e.score)))];for(let e=0;e<a.length;e++){const t=JSON.stringify(a[e]);if(t in l)void 0===l[t]?h+=a[e]:h+=l[t];else{let i=!0;for(let s=0;s<m.sequence.length;s++)if(m.sequence[s].index==e){t==m.sequence[s].term?l[t]=void 0:(l[t]=m.sequence[s].term,h+=m.sequence[s].term,i=!1);break}if(i){if(Array.isArray(a[e]))return null;h+=a[e]}}}return[h,l]},notify:function(e,t=3e3){const i=this;e.id=window.setTimeout(e=>{for(let t=0;t<i.notifications.length;t++)if(i.notifications[t].id===e.id){i.notifications.splice(t,1);break}},t,e),this.notifications.unshift(e)},blinded:async function(){if(0==this.backgroundImagesQueue.length){for(const e of function(e){let t=[].concat(e),i=e.length;for(;i>1;){const e=(s=0,n=i,s=Math.ceil(s),n=Math.floor(n),Math.floor(Math.random()*(n-s))+s);i--;const a=t[i];t[i]=t[e],t[e]=a}var s,n;return t}(this.recentImages))this.backgroundImagesQueue.push(e)}const e=this.backgroundImagesQueue.shift();this.preloadImages.splice(0),this.backgroundImages.splice(0);for(const t of e.paths)try{this.preloadImages.push({id:e.id,url:await L.ref().child(t).getDownloadURL(),timestamp:e.timestamp})}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}"tags"in e&&this.talk(e.tags.filter(e=>-1===e.indexOf(this.character.name)))},load:function(e){let t=!0;for(let i of this.preloadImages)i.url==e?i.isLoaded=!0:"isLoaded"in i||(t=!1);if(t){let e=0;for(const t of this.preloadImages)t.isLoaded&&(this.backgroundImages.push({index:e,id:t.id,url:t.url,timestamp:t.timestamp}),e++);this.preloadImages.splice(0),this.isBlinded=!1}},error:function(e){let t=!0;for(let i of this.preloadImages)i.url==e?i.isLoaded=!0:"isLoaded"in i||(t=!1);if(t){let e=0;for(const t of this.preloadImages)t.isLoaded&&(this.backgroundImages.push({index:e,id:t.id,url:t.url,timestamp:t.timestamp}),e++);this.preloadImages.splice(0),this.isBlinded=!1}},update:async function(e,t){this.isUpdating=!0;try{const i=await new Promise(i=>{const s=Math.pow(10,-6);let n=[],a=[],o=[],r={};const c=(new Date).getTime()-432e5;let l={},h=[],u=s;for(const t in e)if("tags"in e[t]&&e[t].tags.length>0){let i=[];n.push({tokens:e[t].tags,timestamp:e[t].timestamp});for(const s of e[t].tags)i.includes(s)||(s in r?r[s]+=1:r[s]=1,i.push(s))}for(const e in r)r[e]=Math.log(n.length/(r[e]+s));for(const e of n)1e3*e.timestamp>c&&a.push(e);if(a.length<10){const e=Math.max(n.length-10,0);a.splice(0);for(let t=n.length-1;t>=e;t--)a.unshift(n[t])}for(const e of a){let t={};for(const i of e.tokens)i in t?t[i]+=1:t[i]=1;for(const i in t)t[i]/=e.tokens.length,i in l||(l[i]=0);o.push(t)}for(const e in l)for(const t of o)if(e in t){const i=t[e]*r[e];i>l[e]&&(l[e]=i)}for(const e in l)e.length>1&&"..."!=e&&h.push({term:e,value:l[e]});h.sort((e,t)=>t.value-e.value),h.length>t&&h.splice(t);for(const e of h)e.value>u&&(u=e.value);for(const e of h)e.value/=u;h.sort((e,t)=>e.term>t.term?1:e.term<t.term?-1:0),i(h)});this.tags.splice(0);for(let e=0;e<i.length;e++)this.tags.push({index:e,name:i[e].term,score:i[e].value})}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}this.isUpdating=!1},shake:function(e){e.animate([{transform:"translate3d(0, 0, 0)"},{transform:"translate3d(8px, 0, 0)"},{transform:"translate3d(-8px, 0, 0)"},{transform:"translate3d(7px, 0, 0)"},{transform:"translate3d(-7px, 0, 0)"},{transform:"translate3d(6px, 0, 0)"},{transform:"translate3d(-6px, 0, 0)"},{transform:"translate3d(5px, 0, 0)"},{transform:"translate3d(-5px, 0, 0)"},{transform:"translate3d(4px, 0, 0)"},{transform:"translate3d(-4px, 0, 0)"},{transform:"translate3d(3px, 0, 0)"},{transform:"translate3d(-3px, 0, 0)"},{transform:"translate3d(2px, 0, 0)"},{transform:"translate3d(-2px, 0, 0)"},{transform:"translate3d(1px, 0, 0)"},{transform:"translate3d(-1px, 0, 0)"},{transform:"translate3d(0, 0, 0)"}],{duration:1e3,iterations:1})},scrollToTop(){this.$nextTick(()=>{window.scroll(0,0)})},scrollToEnd:function(){"number"==typeof this.scrollTimeoutID&&clearTimeout(this.scrollTimeoutID),this.scrollTimeoutID=setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}),500)},formatDate:function(e){return moment.locale(window.navigator.language),moment(e).format("LT")},animationStart:function(e){this.isAnimating=!0},animationEnd:function(e){const t=this;this.$nextTick(()=>{t.notificationHeight=t.$refs.notifications.getBoundingClientRect().height}),this.isPopup||(this.message=null),this.isAnimating=!1},tickerUpdated:function(e){const t=this;this.$nextTick(()=>{for(const e of document.body.querySelectorAll(".container>.wrap>.frame .clip")){let i=0;for(const t of e.querySelectorAll(":scope .ticker-wrap .ticker .item"))i+=t.getBoundingClientRect().width;i>0&&(t.tickerWidth=Math.min(i/2,document.body.querySelector(".container>.wrap>.frame .level").getBoundingClientRect().width),e.querySelector(":scope .ticker-wrap .ticker").style.width=i+"px")}})},arrange:function(e,t){let i=[],s=[];for(const n of e)s.length<t?s.push(n):(i.push(s),s=[n]);return i.push(s),i},take:function(e,t){if(e.length>t){let i=[].concat(e);return i.splice(t),i}return e},prepare:function(e,t=null,i=null){function s(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}let n=[],a=[];for(const i of e){let e=t;if(null===t&&i.name in this.states&&(e=this.states[i.name]),null!==e&&"state"in i&&null!==i.state){new RegExp(i.state).test(e)&&n.push(i)}}if(0===n.length){for(const t of e)"state"in t!=!1&&null!==t.state||n.push(t);t=null}if(n.length>0){let e=[];for(const i of n[s(0,n.length)].sequence)null!==t&&(this.states[i.name]=t),e.push(i);for(;e.length>0;){const t=e.shift();if("Sequence"==t.type){if("sequence"in t==!1){let n=[],a=[];for(const e of null===i?this.character.sequences:i){let i=this.getSequenceStack(e,t);if(i.length>0){let e=[];do{let t=i.pop();if(i.length>0){let s=[];for(const n of i[i.length-1].sequence)if("Sequence"==n.type){if("sequence"in n){let t=!0;for(const i of e)if(i===n){t=!1;break}t&&s.push(n)}if(n===t)break}for(;s.length>0;)e.push(s.pop())}if("sequence"in t){let i=!0;for(const s of e)if(s===t){i=!1;break}i&&e.push(t)}}while(i.length>0);for(;e.length>0;)n.push(e.pop())}else n.push(e)}if("state"in t){this.states[t.name]=t.state;for(const e of n)if(e.name==t.name){if(!new RegExp(e.state).test(t.state))continue;a.push(e)}}else for(const e of n)if(e.name==t.name){if("state"in e){if(e.name in this.states==!1)continue;if(!new RegExp(e.state).test(this.states[e.name]))continue}a.push(e)}if(a.length>0){let t=0;for(const i of a[s(0,a.length)].sequence)e.splice(t,0,i),t++}}}else a.push(t)}}return a},getSequenceStack:function(e,t){let i=[];if(i.push(e),i[i.length-1]!==t){if("sequence"in e)for(const s of e.sequence)if("Sequence"==s.type){let e=this.getSequenceStack(s,t);if(e.length>0&&e[e.length-1]===t){let t=[];do{t.push(e.pop())}while(e.length>0);do{i.push(t.pop())}while(t.length>0);return i}}i.pop()}return i},animate:function(){requestAnimationFrame(this.animate);const e=U.getDelta();if(I.domElement.width!==I.domElement.clientWidth||I.domElement.height!==I.domElement.clientHeight){const e=I.domElement.clientWidth,t=I.domElement.clientHeight;E.setSize(e,t),H.uniforms.resolution.value.set(1/(e*window.devicePixelRatio),1/(t*window.devicePixelRatio)),I.setPixelRatio(window.devicePixelRatio),I.setSize(e,t,!1),T.aspect=e/t,T.updateProjectionMatrix(),A.setPixelRatio(window.devicePixelRatio),A.setSize(e,t)}if(N){function t(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}let i=!1,n=!1,a=null,o=[];if(null===J&&(J={time:0,duration:.5,base:{x:R.position.x,y:R.position.y},source:{x:R.position.x,y:R.position.y},target:{x:R.position.x+.1*t(-1,1),y:R.position.y+.1*t(-1,1)}}),J.time+=e,J.time>=J.duration)R.position.x=J.target.x,R.position.y=J.target.y,J=J.base?{time:0,duration:.5,source:{x:R.position.x,y:R.position.y},target:{x:J.base.x,y:J.base.y}}:null;else{const e=J.time/J.duration;R.position.x=J.source.x+(J.target.x-J.source.x)*e,R.position.y=J.source.y+(J.target.y-J.source.y)*e}let r=Math.max(0,Math.min(-R.position.y,1)),c=!0;this.currentAnimations.length>0&&F<this.currentAnimations.length&&(a=this.currentAnimations[F],F+=2,i=!0);for(let t=this.blendShapeAnimations.length-1;t>=0;t--){let i=this.blendShapeAnimations[t];o.includes(i.name)||(i.time<=i.duration&&(i.time+=e,i.time>=i.duration?("blink"==i.name?(N.blendShapeProxy.setValue(i.name,.1*r+.9*Math.abs(Math.sin(i.end/2*Math.PI))),c=!1):N.blendShapeProxy.setValue(i.name,Math.abs(Math.sin(i.end/2*Math.PI))),this.blendShapeAnimations.splice(t,1)):"blink"==i.name?(N.blendShapeProxy.setValue(i.name,.1*r+.9*Math.abs(Math.sin((i.time/i.duration*(i.end-i.start)+i.start)/2*Math.PI))),c=!1):N.blendShapeProxy.setValue(i.name,Math.abs(Math.sin((i.time/i.duration*(i.end-i.start)+i.start)/2*Math.PI))),n=!0),o.push(i.name))}if(c&&N.blendShapeProxy.setValue("blink",.1*r),this.sequenceQueue.length>0&&Array.isArray(this.sequenceQueue[0])?z=0:(z+=e,this.isLoading||(V+=e),0==this.sequenceQueue.length&&(V>=10?(this.recentImages.length>0&&(this.isBlinded=!0),z=V=0):(z>=5||null===a)&&(this.sequenceQueue.push({sequences:this.prepare(this.character.sequences.filter(e=>"Idle"===e.name))}),z=0))),this.sequenceQueue.length>0){const e=Array.isArray(this.sequenceQueue[0])?this.sequenceQueue[0]:this.sequenceQueue[0].sequences;if(e.length>0){if("Animation"==e[0].type)if("name"in e[0])if(e[0].name in this.animations){let t=!1;if("dependencies"in e[0])for(const i of this.currentAnimations)if(e[0].dependencies.includes(i.name)){t=!0;break}if(!t||!i){this.currentAnimations.splice(0);for(let t of this.animations[e[0].name])this.currentAnimations.push(t);e.shift(),F=0,a=this.currentAnimations[F],F+=2}}else{let t=!1;if("dependencies"in e[0])for(const i of this.blendShapeAnimations)if(e[0].dependencies.includes(i.name)){t=!0;break}if(!t||!n){let i=[];for(this.blendShapeAnimations.unshift({name:e[0].name,time:0,duration:e[0].duration,start:e[0].start,end:e[0].end}),e.shift();e.length>0;){if(t=!1,"dependencies"in e[0])for(const i of this.blendShapeAnimations)if(e[0].dependencies.includes(i.name)){t=!0;break}if(t||"Animation"!=e[0].type||e[0].name in this.animations)break;this.blendShapeAnimations.unshift({name:e[0].name,time:0,duration:e[0].duration,start:e[0].start,end:e[0].end}),e.shift()}for(let e=this.blendShapeAnimations.length-1;e>=0;e--){let t=this.blendShapeAnimations[e];i.includes(t.name)||(N.blendShapeProxy.setValue(t.name,Math.abs(Math.sin(t.start/2*Math.PI))),i.push(t.name))}}}else e.shift();else if("Message"==e[0].type&&null===this.message&&!i&&!n&&("character"in e[0]?this.message={time:0,duration:e[0].duration,type:{elapsed:-1,speed:e[0].speed,reverse:!1,buffer:"",count:0},character:e[0].character,text:e[0].text}:this.message={time:0,duration:e[0].duration,type:{elapsed:-1,speed:e[0].speed,reverse:!1,buffer:"",count:0},character:{name:this.character.name,accent:this.character.accent,image:this.character.image},text:e[0].text},e.shift(),!this.isMuted)){const e=this.message.text;new Promise(async t=>{try{const t=await fetch("https://ai.milchchan.com/api/synthesize?text="+encodeURIComponent(e),{mode:"cors",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!t.ok)throw new Error(t.statusText);this.$refs.player.src=URL.createObjectURL(await t.blob()),null!==this.message&&e===this.message.text&&(this.$refs.player.currentTime=0,this.$refs.player.play())}catch(e){console.error(e)}t()})}}else null!==this.message||i||n||this.sequenceQueue.shift()}if(null!==this.message){if(this.message.type.reverse)if(this.message.type.count>0){if(this.message.type.elapsed+=2*e,this.message.type.elapsed>=1/this.message.type.speed){if(this.message.type.count-1<this.message.text.length){let e=Math.floor(this.message.text.length/2);this.message.type.buffer.length<=e&&this.message.type.count>0&&(this.message.type.count-=1),this.message.type.buffer.length>0&&(this.message.type.buffer=this.message.type.buffer.substring(0,this.message.type.buffer.length-1))}this.message.type.elapsed=0}}else this.isPopup=!1;else if(this.message.type.buffer.length<this.message.text.length){if(this.message.type.elapsed>=0?this.message.type.elapsed+=e:this.isAnimating||(this.isPopup?this.message.type.elapsed=e:this.isPopup=!0),this.message.type.elapsed>=1/this.message.type.speed){let e=this.message.type.buffer.length,t=Math.floor(this.message.text.length/2),i=this.message.text.length;this.message.type.count>=t&&(this.message.type.buffer+=this.message.text.charAt(e)),this.message.type.count<i&&(this.message.type.count+=1),this.message.type.elapsed=0}}else this.message.time+=e,this.message.time>=this.message.duration&&(this.message.type.reverse=!0);if(this.message.text.length===this.message.type.buffer.length){const e=this.message.text.split("");this.text.splice(0);for(let t=0;t<e.length;t++)this.text.push({key:t,value:e[t]})}else{let e=new Array,i="";for(let t=0;t<this.message.text.length;t++)-1==e.indexOf(this.message.text.charAt(t))&&"\n"!=this.message.text.charAt(t)&&null==this.message.text.charAt(t).match(/\s/)&&e.push(this.message.text.charAt(t));if(e.length>0)for(let s=0;s<this.message.type.count;s++)"\n"==this.message.text.charAt(s)?i+="\n":i+=e[~~t(0,e.length)];if(i.length>this.message.type.buffer.length){const e=(this.message.type.buffer+i.substring(this.message.type.buffer.length,i.length)).split("");this.text.splice(0);for(let t=0;t<e.length;t++)this.text.push({key:t,value:e[t]})}else if(this.text.length!==this.message.type.buffer.length){const e=this.message.type.buffer.split("");this.text.splice(0);for(let t=0;t<e.length;t++)this.text.push({key:t,value:e[t]})}}}if(a)for(let e of a.animations){switch(e.bone){case"chest":case"head":case"hips":case"jaw":case"leftEye":case"leftFoot":case"leftHand":case"leftIndexDistal":case"leftIndexIntermediate":case"leftIndexProximal":case"leftLittleDistal":case"leftLittleIntermediate":case"leftLittleProximal":case"leftLowerArm":case"leftLowerLeg":case"leftMiddleDistal":case"leftMiddleIntermediate":case"leftMiddleProximal":case"leftRingDistal":case"leftRingIntermediate":case"leftRingProximal":case"leftShoulder":case"leftThumbDistal":case"leftThumbIntermediate":case"leftThumbProximal":case"leftToes":case"leftUpperArm":case"leftUpperLeg":case"neck":case"rightEye":case"rightFoot":case"rightHand":case"rightIndexDistal":case"rightIndexIntermediate":case"rightIndexProximal":case"rightLittleDistal":case"rightLittleIntermediate":case"rightLittleProximal":case"rightLowerArm":case"rightLowerLeg":case"rightMiddleDistal":case"rightMiddleIntermediate":case"rightMiddleProximal":case"rightRingDistal":case"rightRingIntermediate":case"rightRingProximal":case"rightShoulder":case"rightThumbDistal":case"rightThumbIntermediate":case"rightThumbProximal":case"rightToes":case"rightUpperArm":case"rightUpperLeg":case"spine":case"upperChest":break;case"eye.L":e.bone="leftEye";break;case"foot.L":e.bone="leftFoot";break;case"hand.L":e.bone="leftHand";break;case"f_index.03.L":e.bone="leftIndexDistal";break;case"f_index.02.L":e.bone="leftIndexIntermediate";break;case"f_index.01.L":e.bone="leftIndexProximal";break;case"f_pinky.03.L":e.bone="leftLittleDistal";break;case"f_pinky.02.L":e.bone="leftLittleIntermediate";break;case"f_pinky.01.L":e.bone="leftLittleProximal";break;case"lower_arm.L":e.bone="leftLowerArm";break;case"shin.L":e.bone="leftLowerLeg";break;case"f_middle.03.L":e.bone="leftMiddleDistal";break;case"f_middle.02.L":e.bone="leftMiddleIntermediate";break;case"f_middle.01.L":e.bone="leftMiddleProximal";break;case"f_ring.03.L":e.bone="leftRingDistal";break;case"f_ring.02.L":e.bone="leftRingIntermediate";break;case"f_ring.01.L":e.bone="leftRingProximal";break;case"shoulder.L":e.bone="leftShoulder";break;case"thumb_distal.L":e.bone="leftThumbDistal";break;case"thumb_intermediate.L":e.bone="leftThumbIntermediate";break;case"thumb_proximal.L":e.bone="leftThumbProximal";break;case"toe.L":e.bone="leftToes";break;case"upper_arm.L":e.bone="leftUpperArm";break;case"thigh.L":e.bone="leftUpperLeg";break;case"eye.R":e.bone="rightEye";break;case"foot.R":e.bone="rightFoot";break;case"hand.R":e.bone="rightHand";break;case"f_index.03.R":e.bone="rightIndexDistal";break;case"f_index.02.R":e.bone="rightIndexIntermediate";break;case"f_index.01.R":e.bone="rightIndexProximal";break;case"f_pinky.03.R":e.bone="rightLittleDistal";break;case"f_pinky.02.R":e.bone="rightLittleIntermediate";break;case"f_pinky.01.R":e.bone="rightLittleProximal";break;case"lower_arm.R":e.bone="rightLowerArm";break;case"shin.R":e.bone="rightLowerLeg";break;case"f_middle.03.R":e.bone="rightMiddleDistal";break;case"f_middle.02.R":e.bone="rightMiddleIntermediate";break;case"f_middle.01.R":e.bone="rightMiddleProximal";break;case"f_ring.03.R":e.bone="rightRingDistal";break;case"f_ring.02.R":e.bone="rightRingIntermediate";break;case"f_ring.01.R":e.bone="rightRingProximal";break;case"shoulder.R":e.bone="rightShoulder";break;case"thumb_distal.R":e.bone="rightThumbDistal";break;case"thumb_intermediate.R":e.bone="rightThumbIntermediate";break;case"thumb_proximal.R":e.bone="rightThumbProximal";break;case"toe.R":e.bone="rightToes";break;case"upper_arm.R":e.bone="rightUpperArm";break;case"thigh.R":e.bone="rightUpperLeg";break;case"upper_chest":e.bone="upperChest";break;default:e.bone=null}if(e.bone&&4==e.rotation.length)try{N.humanoid.getBoneNode(e.bone).position.set(e.position[0],e.position[1],-e.position[2]),N.humanoid.getBoneNode(e.bone).quaternion.set(-e.rotation[0],-e.rotation[1],e.rotation[2],e.rotation[3])}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}}if(G.length>0){const t={};let i=0;if(null===Y){if(null!==K)if(K.time-=e,K.time<=0){for(const e in K.bones)t[e]={direction:K.bones[e].direction,force:K.bones[e].base};K=null}else for(const e in K.bones)t[e]={direction:K.bones[e].direction,force:K.bones[e].base+K.bones[e].source+K.time/K.duration*(K.bones[e].target-K.bones[e].source-K.bones[e].base)}}else if(null===K){let e=null,i=0;for(const t of N.springBoneManager.springBoneGroupList)for(const n of t)i===Y.index&&(e=n.bone.getWorldPosition(new s.Lb)),i++;if(null!==e){const n=.25;i=0,K={time:0,duration:.5,center:e,bones:{}};for(const a of N.springBoneManager.springBoneGroupList)for(const o of a)e.distanceTo(o.bone.getWorldPosition(new s.Lb))<=n&&(K.bones[i]={direction:new s.Lb(Y.direction.x,Y.direction.y,0),base:o.gravityPower-G[i].gravityPower,source:0,target:-Math.min(.01*Y.distance*Math.cos(e.distanceTo(o.bone.getWorldPosition(new s.Lb))/n),5)},t[i]={direction:K.bones[i].direction,force:K.bones[i].source}),i++}}else if(K.time+=e,K.time>=K.duration){const e=.25;let i=0;for(const e in K.bones)t[e]={direction:K.bones[e].direction,force:K.bones[e].target};K.time=0;for(const t of N.springBoneManager.springBoneGroupList)for(const n of t)i in K.bones&&(K.bones[i].direction=new s.Lb(Y.direction.x,Y.direction.y,0),K.bones[i].source=K.bones[i].target,K.bones[i].target=-Math.min(.01*Y.distance*Math.cos(K.center.distanceTo(n.bone.getWorldPosition(new s.Lb))/e),5)),i++}else for(const e in K.bones)t[e]={direction:K.bones[e].direction,force:K.bones[e].base+K.bones[e].source+K.time/K.duration*(K.bones[e].target-K.bones[e].source-K.bones[e].base)};if(null===X){let e=0;X={time:0,duration:1,direction:new s.Lb(1,0,0),force:.01*(Math.random()-.5),sources:{}};for(const i of N.springBoneManager.springBoneGroupList)for(const s of i)e in t==!1&&(X.sources[e]=s.gravityPower-G[e].gravityPower),e++}else if(X.time+=e,X.time>=X.duration){for(const e in X.sources)e in t==!1&&(t[e]={direction:X.direction,force:X.force});X=null}else for(const e in X.sources)e in t==!1&&(t[e]={direction:X.direction,force:X.sources[e]+X.time/X.duration*(X.force-X.sources[e])});for(const e of N.springBoneManager.springBoneGroupList)for(const n of e){if(i in t){const e=new s.Lb(G[i].gravityDir.x+t[i].direction.x,G[i].gravityDir.y+t[i].direction.y,G[i].gravityDir.z+t[i].direction.z);n.gravityDir=e.normalize(),n.gravityPower=G[i].gravityPower+t[i].force}i++}}N.update(e)}M.update(),A.render(e),C.update()}},updated:function(){this.insetTop=this.$refs.indicator.getBoundingClientRect().height,this.insetBottom=this.$refs.blank.getBoundingClientRect().height;for(const e of document.body.querySelectorAll(".container>.wrap>.frame .clip")){let t=0;for(const i of e.querySelectorAll(":scope .ticker-wrap .ticker .item"))t+=i.getBoundingClientRect().width;t>0&&(this.tickerWidth=Math.min(t/2,document.body.querySelector(".container>.wrap>.frame .level").getBoundingClientRect().width),e.querySelector(":scope .ticker-wrap .ticker").style.width=t+"px")}},mounted:async function(){const e=this,t=localStorage.getItem("character"),i=localStorage.getItem("credential");let s=null;const a=[{path:"/assets/milch.json",probability:.9},{path:"/assets/merku.json",probability:.1}],o=new n.a;if(t)try{const e=JSON.parse(t);null!==e&&(this.isMuted=e.mute)}catch(e){localStorage.removeItem("character")}if(i)try{s=JSON.parse(i)}catch(e){localStorage.removeItem("credential")}this.$refs.three.appendChild(I.domElement),this.$refs.three.after(C.domElement),this.animate(),this.insetTop=this.$refs.indicator.getBoundingClientRect().height,this.insetBottom=this.$refs.blank.getBoundingClientRect().height;try{const e=await fetch(function(e,t){const i=Math.random();let s=0,n=0;for(let a of e){const e=t(a);if(s<=i&&i<s+e)break;s+=e,n++}return e[n]}(a,e=>e.probability).path,{mode:"cors",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!e.ok)throw new Error(e.statusText);this.character=await e.json()}catch(e){this.notify({text:e.message,accent:this.character.accent,image:this.character.image}),console.error(e)}this.sequenceQueue.push(this.prepare(this.character.sequences.filter(e=>"Start"===e.name))),o.crossOrigin="anonymous",o.load(await L.ref().child(this.character.model).getDownloadURL(),t=>{y.a.from(t).then(async t=>{const i={idle1:"/assets/animation-idle1.json",idle2:"/assets/animation-idle2.json",jump:"/assets/animation-jump.json",lose:"/assets/animation-lose.json",win:"/assets/animation-win.json"};let s={};try{for(let e in i){const t=await fetch(encodeURI(i[e]),{mode:"cors",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!t.ok)throw new Error(t.statusText);{const i=await t.json();s[e]=i.data}}e.animations=s,N=t,D.add(t.scene),t.scene.rotation.y=Math.PI,t.lookAt.target=R,G.splice(0);for(const e of N.springBoneManager.springBoneGroupList)for(const t of e)G.push({gravityDir:t.gravityDir.clone(),gravityPower:t.gravityPower});e.progress=null}catch(t){e.notify({text:t.message,accent:e.character.accent,image:e.character.image}),console.error(t)}})},t=>e.progress=t.loaded/t.total,e=>console.error(e)),null!==s&&(s.providerId===firebase.auth.GoogleAuthProvider.PROVIDER_ID?firebase.auth().signInWithCredential(firebase.auth.GoogleAuthProvider.credential(s.idToken)).catch(e=>{console.error(e.code,e.message)}):s.providerId===firebase.auth.FacebookAuthProvider.PROVIDER_ID?firebase.auth().signInWithCredential(firebase.auth.FacebookAuthProvider.credential(s.accessToken)).catch(e=>{console.error(e.code,e.message)}):s.providerId===firebase.auth.TwitterAuthProvider.PROVIDER_ID&&firebase.auth().signInWithCredential(firebase.auth.TwitterAuthProvider.credential(s.accessToken,s.secret)).catch(e=>{console.error(e.code,e.message)})),firebase.auth().onAuthStateChanged((function(t){t?(e.user=t,k.ref("bot/feed").limitToLast(100).on("value",e=>{if(e.exists()){const t=e.val();let i=Object.keys(t),s=null;i.length>ee.maxMessages&&i.splice(0,i.length-ee.maxMessages),ee.feedQueue.splice(0);for(let e of i){const i=t[e],n=1e3*i.timestamp;let a=-1;for(let t=0;t<ee.messages.length;t++)if(e===ee.messages[t].id){a=t;break}if(i.user.accent||(i.user.accent="#30c0f5"),a>=0){const t={id:e,text:i.text,thread:i.thread,timestamp:new Date(n),user:i.user};ee.messages[a]=t}else{for(let e=0;e<ee.messages.length;e++)n<Math.floor(ee.messages[e].timestamp)&&(a=e);ee.messages.splice(a>=0?a:ee.messages.length,0,{id:e,text:i.text,thread:i.thread,timestamp:new Date(n),user:i.user}),ee.messages.length>ee.maxMessages&&ee.messages.shift(),ee.user.uid!==i.user.id&&(s=i.user)}ee.feedQueue.unshift(i)}for(let e=ee.messages.length-1;e>=0;e--)ee.messages[e].id in t||ee.messages.splice(e,1);s&&s.id,ee.feedQueue.push(ee.feedQueue.shift())}})):(k.ref("bot/feed").off("value"),e.user=null,e.stars=0),k.ref("bot/images").limitToLast(100).on("value",t=>{if(t.exists()){const i=t.val();let s=!1;for(const t in i)if(!e.recentImages.some(e=>e.id===t&&e.timestamp===i[t].timestamp)){s=!0;break}if(s){e.recentImages.splice(0);for(const t in i)i[t].id=t,e.recentImages.push(i[t]);e.update(e.recentImages,e.maxTags),e.isBlinded=!0}}}),k.ref("bot/stars").on("value",t=>{const i=t.val();e.stars=null===i?0:i}),k.ref("bot/words").orderByChild("timestamp").limitToLast(10).on("value",t=>{if(t.exists()){const i=t.val();let s=[],n=0;for(const e in i)s.push({name:e,timestamp:i[e].timestamp});for(const t of e.prepare(e.character.sequences.filter(e=>"Alert"===e.name),10))"Message"===t.type&&(e.words.splice(n,0,{name:t.text,image:e.character.image}),n++);for(const t of s.sort((e,t)=>t.timestamp-e.timestamp)){let i=-1;for(let s=0;s<e.words.length;s++)if(e.words[s].name==t.name){i=s;break}i>=0?(e.words[i].timestamp<t.timestamp&&(t.name in e.wordDictionary&&delete e.wordDictionary[t.name],Object.keys(e.reverseWordDictionary).forEach(i=>{e.reverseWordDictionary[i].words.some(e=>e===t.name)&&delete e.reverseWordDictionary[i]})),e.words.splice(i,1)):(t.name in e.wordDictionary&&delete e.wordDictionary[t.name],Object.keys(e.reverseWordDictionary).forEach(i=>{e.reverseWordDictionary[i].words.some(e=>e===t.name)&&delete e.reverseWordDictionary[i]})),e.words.splice(n,0,t),n++}for(let t=e.words.length-1;t>=n;t--)e.words.splice(t,1)}})}))},unmounted:function(){"number"==typeof this.tickIntervalID&&clearInterval(this.tickIntervalID),null!==N&&(D.remove(N.scene),N=null)}}).mount("#app");window.addEventListener("load",e=>{"serviceWorker"in navigator&&(navigator.serviceWorker.register("sw.js").then(e=>{e.onupdatefound=function(){e.update()}}).catch(e=>{console.error(e.code,e.message)}),navigator.serviceWorker.addEventListener("message",e=>{null!==navigator.serviceWorker.controller&&"command"in e.data&&"caches"===e.data.command&&navigator.serviceWorker.controller.postMessage({command:"clear",caches:e.data.caches})}))}),window.addEventListener("resize",e=>{ee.insetTop=ee.$refs.indicator.getBoundingClientRect().height,ee.insetBottom=ee.$refs.blank.getBoundingClientRect().height,ee.$nextTick(()=>{for(const e of document.body.querySelectorAll(".container>.wrap>.frame .clip")){let t=0;for(const i of e.querySelectorAll(":scope .ticker-wrap .ticker .item"))t+=i.getBoundingClientRect().width;t>0&&(ee.tickerWidth=Math.min(t/2,document.body.querySelector(".container>.wrap>.frame .level").getBoundingClientRect().width),e.querySelector(":scope .ticker-wrap .ticker").style.width=t+"px")}})}),window.addEventListener("click",e=>{const t=ee.$refs.three,i=e.clientX-t.offsetLeft-(window.innerWidth-t.offsetWidth),s=e.clientY-t.offsetTop-(window.innerHeight-t.offsetHeight),n=t.offsetWidth,a=t.offsetHeight;Q.x=i/n*2-1,Q.y=-s/a*2+1,$.setFromCamera(Q,T);const o=$.intersectObjects(D.children,!0);for(let e of o){if("face"===e.object.name)break;if(e.object.name.indexOf("breast")>=0)break}}),window.addEventListener("dblclick",e=>{const t=ee.$refs.three,i=e.clientX-t.offsetLeft-(window.innerWidth-t.offsetWidth),s=e.clientY-t.offsetTop-(window.innerHeight-t.offsetHeight),n=t.offsetWidth,a=t.offsetHeight;Q.x=i/n*2-1,Q.y=-s/a*2+1,$.setFromCamera(Q,T),$.intersectObjects(D.children,!0).length>0&&ee.activate()}),window.addEventListener("keydown",e=>{e.ctrlKey&&(M.enabled=!0)}),window.addEventListener("keyup",e=>{M.enabled=!1}),window.addEventListener("mousedown",e=>{if(!M.enabled&&0===e.button){let t=Number.MAX_SAFE_INTEGER,i=null;const n=ee.$refs.three,a=e.clientX-n.offsetLeft-(window.innerWidth-n.offsetWidth),o=e.clientY-n.offsetTop-(window.innerHeight-n.offsetHeight),r=n.offsetWidth,c=n.offsetHeight;Q.x=a/r*2-1,Q.y=-o/c*2+1,$.setFromCamera(Q,T);for(let e of $.intersectObjects(D.children,!0))e.distance<t&&(i=e,t=e.distance);if(null!==i){let e=0;Y={point:{x:a,y:o},direction:{x:0,y:0},distance:0,index:-1},t=Number.MAX_SAFE_INTEGER;for(const n of N.springBoneManager.springBoneGroupList)for(const a of n){const n=a.bone.getWorldPosition(new s.Lb).distanceTo(i.point);n<t&&(Y.index=e,t=n),e++}null!==ee.character&&ee.sequenceQueue.push(ee.prepare(ee.character.sequences.filter(e=>"TouchStart"===e.name),i.object.name))}}}),window.addEventListener("mousemove",e=>{const t=ee.$refs.three,i=e.clientX-t.offsetLeft-(window.innerWidth-t.offsetWidth),n=e.clientY-t.offsetTop-(window.innerHeight-t.offsetHeight),a=t.offsetWidth,o=t.offsetHeight;if(Q.x=i/a*2-1,Q.y=-n/o*2+1,!M.enabled&&0===e.button&&(J={time:0,duration:.5,source:{x:R.position.x,y:R.position.y},target:{x:(i-.5*a)/a*10,y:(n-.5*o)/o*-10}},null!==Y)){const e=new s.Kb(Y.point.x-i,n-Y.point.y);Y.direction=e.normalize(),Y.distance=Math.sqrt((Y.point.x-i)*(Y.point.x-i)+(Y.point.y-n)*(Y.point.y-n))}}),window.addEventListener("mouseup",e=>{M.enabled||0!==e.button||(Y=null,null!==ee.character&&ee.sequenceQueue.push(ee.prepare(ee.character.sequences.filter(e=>"TouchEnd"===e.name))))}),window.addEventListener("touchstart",e=>{e.stopPropagation();const t=ee.$refs.three,i=e.changedTouches[0].clientX-t.offsetLeft-(window.innerWidth-t.offsetWidth),n=e.changedTouches[0].clientY-t.offsetTop-(window.innerHeight-t.offsetHeight),a=t.offsetWidth,o=t.offsetHeight;if(Q.x=i/a*2-1,Q.y=-n/o*2+1,$.setFromCamera(Q,T),0==Z){Z++,setTimeout(()=>{Z=0},500);let e=Number.MAX_SAFE_INTEGER,t=null;for(let i of $.intersectObjects(D.children,!0))i.distance<e&&(t=i,e=i.distance);if(null!==t){let a=0;Y={point:{x:i,y:n},direction:{x:0,y:0},distance:0,index:-1},e=Number.MAX_SAFE_INTEGER;for(const i of N.springBoneManager.springBoneGroupList)for(const n of i){const i=n.bone.getWorldPosition(new s.Lb).distanceTo(t.point);i<e&&(Y.index=a,e=i),a++}null!==ee.character&&ee.sequenceQueue.push(ee.prepare(ee.character.sequences.filter(e=>"TouchStart"===e.name),t.object.name))}J={time:0,duration:.5,source:{x:R.position.x,y:R.position.y},target:{x:(i-.5*a)/a*10,y:(n-.5*o)/o*-10}}}else $.intersectObjects(D.children,!0).length>0&&ee.activate(),Z=0}),window.addEventListener("touchmove",e=>{e.stopPropagation();const t=ee.$refs.three,i=e.changedTouches[0].clientX-t.offsetLeft-(window.innerWidth-t.offsetWidth),s=e.changedTouches[0].clientY-t.offsetTop-(window.innerHeight-t.offsetHeight),n=t.offsetWidth,a=t.offsetHeight;J={time:0,duration:.5,source:{x:R.position.x,y:R.position.y},target:{x:(i-.5*n)/n*10,y:(s-.5*a)/a*-10}}}),window.addEventListener("touchend",e=>{e.stopPropagation();const t=ee.$refs.three,i=e.changedTouches[0].clientX-t.offsetLeft-(window.innerWidth-t.offsetWidth),s=e.changedTouches[0].clientY-t.offsetTop-(window.innerHeight-t.offsetHeight),n=t.offsetWidth,a=t.offsetHeight;J={time:0,duration:.5,source:{x:R.position.x,y:R.position.y},target:{x:(i-.5*n)/n*10,y:(s-.5*a)/a*-10}},null!==ee.character&&ee.sequenceQueue.push(ee.prepare(ee.character.sequences.filter(e=>"TouchEnd"===e.name)))}),window.addEventListener("touchcancel",e=>{e.stopPropagation()}),window.addEventListener("dragover",e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},!1),window.addEventListener("drop",e=>{e.stopPropagation(),e.preventDefault();for(let t of e.dataTransfer.files){const e=t.name.toLowerCase();if(e.endsWith(".vrm")){let e=new FileReader;e.addEventListener("load",e=>{const t=new n.a;t.crossOrigin="anonymous",t.load(e.target.result,e=>{y.a.from(e).then(e=>{null!==N&&D.remove(N.scene),N=e,D.add(e.scene),e.scene.rotation.y=Math.PI,e.lookAt.target=R,G.splice(0);for(const e of N.springBoneManager.springBoneGroupList)for(const t of e)G.push({gravityDir:t.gravityDir.clone(),gravityPower:t.gravityPower});ee.progress=null})},e=>ee.progress=e.loaded/e.total,e=>console.error(e))}),e.readAsDataURL(t)}else if(e.endsWith(".json")){let e=new FileReader;e.addEventListener("load",e=>{try{ee.character=JSON.parse(e.target.result)}catch(e){return ee.notify({text:error.message,accent:ee.character.accent,image:ee.character.image}),void console.error(e)}ee.sequenceQueue.splice(0),ee.sequenceQueue.push(ee.prepare(ee.character.sequences.filter(e=>"Start"===e.name)))}),e.readAsText(t)}}},!1),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?ee.isDarkMode=!0:ee.isDarkMode=!1})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbWFpbi5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsImRhdGEiLCJtb2R1bGVJZCIsImNodW5rSWQiLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwiZXhlY3V0ZU1vZHVsZXMiLCJpIiwicmVzb2x2ZXMiLCJsZW5ndGgiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJwdXNoIiwibW9kdWxlcyIsInBhcmVudEpzb25wRnVuY3Rpb24iLCJzaGlmdCIsImRlZmVycmVkTW9kdWxlcyIsImFwcGx5IiwiY2hlY2tEZWZlcnJlZE1vZHVsZXMiLCJyZXN1bHQiLCJkZWZlcnJlZE1vZHVsZSIsImZ1bGZpbGxlZCIsImoiLCJkZXBJZCIsInNwbGljZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIjAiLCJleHBvcnRzIiwibW9kdWxlIiwibCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwIiwianNvbnBBcnJheSIsIndpbmRvdyIsIm9sZEpzb25wRnVuY3Rpb24iLCJzbGljZSIsImZpcmViYXNlIiwiaW5pdGlhbGl6ZUFwcCIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInByb2plY3RJZCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsImFwcElkIiwibWVhc3VyZW1lbnRJZCIsImFuYWx5dGljcyIsImRlYnVnIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwibG9jYXRpb24iLCJoYXNoIiwic3Vic3RyaW5nIiwiZGF0YWJhc2UiLCJzdG9yYWdlIiwicmVuZGVyZXIiLCJhbnRpYWxpYXMiLCJhbHBoYSIsInByZXNlcnZlRHJhd2luZ0J1ZmZlciIsInNldENsZWFyQ29sb3IiLCJ0b25lTWFwcGluZ0V4cG9zdXJlIiwidG9uZU1hcHBpbmciLCJvdXRwdXRFbmNvZGluZyIsImNhbWVyYSIsImRvbUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwic2V0IiwiY29udHJvbHMiLCJlbmFibGVkIiwiZW5hYmxlS2V5cyIsInNjcmVlblNwYWNlUGFubmluZyIsImVuYWJsZURhbXBpbmciLCJtaW5Qb2xhckFuZ2xlIiwiTWF0aCIsIlBJIiwibWF4UG9sYXJBbmdsZSIsIm1pbkF6aW11dGhBbmdsZSIsIm1heEF6aW11dGhBbmdsZSIsIm1pbkRpc3RhbmNlIiwibWF4RGlzdGFuY2UiLCJ0YXJnZXQiLCJ1cGRhdGUiLCJzY2VuZSIsImxpZ2h0IiwiaGVtaXNwaGVyZUxpZ2h0IiwiaW50ZW5zaXR5Iiwibm9ybWFsaXplIiwiYWRkIiwibG9va0F0VGFyZ2V0IiwiY29tcG9zZXIiLCJibG9vbVBhc3MiLCJodWVTYXR1cmF0aW9uIiwiYnJpZ2h0bmVzc0NvbnRyYXN0U2hhZGVyIiwiZWZmZWN0Q29weSIsInZpZ25ldHRlIiwiY29sb3JDb3JyZWN0aW9uIiwicmdiU2hpZnQiLCJmeGFhU2hhZGVyIiwicmVuZGVyVG9TY3JlZW4iLCJ0aHJlc2hvbGQiLCJzdHJlbmd0aCIsInJhZGl1cyIsInVuaWZvcm1zIiwiaHVlIiwic2F0dXJhdGlvbiIsImNvbnRyYXN0IiwibXVsUkdCIiwicG93UkdCIiwiYW1vdW50IiwiYW5nbGUiLCJkYXJrbmVzcyIsIm9mZnNldCIsInJlc29sdXRpb24iLCJkZXZpY2VQaXhlbFJhdGlvIiwic2V0U2l6ZSIsInNldFBpeGVsUmF0aW8iLCJhZGRQYXNzIiwic3RhdHMiLCJzdHlsZSIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsImNsYXNzTGlzdCIsImNsb2NrIiwicmF5Y2FzdGVyIiwibW91c2UiLCJ2cm1Nb2RlbCIsInZybVNwcmluZ0JvbmVzIiwiYW5pbWF0aW9uSW5kZXgiLCJpZGxlVGltZSIsImFjdGl2YXRlVGltZSIsImxvb2tBbmltYXRpb24iLCJyYW5kb21XaW5kIiwiZHJhZ2dhYmxlQm9uZSIsImRyYWdnaW5nQm9uZXMiLCJ0YXBDb3VudCIsImFwcCIsIlZ1ZSIsImNyZWF0ZUFwcCIsImlzRGVidWciLCJpc0RhcmtNb2RlIiwiaXNNdXRlZCIsImlzTG9hZGluZyIsImlzUmV2ZWFsZWQiLCJpc092ZXJsYXllZCIsImlzVXBkYXRpbmciLCJpc0JsaW5kZWQiLCJpc1BvcHVwIiwiaXNFeHBhbmRlZCIsImlzTGVhcm5pbmciLCJpc0FuaW1hdGluZyIsImlzSGFuZ2luZ09uIiwiaXNTdWJtaXR0aW5nIiwiaXNTdGFyZWQiLCJmZWVkUXVldWUiLCJzZXF1ZW5jZVF1ZXVlIiwicHJvZ3Jlc3MiLCJ1c2VyIiwiaW5wdXQiLCJhbmltYXRlZElucHV0TGVuZ3RoIiwibWF4SW5wdXRMZW5ndGgiLCJpbnB1dEhhc0Vycm9yIiwibWVzc2FnZXMiLCJtYXhNZXNzYWdlcyIsIndvcmQiLCJ3b3JkcyIsInRhZ3MiLCJtYXhUYWdzIiwic2Nyb2xsVGltZW91dElEIiwidW5kZWZpbmVkIiwidGlja0ludGVydmFsSUQiLCJzdGFycyIsImFuaW1hdGVkU3RhcnMiLCJzY3JlZW5zaG90Iiwibm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbkhlaWdodCIsImFuaW1hdGVkTm90aWZpY2F0aW9uSGVpZ2h0IiwicmVjZW50SW1hZ2VzIiwiYmFja2dyb3VuZEltYWdlc1F1ZXVlIiwiYmFja2dyb3VuZEltYWdlcyIsInByZWxvYWRJbWFnZXMiLCJpc1VwbG9hZGluZyIsImFuaW1hdGlvbnMiLCJjdXJyZW50QW5pbWF0aW9ucyIsImJsZW5kU2hhcGVBbmltYXRpb25zIiwiaW5zZXRUb3AiLCJpbnNldEJvdHRvbSIsInRleHQiLCJwb3B1cFRleHRIZWlnaHQiLCJhbmltYXRlZFBvcHVwVGV4dEhlaWdodCIsInRpY2tlcldpZHRoIiwiYW5pbWF0ZWRUaWNrZXJXaWR0aCIsIm1lc3NhZ2UiLCJzdGF0ZXMiLCJjaGFyYWN0ZXIiLCJ3b3JkRGljdGlvbmFyeSIsInJldmVyc2VXb3JkRGljdGlvbmFyeSIsImF0dHJpYnV0ZXMiLCJ3YXRjaCIsIm5ld1ZhbHVlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtdXRlIiwiZSIsInJlbW92ZUl0ZW0iLCJoYW5kbGVyIiwiJG5leHRUaWNrIiwiY2xpcCIsImRvY3VtZW50IiwiYm9keSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibWluIiwicXVlcnlTZWxlY3RvciIsImRlZXAiLCJzZWxmIiwidGhpcyIsIm9iaiIsInRhcmdldHMiLCJyb3VuZCIsImR1cmF0aW9uIiwiZWFzaW5nIiwiZWxlbWVudHMiLCJmcmFtZVJhdGUiLCJpbmRleCIsInN0YXJ0VGltZSIsImtleWZyYW1lcyIsInZpc2liaWxpdHkiLCJhbmltYXRpb24iLCJhbmltYXRlIiwiZmlsbCIsIml0ZXJhdGlvbnMiLCJJbmZpbml0eSIsIiRyZWZzIiwicG9wdXBUZXh0IiwiY291bnQiLCJtZXRob2RzIiwic2lnbkluIiwiZXZlbnQiLCJhdXRoIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwiUFJPVklERVJfSUQiLCJzaWduSW5XaXRoUG9wdXAiLCJ0aGVuIiwiY3JlZGVudGlhbCIsInByb3ZpZGVyRGF0YSIsImN1cnJlbnRVc2VyIiwidXBkYXRlUHJvZmlsZSIsImRpc3BsYXlOYW1lIiwicGhvdG9VUkwiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImNvZGUiLCJwcm92aWRlcklkIiwiYWNjZXNzVG9rZW4iLCJpZFRva2VuIiwiRmFjZWJvb2tBdXRoUHJvdmlkZXIiLCJwcm92aWRlciIsImFkZFNjb3BlIiwiVHdpdHRlckF1dGhQcm92aWRlciIsInBob3RvVXJsIiwicmVwbGFjZSIsInNlY3JldCIsInNpZ25PdXQiLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwiY29udHJvbGxlciIsInBvc3RNZXNzYWdlIiwiY29tbWFuZCIsInJlZnJlc2giLCJzZW5kIiwiYXN5bmMiLCJrZXlzIiwidG9rZW4iLCJzcGxpdCIsInNvbWUiLCJ4IiwiaWQiLCJyZWYiLCJkYXRhYmFzZVJvb3QiLCJ0cmFuc2FjdGlvbiIsImltYWdlIiwibGVhcm4iLCJzaGFrZSIsImNoYW5nZSIsInVwbG9hZCIsImdlbmVyYXRlVXVpZCIsImNoYXJzIiwibGVuIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsImpvaW4iLCJzdG9yYWdlUmVmIiwiZmlsZXMiLCJwYXRocyIsImZpbGUiLCJzb3J0IiwieSIsInVwbG9hZFRhc2siLCJjaGlsZCIsInB1dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib24iLCJzbmFwc2hvdCIsImJ5dGVzVHJhbnNmZXJyZWQiLCJ0b3RhbEJ5dGVzIiwibm90aWZ5IiwiYWNjZW50IiwiZnVsbFBhdGgiLCJ0aW1lc3RhbXAiLCJEYXRlIiwiY2hlY2siLCJhdHRyaWJ1dGUiLCJkYXRhc2V0IiwiY2hlY2tlZCIsInNoYXJlIiwiZm9yRWFjaCIsImN1cnJlbnQiLCJ1cGRhdGVSZXF1aXJlZCIsImRlbGV0ZVJlcXVpcmVkIiwiY29tbWl0dGVkIiwiZXhpc3RzIiwiZGljdGlvbmFyeSIsInZhbCIsInRpbWVzdGFtcHMiLCJpbmNsdWRlcyIsImZvcm1hdCIsImFyZ3MiLCJhcmd1bWVudHMiLCJwYXJzZUludCIsInByZXBhcmUiLCJzZXF1ZW5jZXMiLCJmaWx0ZXIiLCJ0eXBlIiwic2V0VGltZW91dCIsInR3aW5rbGUiLCJwbGF5Iiwic2VxdWVuY2UiLCJvbmNlIiwidyIsInNwZWVkIiwiYWN0aXZhdGUiLCJ0b2tlbnMiLCJ0YWxrIiwidGltZW91dCIsInRlbXBTdGF0ZXMiLCJhc3NpZ24iLCJzZWdtZW50ZXIiLCJUaW55U2VnbWVudGVyIiwidG9rZW5TZXQiLCJhcnJheSIsImEiLCJjb25jYXQiLCJrIiwibWF4IiwiY2VpbCIsInRlbXAiLCJzaHVmZmxlIiwicHJlcGFyZWRTZXF1ZW5jZSIsImlzQWJvcnRlZCIsIkFycmF5IiwiaXNBcnJheSIsInNlZ21lbnQiLCJnZW5lcmF0ZSIsImNhY2hlIiwiaGludHMiLCJzb2Z0bWF4IiwiTnVtYmVyIiwiTUlOX1ZBTFVFIiwic3VtIiwiZXhwIiwiaGludERpY3Rpb25hcnkiLCJyZWdleCIsIlJlZ0V4cCIsImNhY2hEaWN0aW9uYXJ5IiwiZXBzaWxvbiIsInBvdyIsInNjb3JlIiwidGVybXMiLCJzY29yZXMiLCJpc05ldyIsInRhZyIsIm9yZGVyQnlDaGlsZCIsImxpbWl0VG9MYXN0Iiwic3RhcnRBdCIsInByb2JhYmlsaXRpZXMiLCJjYW5kaWRhdGVzIiwidGVybSIsImNhbmRpZGF0ZSIsInRha2UiLCJ0ZXN0IiwicHJvYmFiaWxpdHkiLCJjaG9pY2UiLCJtYXAiLCJ1bnNoaWZ0IiwiYmxpbmRlZCIsInBhdGgiLCJ1cmwiLCJnZXREb3dubG9hZFVSTCIsImluZGV4T2YiLCJsb2FkIiwiaXNDb21wbGV0ZWQiLCJpc0xvYWRlZCIsInJlc3VsdHMiLCJkb2N1bWVudHMiLCJmaWx0ZXJlZERvY3VtZW50cyIsInRlcm1GcmVxdWVuY2llcyIsImludmVyc2VEb2N1bWVudEZyZXF1ZW5jeSIsImJhc2VUaW1lIiwiZ2V0VGltZSIsInNjb3JlRGljdGlvbmFyeSIsIm1heFNjb3JlIiwidGVybVNldCIsImxvZyIsInRmIiwidGVybUZyZXF1ZW5jeSIsInRmaWRmIiwidHJhbnNmb3JtIiwic2Nyb2xsIiwic2Nyb2xsVG9FbmQiLCJjbGVhclRpbWVvdXQiLCJzY3JvbGxUbyIsInNjcm9sbEhlaWdodCIsImZvcm1hdERhdGUiLCJtb21lbnQiLCJsb2NhbGUiLCJsYW5ndWFnZSIsImFuaW1hdGlvblN0YXJ0IiwiZWwiLCJhbmltYXRpb25FbmQiLCJ0aWNrZXJVcGRhdGVkIiwiYXJyYW5nZSIsImNvbGxlY3Rpb24iLCJsaW1pdCIsInJvd3MiLCJjb2x1bW5zIiwiaXRlbSIsInN0YXRlIiwic2VsZWN0ZWRTZXF1ZW5jZXMiLCJfcmFuZG9tIiwiY2hvb3NlZFNlcXVlbmNlcyIsImZsYXR0ZW5lZFNlcXVlbmNlIiwidGVtcFN0YXRlIiwicXVldWUiLCJ0cmFjZWRTZXF1ZW5jZXMiLCJjYWxsYWJsZVNlcXVlbmNlcyIsInNlcXVlbmNlU3RhY2siLCJnZXRTZXF1ZW5jZVN0YWNrIiwic3RhY2siLCJwb3BwZWRTZXF1ZW5jZSIsInBvcCIsInRlbXBTdGFjayIsInRlbXBTZXF1ZW5jZSIsInNvdXJjZVNlcXVlbmNlIiwidGFyZ2V0U2VxdWVuY2UiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkZWx0YVRpbWUiLCJnZXREZWx0YSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiYXNwZWN0IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsImlzRGVmb3JtaW5nIiwiYW5pbWF0aW9uRGF0YSIsInVwZGF0ZWRCbGVuZFNoYXBlTmFtZXMiLCJ0aW1lIiwiYmFzZSIsInNvdXJjZSIsInJhdGUiLCJibGlua09mZnNldCIsImJsaW5rUmVxdWlyZWQiLCJibGVuZFNoYXBlQW5pbWF0aW9uIiwiYmxlbmRTaGFwZVByb3h5Iiwic2V0VmFsdWUiLCJhYnMiLCJzaW4iLCJlbmQiLCJzdGFydCIsImlzRGVwZW5kZW5jeSIsImRlcGVuZGVuY2llcyIsIm5hbWVTZXQiLCJlbGFwc2VkIiwicmV2ZXJzZSIsImJ1ZmZlciIsInJlc3BvbnNlIiwiZmV0Y2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJwbGF5ZXIiLCJzcmMiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJibG9iIiwiY3VycmVudFRpbWUiLCJjaGFyQXQiLCJjaGFyYWN0ZXJzIiwiY2hhckFycmF5IiwicmFuZG9tQnVmZmVyIiwibWF0Y2giLCJib25lIiwicm90YXRpb24iLCJodW1hbm9pZCIsImdldEJvbmVOb2RlIiwicXVhdGVybmlvbiIsIm1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5IiwiYm9uZXMiLCJkaXJlY3Rpb24iLCJmb3JjZSIsImJvbmVQb3NpdGlvbiIsInNwcmluZ0JvbmVJbmRleCIsInNwcmluZ0JvbmVHcm91cCIsInNwcmluZ0JvbmVNYW5hZ2VyIiwic3ByaW5nQm9uZUdyb3VwTGlzdCIsInNwcmluZ0JvbmUiLCJnZXRXb3JsZFBvc2l0aW9uIiwicmFuZ2UiLCJjZW50ZXIiLCJkaXN0YW5jZVRvIiwiZ3Jhdml0eVBvd2VyIiwiZGlzdGFuY2UiLCJjb3MiLCJzb3VyY2VzIiwidmVjdG9yIiwiZ3Jhdml0eURpciIsInoiLCJyZW5kZXIiLCJ1cGRhdGVkIiwiaW5kaWNhdG9yIiwiYmxhbmsiLCJtb3VudGVkIiwiY2hhcmFjdGVyU3RvcmFnZUl0ZW0iLCJnZXRJdGVtIiwiY3JlZGVudGlhbFN0b3JhZ2VJdGVtIiwibG9hZGVyIiwicGFyc2UiLCJ0aHJlZSIsImFwcGVuZENoaWxkIiwiYWZ0ZXIiLCJmdW5jIiwianNvbiIsImNyb3NzT3JpZ2luIiwibW9kZWwiLCJnbHRmIiwiZnJvbSIsInZybSIsInVybHMiLCJpZGxlMSIsImlkbGUyIiwianVtcCIsImxvc2UiLCJ3aW4iLCJhbmltYXRpb25EaWN0aW9uYXJ5IiwicmVzcG9uc2UzIiwiZW5jb2RlVVJJIiwibG9va0F0IiwiY2xvbmUiLCJsb2FkZWQiLCJ0b3RhbCIsInNpZ25JbldpdGhDcmVkZW50aWFsIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwibWVzc2FnZURpY3Rpb25hcnkiLCJyZWNlaXZlZCIsInRocmVhZCIsInVpZCIsIm9mZiIsImltYWdlcyIsImlzVXBkYXRlZCIsInRlbXBXb3JkcyIsInJlbW92ZUluZGV4IiwidW5tb3VudGVkIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZSIsIm1vdW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlZ2lzdGVyIiwicmVnaXN0cmF0aW9uIiwib251cGRhdGVmb3VuZCIsImNhY2hlcyIsImNsaWVudFgiLCJvZmZzZXRMZWZ0IiwiaW5uZXJXaWR0aCIsIm9mZnNldFdpZHRoIiwiY2xpZW50WSIsIm9mZnNldFRvcCIsImlubmVySGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiaCIsInNldEZyb21DYW1lcmEiLCJpbnRlcnNlY3RzIiwiaW50ZXJzZWN0T2JqZWN0cyIsImNoaWxkcmVuIiwiaW50ZXJzZWN0IiwiY3RybEtleSIsImJ1dHRvbiIsIk1BWF9TQUZFX0lOVEVHRVIiLCJiZXN0SW50ZXJzZWN0IiwicG9pbnQiLCJzcXJ0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2hhbmdlZFRvdWNoZXMiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGFUcmFuc2ZlciIsImRyb3BFZmZlY3QiLCJ0b0xvd2VyQ2FzZSIsImVuZHNXaXRoIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJyZWFkQXNUZXh0IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FDaEJJLEVBQWNKLEVBQUssR0FDbkJLLEVBQWlCTCxFQUFLLEdBSUhNLEVBQUksRUFBR0MsRUFBVyxHQUNwQ0QsRUFBSUgsRUFBU0ssT0FBUUYsSUFDekJKLEVBQVVDLEVBQVNHLEdBQ2hCRyxPQUFPQyxVQUFVQyxlQUFlQyxLQUFLQyxFQUFpQlgsSUFBWVcsRUFBZ0JYLElBQ3BGSyxFQUFTTyxLQUFLRCxFQUFnQlgsR0FBUyxJQUV4Q1csRUFBZ0JYLEdBQVcsRUFFNUIsSUFBSUQsS0FBWUcsRUFDWkssT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBYUgsS0FDcERjLEVBQVFkLEdBQVlHLEVBQVlILElBS2xDLElBRkdlLEdBQXFCQSxFQUFvQmhCLEdBRXRDTyxFQUFTQyxRQUNkRCxFQUFTVSxPQUFUVixHQU9ELE9BSEFXLEVBQWdCSixLQUFLSyxNQUFNRCxFQUFpQmIsR0FBa0IsSUFHdkRlLElBRVIsU0FBU0EsSUFFUixJQURBLElBQUlDLEVBQ0lm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T3RlLE9BQVNRLEVBRXBCd0MsRUFBZWpJLE9BQU8sR0FFdEIsSUFBSyxNQUFNMmdCLEtBQW1CM1ksRUFBUzRZLGtCQUFrQkMsb0JBQ3JELElBQUssTUFBTUMsS0FBY0gsRUFDckIxWSxFQUFlN0ksS0FBSyxDQUFFb2lCLFdBQVlWLEVBQVdVLFdBQVdnQyxRQUFTckMsYUFBY0wsRUFBV0ssZUFJbEd6WSxHQUFJb0IsU0FBVyxRQUd0QkEsR0FBYXBCLEdBQUlvQixTQUFXQSxFQUFTMlosT0FBUzNaLEVBQVM0WixNQUN2RDFULEdBQVVDLFFBQVFELE1BQU1BLE1BR2pDMFcsRUFBT0UsY0FBYzlULFFBQ2xCLEdBQUluUyxFQUFLOGxCLFNBQVMsU0FBVSxDQUMvQixJQUFJQyxFQUFTLElBQUlDLFdBRWpCRCxFQUFPaEMsaUJBQWlCLE9BQVMzWCxJQUM3QixJQUNJckUsR0FBSTBELFVBQVlRLEtBQUt1VixNQUFNcFYsRUFBRTlILE9BQU90RixRQUN0QyxNQUFPb04sR0FJTCxPQUhBckUsR0FBSWlMLE9BQU8sQ0FBRTlILEtBQU1tRSxNQUFNOUQsUUFBUzBILE9BQVFsTCxHQUFJMEQsVUFBVXdILE9BQVE3QixNQUFPckosR0FBSTBELFVBQVUyRixhQUNyRjlCLFFBQVFELE1BQU1qRCxHQUtsQnJFLEdBQUltQixjQUFjN0osT0FBTyxHQUN6QjBJLEdBQUltQixjQUFjekssS0FBS3NKLEdBQUl5TSxRQUFRek0sR0FBSTBELFVBQVVnSixVQUFVQyxPQUFRM0QsR0FBaUIsVUFBWEEsRUFBRS9RLFVBRS9FK2xCLEVBQU9HLFdBQVcvVCxPQUkzQixHQUNIN1EsT0FBTzZrQixXQUFXLGdDQUFnQ3BDLGlCQUFpQixTQUFVM1gsSUFDckVBLEVBQUVnYSxRQUNGcmUsR0FBSUksWUFBYSxFQUVqQkosR0FBSUksWUFBYSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MDogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9qc1wiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbMTksMV0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyJztcclxuaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzJztcclxuaW1wb3J0IHsgRWZmZWN0Q29tcG9zZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vcG9zdHByb2Nlc3NpbmcvRWZmZWN0Q29tcG9zZXIuanMnO1xyXG5pbXBvcnQgeyBSZW5kZXJQYXNzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL3Bvc3Rwcm9jZXNzaW5nL1JlbmRlclBhc3MuanMnO1xyXG5pbXBvcnQgeyBVbnJlYWxCbG9vbVBhc3MgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vcG9zdHByb2Nlc3NpbmcvVW5yZWFsQmxvb21QYXNzLmpzJztcclxuaW1wb3J0IHsgU2hhZGVyUGFzcyB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9wb3N0cHJvY2Vzc2luZy9TaGFkZXJQYXNzLmpzJztcclxuaW1wb3J0IHsgSHVlU2F0dXJhdGlvblNoYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9zaGFkZXJzL0h1ZVNhdHVyYXRpb25TaGFkZXIuanMnO1xyXG5pbXBvcnQgeyBCcmlnaHRuZXNzQ29udHJhc3RTaGFkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vc2hhZGVycy9CcmlnaHRuZXNzQ29udHJhc3RTaGFkZXIuanMnO1xyXG5pbXBvcnQgeyBHYW1tYUNvcnJlY3Rpb25TaGFkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vc2hhZGVycy9HYW1tYUNvcnJlY3Rpb25TaGFkZXIuanMnO1xyXG5pbXBvcnQgeyBWaWduZXR0ZVNoYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9zaGFkZXJzL1ZpZ25ldHRlU2hhZGVyLmpzJztcclxuaW1wb3J0IHsgQ29sb3JDb3JyZWN0aW9uU2hhZGVyIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL3NoYWRlcnMvQ29sb3JDb3JyZWN0aW9uU2hhZGVyLmpzJztcclxuaW1wb3J0IHsgUkdCU2hpZnRTaGFkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vc2hhZGVycy9SR0JTaGlmdFNoYWRlci5qcyc7XHJcbmltcG9ydCB7IEZYQUFTaGFkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vc2hhZGVycy9GWEFBU2hhZGVyLmpzJztcclxuaW1wb3J0IHsgQ29weVNoYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9zaGFkZXJzL0NvcHlTaGFkZXIuanMnO1xyXG5pbXBvcnQgeyBWUk0gfSBmcm9tICdAcGl4aXYvdGhyZWUtdnJtJztcclxuaW1wb3J0ICogYXMgU3RhdHMgZnJvbSAnc3RhdHMuanMnXHJcbmltcG9ydCBhbmltZSBmcm9tICdhbmltZWpzL2xpYi9hbmltZS5lcy5qcyc7XHJcblxyXG4vLyBZb3VyIHdlYiBhcHAncyBGaXJlYmFzZSBjb25maWd1cmF0aW9uXHJcbnZhciBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICAgIGFwaUtleTogXCJBSXphU3lEVFZ4REpqN3JxRzlMLUNsdmJhMlRhbzlCMGhrY3hqY0VcIixcclxuICAgIGF1dGhEb21haW46IFwibWlsY2hjaGFuLmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9taWxjaGNoYW4uZmlyZWJhc2Vpby5jb21cIixcclxuICAgIHByb2plY3RJZDogXCJtaWxjaGNoYW5cIixcclxuICAgIHN0b3JhZ2VCdWNrZXQ6IFwibWlsY2hjaGFuLmFwcHNwb3QuY29tXCIsXHJcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogXCIzNTU2OTg5NzE4ODlcIixcclxuICAgIGFwcElkOiBcIjE6MzU1Njk4OTcxODg5OndlYjplMzY1M2M1YzMxYmQ3Mjg5Y2Q0NTUwXCIsXHJcbiAgICBtZWFzdXJlbWVudElkOiBcIkctMzk5OEZKWU5XWFwiXHJcbn07XHJcbi8vIEluaXRpYWxpemUgRmlyZWJhc2VcclxuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcbmZpcmViYXNlLmFuYWx5dGljcygpO1xyXG5cclxuY29uc3QgZGVidWcgPSBkZWNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpKSA9PT0gXCJkZWJ1Z1wiO1xyXG4vL2NvbnN0IGNoYW5uZWwgPSBkZWNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpKTtcclxuY29uc3QgZGF0YWJhc2VSb290ID0gXCJib3RcIjtcclxuLy9jb25zdCBkYXRhYmFzZUNoYW5uZWwgPSBjaGFubmVsLmxlbmd0aCA+IDAgPyBkYXRhYmFzZVJvb3QgKyAnL2NoYW5uZWxzLycgKyBjaGFubmVsIDogZGF0YWJhc2VSb290O1xyXG5jb25zdCBkYXRhYmFzZU1lc3NhZ2VzID0gZGF0YWJhc2VSb290ICsgXCIvZmVlZFwiO1xyXG5sZXQgZGF0YWJhc2UgPSBmaXJlYmFzZS5kYXRhYmFzZSgpO1xyXG5sZXQgc3RvcmFnZSA9IGZpcmViYXNlLnN0b3JhZ2UoKTtcclxuY29uc3QgbWlsY2ggPSB7IG5hbWU6IFwi44Of44Or44OS44Gh44KD44KTXCIsIGFjY2VudDogXCIjZmZhNmJiXCIsIGltYWdlOiBcIi9pbWFnZXMvTWlsY2gucG5nXCIgfTtcclxuY29uc3QgbWVya3UgPSB7IG5hbWU6IFwi44Oh44Or44Kv44Gh44KD44KTXCIsIGFjY2VudDogXCIjNWJjYmUxXCIsIGltYWdlOiBcIi9pbWFnZXMvTWVya3UucG5nXCIgfTtcclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lKSB7XHJcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXS8sIFwiXFxcXFxcW1wiKS5yZXBsYWNlKC9bXFxdXS8sIFwiXFxcXFxcXVwiKTtcclxuXHJcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiW1xcXFw/Jl1cIiArIG5hbWUgKyBcIj0oW14mI10qKVwiKTtcclxuICAgIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcblxyXG4gICAgaWYgKHJlc3VsdHMgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1sxXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcclxufVxyXG5cclxuLy92YXIgY2hhbm5lbCA9IGdldFBhcmFtZXRlckJ5TmFtZShcImNoYW5uZWxcIikgfHwgZ2V0UGFyYW1ldGVyQnlOYW1lKFwiY2hcIikgfHwgXCJcIjtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe1xyXG4gICAgYW50aWFsaWFzOiB0cnVlLFxyXG4gICAgYWxwaGE6IHRydWUsXHJcbiAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWVcclxufSk7XHJcblxyXG4vL3JlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5vdXRlckhlaWdodCk7XHJcbi8vcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbnJlbmRlcmVyLnNldENsZWFyQ29sb3IoMHhmZmZmZmYsIDApO1xyXG5yZW5kZXJlci50b25lTWFwcGluZ0V4cG9zdXJlID0gMTtcclxucmVuZGVyZXIudG9uZU1hcHBpbmcgPSBUSFJFRS5MaW5lYXJUb25lTWFwcGluZztcclxucmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgPSBUSFJFRS5zUkdCRW5jb2Rpbmc7XHJcbi8vcmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XHJcblxyXG5jb25zdCBDQU1FUkFfRk9WID0gNjAuMDtcclxuY29uc3QgQ0FNRVJBX1ogPSA1Oy8vMS4yNTtcclxuY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKENBTUVSQV9GT1YsIHJlbmRlcmVyLmRvbUVsZW1lbnQud2lkdGggLyByZW5kZXJlci5kb21FbGVtZW50LmhlaWdodCwgMC4xLCAxMDAwKTtcclxuXHJcbmNhbWVyYS5wb3NpdGlvbi5zZXQoMC4wLCAxLjUsIENBTUVSQV9aKTtcclxuXHJcbmNvbnN0IGNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTtcclxuXHJcblxyXG5jb250cm9scy5lbmFibGVkID0gZmFsc2U7XHJcbmNvbnRyb2xzLmVuYWJsZUtleXMgPSBmYWxzZTtcclxuY29udHJvbHMuc2NyZWVuU3BhY2VQYW5uaW5nID0gZmFsc2U7XHJcbmNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlO1xyXG5jb250cm9scy5taW5Qb2xhckFuZ2xlID0gMzAgKiBNYXRoLlBJIC8gMTgwO1xyXG5jb250cm9scy5tYXhQb2xhckFuZ2xlID0gMTUwICogTWF0aC5QSSAvIDE4MDtcclxuY29udHJvbHMubWluQXppbXV0aEFuZ2xlID0gLTQ1ICogTWF0aC5QSSAvIDE4MDtcclxuY29udHJvbHMubWF4QXppbXV0aEFuZ2xlID0gNDUgKiBNYXRoLlBJIC8gMTgwO1xyXG5jb250cm9scy5taW5EaXN0YW5jZSA9IDAuNzU7XHJcbmNvbnRyb2xzLm1heERpc3RhbmNlID0gNTtcclxuY29udHJvbHMudGFyZ2V0LnNldCgwLjAsIDIuNSwgMS4wKTtcclxuY29udHJvbHMudXBkYXRlKCk7XHJcblxyXG5jb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG5jb25zdCBsaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmKTtcclxuY29uc3QgaGVtaXNwaGVyZUxpZ2h0ID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodCgweGQ3ZmJmZiwgMHg3ZTk0YTgsIDAuNyk7XHJcblxyXG5saWdodC5pbnRlbnNpdHkgPSAwLjk7XHJcbmxpZ2h0LnBvc2l0aW9uLnNldCgwLjAsIDEwLjAsIDEwLjApLm5vcm1hbGl6ZSgpO1xyXG5cclxuc2NlbmUuYWRkKGxpZ2h0KTtcclxuc2NlbmUuYWRkKGhlbWlzcGhlcmVMaWdodCk7XHJcbi8vc2NlbmUuYWRkKG5ldyBUSFJFRS5HcmlkSGVscGVyKDEwLCAxMCkpO1xyXG4vL3NjZW5lLmFkZChuZXcgVEhSRUUuQXhlc0hlbHBlcig1KSk7XHJcblxyXG5jb25zdCBsb29rQXRUYXJnZXQgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuXHJcbmNhbWVyYS5hZGQobG9va0F0VGFyZ2V0KTtcclxuXHJcbmNvbnN0IGNvbXBvc2VyID0gbmV3IEVmZmVjdENvbXBvc2VyKHJlbmRlcmVyKTtcclxuXHJcbnZhciBibG9vbVBhc3MgPSBuZXcgVW5yZWFsQmxvb21QYXNzKG5ldyBUSFJFRS5WZWN0b3IyKHJlbmRlcmVyLmRvbUVsZW1lbnQud2lkdGgsIHJlbmRlcmVyLmRvbUVsZW1lbnQuaGVpZ2h0KSwgMS41LCAwLjQsIDAuODUpO1xyXG52YXIgaHVlU2F0dXJhdGlvbiA9IG5ldyBTaGFkZXJQYXNzKEh1ZVNhdHVyYXRpb25TaGFkZXIpO1xyXG52YXIgYnJpZ2h0bmVzc0NvbnRyYXN0U2hhZGVyID0gbmV3IFNoYWRlclBhc3MoQnJpZ2h0bmVzc0NvbnRyYXN0U2hhZGVyKTtcclxudmFyIGdhbW1hQ29ycmVjdGlvblNoYWRlciA9IG5ldyBTaGFkZXJQYXNzKEdhbW1hQ29ycmVjdGlvblNoYWRlcik7XHJcbnZhciBlZmZlY3RDb3B5ID0gbmV3IFNoYWRlclBhc3MoQ29weVNoYWRlcik7XHJcbnZhciB2aWduZXR0ZSA9IG5ldyBTaGFkZXJQYXNzKFZpZ25ldHRlU2hhZGVyKTtcclxudmFyIGNvbG9yQ29ycmVjdGlvbiA9IG5ldyBTaGFkZXJQYXNzKENvbG9yQ29ycmVjdGlvblNoYWRlcik7XHJcbnZhciByZ2JTaGlmdCA9IG5ldyBTaGFkZXJQYXNzKFJHQlNoaWZ0U2hhZGVyKTtcclxudmFyIGZ4YWFTaGFkZXIgPSBuZXcgU2hhZGVyUGFzcyhGWEFBU2hhZGVyKTtcclxuXHJcbmJsb29tUGFzcy5yZW5kZXJUb1NjcmVlbiA9IHRydWU7XHJcbmJsb29tUGFzcy50aHJlc2hvbGQgPSAwLjU7XHJcbmJsb29tUGFzcy5zdHJlbmd0aCA9IDAuMjU7XHJcbmJsb29tUGFzcy5yYWRpdXMgPSAwO1xyXG5cclxuaHVlU2F0dXJhdGlvbi51bmlmb3Jtcy5odWUudmFsdWUgPSAtMC4wMjU7XHJcbmh1ZVNhdHVyYXRpb24udW5pZm9ybXMuc2F0dXJhdGlvbi52YWx1ZSA9IDAuMjU7XHJcbi8vYnJpZ2h0bmVzc0NvbnRyYXN0U2hhZGVyLnVuaWZvcm1zLmJyaWdodG5lc3MudmFsdWUgPSAwLjU7XHJcbmJyaWdodG5lc3NDb250cmFzdFNoYWRlci51bmlmb3Jtcy5jb250cmFzdC52YWx1ZSA9IC0wLjE7XHJcbmNvbG9yQ29ycmVjdGlvbi51bmlmb3Jtcy5tdWxSR0IudmFsdWUgPSBuZXcgVEhSRUUuVmVjdG9yMygwLjk1LCAwLjk1LCAwLjk1KTtcclxuY29sb3JDb3JyZWN0aW9uLnVuaWZvcm1zLnBvd1JHQi52YWx1ZSA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsIDEsIDEpO1xyXG5yZ2JTaGlmdC51bmlmb3Jtcy5hbW91bnQudmFsdWUgPSAwLjAwMDE7XHJcbnJnYlNoaWZ0LnVuaWZvcm1zLmFuZ2xlLnZhbHVlID0gMDtcclxudmlnbmV0dGUudW5pZm9ybXMuZGFya25lc3MudmFsdWUgPSAwLjI1O1xyXG52aWduZXR0ZS51bmlmb3Jtcy5vZmZzZXQudmFsdWUgPSAwLjBcclxuZWZmZWN0Q29weS5yZW5kZXJUb1NjcmVlbiA9IHRydWU7XHJcbmZ4YWFTaGFkZXIudW5pZm9ybXMucmVzb2x1dGlvbi52YWx1ZS5zZXQoMSAvIChyZW5kZXJlci5kb21FbGVtZW50LndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pLCAxIC8gKHJlbmRlcmVyLmRvbUVsZW1lbnQuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pKTtcclxuXHJcbmNvbXBvc2VyLnNldFNpemUocmVuZGVyZXIuZG9tRWxlbWVudC53aWR0aCwgcmVuZGVyZXIuZG9tRWxlbWVudC5oZWlnaHQpO1xyXG5jb21wb3Nlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcclxuY29tcG9zZXIuYWRkUGFzcyhuZXcgUmVuZGVyUGFzcyhzY2VuZSwgY2FtZXJhKSk7XHJcbmNvbXBvc2VyLmFkZFBhc3MoYmxvb21QYXNzKTtcclxuY29tcG9zZXIuYWRkUGFzcyhodWVTYXR1cmF0aW9uKTtcclxuLy9jb21wb3Nlci5hZGRQYXNzKGJyaWdodG5lc3NDb250cmFzdFNoYWRlcik7XHJcbi8vY29tcG9zZXIuYWRkUGFzcyhjb2xvckNvcnJlY3Rpb24pO1xyXG5jb21wb3Nlci5hZGRQYXNzKHJnYlNoaWZ0KTtcclxuY29tcG9zZXIuYWRkUGFzcyh2aWduZXR0ZSk7XHJcbi8vY29tcG9zZXIuYWRkUGFzcyhnYW1tYUNvcnJlY3Rpb25TaGFkZXIpO1xyXG4vL2NvbXBvc2VyLmFkZFBhc3MoZnhhYVNoYWRlcik7XHJcbmNvbXBvc2VyLmFkZFBhc3MoZWZmZWN0Q29weSk7XHJcblxyXG5jb25zdCBzdGF0cyA9IG5ldyBTdGF0cygpO1xyXG5cclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSBcImF1dG9cIjtcclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5ib3R0b20gPSBcIjBcIjtcclxuc3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gXCJhdXRvXCI7XHJcbnN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucmlnaHQgPSBcIjBcIjtcclxuXHJcbmlmICghZGVidWcpIHtcclxuICAgIHN0YXRzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlzLWhpZGRlblwiKTtcclxufVxyXG5cclxuY29uc3QgY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKTtcclxuY29uc3QgcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG5jb25zdCBtb3VzZSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcbmxldCB2cm1Nb2RlbCA9IG51bGw7XHJcbmxldCB2cm1TcHJpbmdCb25lcyA9IFtdO1xyXG5sZXQgYW5pbWF0aW9uSW5kZXggPSAwO1xyXG5jb25zdCBhbmltYXRpb25Ta2lwRnJhbWVzID0gMjtcclxubGV0IGlkbGVUaW1lID0gMC4wO1xyXG5jb25zdCBibGlua1RocmVzaG9sZCA9IDUuMDtcclxubGV0IHdhaXRUaW1lID0gMC4wO1xyXG5jb25zdCB3YWl0VGhyZXNob2xkID0gMS4wO1xyXG5sZXQgYWN0aXZhdGVUaW1lID0gMC4wO1xyXG5jb25zdCBhY3RpdmF0ZVRocmVzaG9sZCA9IDEwLjA7XHJcbmxldCBhbGVydFRpbWUgPSAwLjA7XHJcbmNvbnN0IGFsZXJ0VGhyZXNob2xkID0gMzAuMDtcclxubGV0IGxvb2tBbmltYXRpb24gPSBudWxsO1xyXG5sZXQgcmFuZG9tV2luZCA9IG51bGw7XHJcbmxldCBiYWNrZ3JvdW5kVGltZSA9IDMwLjA7XHJcbmNvbnN0IGJhY2tncm91bmRUaHJlc2hvbGQgPSAzMC4wO1xyXG5sZXQgZHJhZ2dhYmxlQm9uZSA9IG51bGw7XHJcbmxldCBkcmFnZ2luZ0JvbmVzID0gbnVsbDtcclxubGV0IHRhcENvdW50ID0gMDtcclxuXHJcbnZhciBhcHAgPSBWdWUuY3JlYXRlQXBwKHtcclxuICAgIGRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNEZWJ1ZzogZGVidWcsXHJcbiAgICAgICAgICAgIGlzRGFya01vZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc011dGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1JldmVhbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNPdmVybGF5ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc1VwZGF0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNCbGluZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNQb3B1cDogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0xlYXJuaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0hhbmdpbmdPbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzU3RhcmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgbW9kZTogbnVsbCxcclxuICAgICAgICAgICAgZmVlZFF1ZXVlOiBbXSxcclxuICAgICAgICAgICAgc2VxdWVuY2VRdWV1ZTogW10sXHJcbiAgICAgICAgICAgIHByb2dyZXNzOiBudWxsLFxyXG4gICAgICAgICAgICB1c2VyOiBudWxsLFxyXG4gICAgICAgICAgICBpbnB1dDogXCJcIixcclxuICAgICAgICAgICAgYW5pbWF0ZWRJbnB1dExlbmd0aDogMCxcclxuICAgICAgICAgICAgbWF4SW5wdXRMZW5ndGg6IDEwMCxcclxuICAgICAgICAgICAgaW5wdXRIYXNFcnJvcjogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgICAgICAgbWF4TWVzc2FnZXM6IDEwLFxyXG4gICAgICAgICAgICB3b3JkOiBudWxsLFxyXG4gICAgICAgICAgICB3b3JkczogW10sXHJcbiAgICAgICAgICAgIHRhZ3M6IFtdLFxyXG4gICAgICAgICAgICBtYXhUYWdzOiAxMCxcclxuICAgICAgICAgICAgc2Nyb2xsVGltZW91dElEOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHRpY2tJbnRlcnZhbElEOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHN0YXJzOiAtMSxcclxuICAgICAgICAgICAgYW5pbWF0ZWRTdGFyczogMCxcclxuICAgICAgICAgICAgc2NyZWVuc2hvdDogbnVsbCxcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uczogW10sXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkhlaWdodDogMCxcclxuICAgICAgICAgICAgYW5pbWF0ZWROb3RpZmljYXRpb25IZWlnaHQ6IDAsXHJcbiAgICAgICAgICAgIHJlY2VudEltYWdlczogW10sXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZXNRdWV1ZTogW10sXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZXM6IFtdLFxyXG4gICAgICAgICAgICBwcmVsb2FkSW1hZ2VzOiBbXSxcclxuICAgICAgICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBhbmltYXRpb25zOiBudWxsLFxyXG4gICAgICAgICAgICBjdXJyZW50QW5pbWF0aW9uczogW10sXHJcbiAgICAgICAgICAgIGJsZW5kU2hhcGVBbmltYXRpb25zOiBbXSxcclxuICAgICAgICAgICAgaW5zZXRUb3A6IDAsXHJcbiAgICAgICAgICAgIGluc2V0Qm90dG9tOiAwLFxyXG4gICAgICAgICAgICB0ZXh0OiBbXSxcclxuICAgICAgICAgICAgcG9wdXBUZXh0SGVpZ2h0OiAwLFxyXG4gICAgICAgICAgICBhbmltYXRlZFBvcHVwVGV4dEhlaWdodDogMCxcclxuICAgICAgICAgICAgdGlja2VyV2lkdGg6IDAsXHJcbiAgICAgICAgICAgIGFuaW1hdGVkVGlja2VyV2lkdGg6IDAsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG51bGwsXHJcbiAgICAgICAgICAgIHN0YXRlczoge30sXHJcbiAgICAgICAgICAgIGNoYXJhY3RlcjogbnVsbCxcclxuICAgICAgICAgICAgd29yZERpY3Rpb25hcnk6IHt9LFxyXG4gICAgICAgICAgICByZXZlcnNlV29yZERpY3Rpb25hcnk6IHt9LFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbXCLlkI3liY1cIiwgXCLmiYDlsZ5cIiwgXCLmmYLplpNcIiwgXCLloLTmiYBcIiwgXCLjgZnjgovkuotcIiwgXCLnlJ/jgY3nialcIiwgXCLpo5/jgbnnialcIiwgXCLpo7Ljgb/nialcIiwgXCLogZ7jgY/jgoLjga5cIiwgXCLopovjgovjgoLjga5cIiwgXCLoqq3jgoDjgoLjga5cIiwgXCLkvb/jgYbnialcIiwgXCLouqvjgavjgaTjgZHjgovjgoLjga5cIiwgXCLkuZfjgornialcIiwgXCLpg6jkvY1cIiwgXCLnl4XmsJdcIl1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgd2F0Y2g6IHtcclxuICAgICAgICBpc011dGVkKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNoYXJhY3RlclwiLCBKU09OLnN0cmluZ2lmeSh7IG11dGU6IG5ld1ZhbHVlIH0pKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjaGFyYWN0ZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdvcmRzOiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2xpcCBvZiBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyPi53cmFwPi5mcmFtZSAuY2xpcFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGNsaXAucXVlcnlTZWxlY3RvckFsbChcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlciAuaXRlbVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggKz0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRpY2tlcldpZHRoID0gTWF0aC5taW4od2lkdGggLyAyLCBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFpbmVyPi53cmFwPi5mcmFtZSAubGV2ZWxcIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcC5xdWVyeVNlbGVjdG9yKFwiOnNjb3BlIC50aWNrZXItd3JhcCAudGlja2VyXCIpLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGlja2VyV2lkdGgobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgd2lkdGg6IHRoaXMuYW5pbWF0ZWRUaWNrZXJXaWR0aCB9O1xyXG5cclxuICAgICAgICAgICAgYW5pbWUoe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0czogb2JqLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcm91bmQ6IDEsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbmltYXRlZFRpY2tlcldpZHRoID0gb2JqLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJhY2tncm91bmRJbWFnZXM6IHtcclxuICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBwLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjYXBwPi5iYWNrZ3JvdW5kPmRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZWxlbWVudHMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVSYXRlID0gMTU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydFRpbWUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlmcmFtZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWZyYW1lcy5wdXNoKHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWVzLnB1c2goeyB2aXNpYmlsaXR5OiBcImhpZGRlblwiIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb24gPSBlbGVtZW50LmFuaW1hdGUoa2V5ZnJhbWVzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogJ2ZvcndhcmRzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6ICdzdGVwcygnICsgb2Zmc2V0ICsgJyknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwIC8gZnJhbWVSYXRlICogZWxlbWVudHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IEluZmluaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRUaW1lID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gYW5pbWF0aW9uLnN0YXJ0VGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnN0YXJ0VGltZSA9IHN0YXJ0VGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZXA6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRleHQ6IHtcclxuICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBwLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwcC5pc1BvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5wb3B1cFRleHRIZWlnaHQgPSBhcHAuJHJlZnMucG9wdXBUZXh0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9wdXBUZXh0SGVpZ2h0KG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgaGVpZ2h0OiB0aGlzLmFuaW1hdGVkUG9wdXBUZXh0SGVpZ2h0IH07XHJcblxyXG4gICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBvYmosXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcm91bmQ6IDEsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlZFBvcHVwVGV4dEhlaWdodCA9IG9iai5oZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBub3RpZmljYXRpb25zOiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5ub3RpZmljYXRpb25IZWlnaHQgPSBhcHAuJHJlZnMubm90aWZpY2F0aW9ucy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm90aWZpY2F0aW9uSGVpZ2h0KG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgaGVpZ2h0OiB0aGlzLmFuaW1hdGVkTm90aWZpY2F0aW9uSGVpZ2h0IH07XHJcblxyXG4gICAgICAgICAgICBhbmltZSh7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBvYmosXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcm91bmQ6IDEsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImxpbmVhclwiLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlZE5vdGlmaWNhdGlvbkhlaWdodCA9IG9iai5oZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdGFycyhuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBvYmogPSB7IGNvdW50OiB0aGlzLmFuaW1hdGVkU3RhcnMgfTtcclxuXHJcbiAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldHM6IG9iaixcclxuICAgICAgICAgICAgICAgIGNvdW50OiBuZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgIHJvdW5kOiAxLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZWRTdGFycyA9IG9iai5jb3VudFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlucHV0OiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwcC4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHsgY291bnQ6IGFwcC5hbmltYXRlZElucHV0TGVuZ3RoIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1lKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0czogb2JqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogYXBwLmlucHV0Lmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91bmQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuYW5pbWF0ZWRJbnB1dExlbmd0aCA9IG9iai5jb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVlcDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgc2lnbkluOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXZlbnQgPT09IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aFBvcHVwKG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ZpcmViYXNlLmF1dGguT0F1dGhDcmVkZW50aWFsfSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gcmVzdWx0LmNyZWRlbnRpYWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiByZXN1bHQudXNlci5wcm92aWRlckRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVwZGF0ZVByb2ZpbGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG90b1VSTDogZGF0YS5waG90b1VSTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNyZWRlbnRpYWxcIiwgSlNPTi5zdHJpbmdpZnkoeyBwcm92aWRlcklkOiBjcmVkZW50aWFsLnByb3ZpZGVySWQsIGFjY2Vzc1Rva2VuOiBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuLCBpZFRva2VuOiBjcmVkZW50aWFsLmlkVG9rZW4gfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjcmVkZW50aWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gZmlyZWJhc2UuYXV0aC5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5GYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHByb3ZpZGVyLmFkZFNjb3BlKFwicHVibGljX3Byb2ZpbGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtmaXJlYmFzZS5hdXRoLk9BdXRoQ3JlZGVudGlhbH0gKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3JlZGVudGlhbCA9IHJlc3VsdC5jcmVkZW50aWFsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgcmVzdWx0LnVzZXIucHJvdmlkZXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9VUkw6IGRhdGEucGhvdG9VUkxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjcmVkZW50aWFsXCIsIEpTT04uc3RyaW5naWZ5KHsgcHJvdmlkZXJJZDogY3JlZGVudGlhbC5wcm92aWRlcklkLCBhY2Nlc3NUb2tlbjogY3JlZGVudGlhbC5hY2Nlc3NUb2tlbiB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNyZWRlbnRpYWxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBmaXJlYmFzZS5hdXRoLlR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQpIHtcclxuICAgICAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoUG9wdXAobmV3IGZpcmViYXNlLmF1dGguVHdpdHRlckF1dGhQcm92aWRlcigpKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ZpcmViYXNlLmF1dGguT0F1dGhDcmVkZW50aWFsfSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjcmVkZW50aWFsID0gcmVzdWx0LmNyZWRlbnRpYWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiByZXN1bHQudXNlci5wcm92aWRlckRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhvdG9VcmwgPSBkYXRhLnBob3RvVVJMLnJlcGxhY2UoL19ub3JtYWxcXC5qcGckLywgJy5qcGcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9VUkw6IHBob3RvVXJsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3JlZGVudGlhbFwiLCBKU09OLnN0cmluZ2lmeSh7IHByb3ZpZGVySWQ6IGNyZWRlbnRpYWwucHJvdmlkZXJJZCwgYWNjZXNzVG9rZW46IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW4sIHNlY3JldDogY3JlZGVudGlhbC5zZWNyZXQgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjcmVkZW50aWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2lnbk91dDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNyZWRlbnRpYWxcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlci5wb3N0TWVzc2FnZSh7IGNvbW1hbmQ6IFwiY2FjaGVzXCIgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLypmaXJlYmFzZS5hdXRoKCkuc2lnbkluQW5vbnltb3VzbHkoKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7Ki9cclxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQmxpbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGFjdGl2YXRlVGltZSA9IDAuMDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlbmQ6IGFzeW5jIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RlYnVnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFncyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRoaXMuaW5wdXQuc3BsaXQoL1xccy8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRJbWFnZXMuc29tZSgoeCkgPT4geC5pZCA9PT0gdG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2godG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5wdXNoKHRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID4gMCAmJiB0YWdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL2ltYWdlcy9cIiArIGtleSkudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VbXCJ0YWdzXCJdID0gdGFncztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMZWFybmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbnB1dC5sZW5ndGggPD0gdGhpcy5tYXhJbnB1dExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXJuKHsgbmFtZTogdGhpcy5pbnB1dCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMZWFybmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbWFnZSBvZiB0aGlzLmJhY2tncm91bmRJbWFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IGltYWdlLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQubGVuZ3RoID4gMCAmJiB0aGlzLmlucHV0Lmxlbmd0aCA8PSB0aGlzLm1heElucHV0TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlYXJuKHsgbmFtZTogdGhpcy5pbnB1dCB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xlYXJuaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlybSh0aGlzLmlucHV0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdChmb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xceyhcXGQpXFx9L2csIGZ1bmN0aW9uIChtLCBjKSB7IHJldHVybiBhcmdzW3BhcnNlSW50KGMpICsgMV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaHVmZmxlKGFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9yYW5kb20obWluLCBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGguY2VpbChtaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSkgKyBtaW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhID0gW10uY29uY2F0KGFycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBhcnJheS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBfcmFuZG9tKDAsIG4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYVtuXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhW25dID0gYVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFba10gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWdtZW50ZXIgPSBuZXcgVGlueVNlZ21lbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0b2tlbnMgPSBzZWdtZW50ZXIuc2VnbWVudCh0aGlzLmlucHV0KS5zb3J0KCh4LCB5KSA9PiB5Lmxlbmd0aCAtIHgubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlTWVzc2FnZXMpLnB1c2goeyB0ZXh0OiB0aGlzLmlucHV0LCB0aW1lc3RhbXA6IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApLCB1c2VyOiB7IGlkOiBhcHAudXNlci51aWQsIG5hbWU6IG51bGwsIGFjY2VudDogbnVsbCwgaW1hZ2U6IG51bGwgfSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc011dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPiA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2Vucy5zcGxpY2UoNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHNodWZmbGUodG9rZW5zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc25hcHNob3QgPSBhd2FpdCBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvZGljdGlvbmFyeS93b3Jkcy9cIiArIHRva2VuKS5vbmNlKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXJuKHRva2VuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vYXBpLm1pbGNoY2hhbi5jb20vdGFsaz90ZXh0PVwiICsgdGV4dCArIFwiJnRocmVzaG9sZD0xLjBcIjtcclxuICAgICAgICAgICAgICAgIC8vbGV0IHNlZ21lbnRlciA9IG5ldyBUaW55U2VnbWVudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKCdbLiMkXFxcXFtcXFxcXV0nKTtcclxuICAgICAgICAgICAgICAgIC8vbGV0IHRva2VucyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qZm9yIChsZXQgdG9rZW4gb2Ygc2VnbWVudGVyLnNlZ21lbnQodGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QodG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNNdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNhbGVydFwiKS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbXBsZXRlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGVhcm5lZFdvcmRzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlTWVzc2FnZXMpLnB1c2goeyB0ZXh0OiB0ZXh0LCB0aW1lc3RhbXA6IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApLCB1c2VyOiB7IGlkOiBhcHAudXNlci51aWQsIG5hbWU6IG51bGwsIGFjY2VudDogbnVsbCwgaW1hZ2U6IG51bGwgfSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKmZvciAobGV0IHRva2VuIG9mIHRva2Vucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi9kaWN0aW9uYXJ5L3dvcmRzL1wiICsgdG9rZW4pLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh3b3JkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVmLmtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgY29tbWl0dGVkLCBzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWl0dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmVkV29yZHMucHVzaCh0b2tlbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL2RpY3Rpb25hcnkvY291bnRcIikudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjb3VudCB8fCAwKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCA9PSB0b2tlbnMubGVuZ3RoICYmIGxlYXJuZWRXb3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlYXJuZWRXb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm5vdGlmeSh7IHRleHQ6IGZvcm1hdChjaGFubmVsLmxlbmd0aCA9PSAwID8gJ+OAjHswfeOAjeOCkuOBiuOBvOOBiOOBn+OCiOOBiScgOiAn44CMezB944CN44KS44GK44G844GI44Gf44KIJywgbGVhcm5lZFdvcmRzW2ldKSwgYWNjZW50OiBtZXJrdS5hY2NlbnQsIGltYWdlOiBjaGFubmVsLmxlbmd0aCA9PSAwID8gbWVya3UuaW1hZ2UgOiBudWxsIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIChpICsgMSkgKiA1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wSlNEb21bMF0ucEpTLmZuLm1vZGVzLnB1c2hQYXJ0aWNsZXMobGVhcm5lZFdvcmRzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVmID0gZGF0YWJhc2UucmVmKGRhdGFiYXNlTWVzc2FnZXMpLnB1c2goKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLm1lc3NhZ2VzLnB1c2goeyBpZDogcmVmLmtleSwgdGV4dDogbnVsbCwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLCB1c2VyOiB7IGlkOiBudWxsLCBuYW1lOiBtaWxjaC5uYW1lLCBhY2NlbnQ6IG1pbGNoLmFjY2VudCwgaW1hZ2U6IG1pbGNoLmltYWdlIH0gfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5pc0xvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmNvZGVVUkkodXJsKSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogXCJjb3JzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi50ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYuc2V0KHsgdGV4dDoganNvbi50ZXh0LCB0aW1lc3RhbXA6IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApLCB0aHJlYWQ6IHJlZi5rZXksIHVzZXI6IHsgaWQ6IG51bGwsIG5hbWU6IG1pbGNoLm5hbWUsIGFjY2VudDogbWlsY2guYWNjZW50LCBpbWFnZTogbWlsY2guaW1hZ2UgfSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5ub3RpZnkoeyB0ZXh0OiAn44KC44GG5LiA5bqm6Kmm44GX44Gm44G744GX44GE44KI44GJJywgYWNjZW50OiBtZXJrdS5hY2NlbnQsIGltYWdlOiBtZXJrdS5pbWFnZSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0sIHJhbmRvbSg1MDAsIDEwMDApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hha2UodGhpcy4kcmVmcy5pbnB1dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0Lmxlbmd0aCA8PSB0aGlzLm1heElucHV0TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0SGFzRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRIYXNFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHVwbG9hZDogYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlVXVpZCgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29nbGVDaHJvbWUvY2hyb21lLXBsYXRmb3JtLWFuYWx5dGljcy9ibG9iL21hc3Rlci9zcmMvaW50ZXJuYWwvaWRlbnRpZmllci5qc1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgRk9STUFUOiBzdHJpbmcgPSBcInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoYXJzID0gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5zcGxpdChcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY2hhcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoYXJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyc1tpXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KS50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInlcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzW2ldID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpICsgOCkudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGFycy5qb2luKFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmFnZVJlZiA9IHN0b3JhZ2UucmVmKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhzID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZXZlbnQudGFyZ2V0LmZpbGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlcy5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zb3J0KCh4LCB5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeC5uYW1lID4geS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHgubmFtZSA8IHkubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwbG9hZFRhc2sgPSBzdG9yYWdlUmVmLmNoaWxkKGBpbWFnZXMvJHtnZW5lcmF0ZVV1aWQoKX1gKS5wdXQoZmlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZFRhc2sub24oXCJzdGF0ZV9jaGFuZ2VkXCIsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcyA9IHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzIC8gZmlsZXMubGVuZ3RoICsgcGF0aHMubGVuZ3RoIC8gZmlsZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoeyB0ZXh0OiBlLm1lc3NhZ2UsIGFjY2VudDogdGhpcy5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogdGhpcy5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwYXRocy5wdXNoKHVwbG9hZFRhc2suc25hcHNob3QucmVmLmZ1bGxQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL2ltYWdlc1wiKS5wdXNoKHsgcGF0aHM6IHBhdGhzLCB0aW1lc3RhbXA6IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdGhpcy53b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgPT09IGV2ZW50LnRhcmdldC5kYXRhc2V0LmF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS52YWx1ZSA9IGV2ZW50LnRhcmdldC5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaGFyZTogYXN5bmMgZnVuY3Rpb24gKHdvcmQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdvcmQubmFtZSBpbiB0aGlzLndvcmREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy53b3JkRGljdGlvbmFyeVt3b3JkLm5hbWVdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnlba2V5XS53b3Jkcy5zb21lKCh4KSA9PiB4ID09PSB3b3JkLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pc1N1Ym1pdHRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3dvcmRzL1wiICsgd29yZC5uYW1lKS50cmFuc2FjdGlvbihmdW5jdGlvbiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlUmVxdWlyZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2Ygd29yZC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUubmFtZSBpbiBjdXJyZW50LmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWxldGVSZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSB7IGF0dHJpYnV0ZXM6IHt9IH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlLm5hbWUgaW4gY3VycmVudC5hdHRyaWJ1dGVzICYmIGN1cnJlbnQuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPSBjdXJyZW50LmF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPSB0aW1lc3RhbXAgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlUmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGVSZXF1aXJlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW1widGltZXN0YW1wXCJdID0gdGltZXN0YW1wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB7IGF0dHJpYnV0ZXM6IHt9LCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSA9IHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cmlidXRlc1thdHRyaWJ1dGUubmFtZV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IsIGNvbW1pdHRlZCwgc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb21taXR0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGljdGlvbmFyeSA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZXN0YW1wcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGljdGlvbmFyeS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRpY3Rpb25hcnkuYXR0cmlidXRlc1trZXldID09PSBcIm51bWJlclwiICYmIGRpY3Rpb25hcnkuYXR0cmlidXRlc1trZXldID4gMCAmJiBzZWxmLmF0dHJpYnV0ZXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcHMucHVzaChkaWN0aW9uYXJ5LmF0dHJpYnV0ZXNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXBzLmxlbmd0aCA9PT0gMSAmJiB0aW1lc3RhbXBzWzBdID09PSBkaWN0aW9uYXJ5LnRpbWVzdGFtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xceyhcXGQpXFx9L2csIGZ1bmN0aW9uIChtLCBjKSB7IHJldHVybiBhcmdzW3BhcnNlSW50KGMpICsgMV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3N0YXJzXCIpLnRyYW5zYWN0aW9uKGZ1bmN0aW9uIChjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoY291bnQgfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygc2VsZi5wcmVwYXJlKHNlbGYuY2hhcmFjdGVyLnNlcXVlbmNlcy5maWx0ZXIoKHgpID0+IHgubmFtZSA9PT0gXCJMZWFybmVkXCIpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudHlwZSA9PT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZnkoeyB0ZXh0OiBmb3JtYXQob2JqLnRleHQsIHdvcmQubmFtZSksIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaXNTdGFyZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlzU3RhcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuaXNNdXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJHJlZnMudHdpbmtsZS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvc3RhcnNcIikudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi53b3JkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSh7IHRleHQ6IGVycm9yLm1lc3NhZ2UsIGFjY2VudDogc2VsZi5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogc2VsZi5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBsZWFybjogYXN5bmMgZnVuY3Rpb24gKHdvcmQpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9cXHsoXFxkKVxcfS9nLCBmdW5jdGlvbiAobSwgYykgeyByZXR1cm4gYXJnc1twYXJzZUludChjKSArIDFdIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXF1ZW5jZSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XHJcblxyXG4gICAgICAgICAgICBpZiAoXCJhdHRyaWJ1dGVzXCIgaW4gd29yZCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdGhpcy5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKHsgbmFtZTogYXR0cmlidXRlLCB2YWx1ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaCh7IG5hbWU6IGF0dHJpYnV0ZSwgdmFsdWU6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvd29yZHMvXCIgKyB3b3JkLm5hbWUpLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRoaXMuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlIGluIHcuYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcuYXR0cmlidXRlc1thdHRyaWJ1dGVdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaCh7IG5hbWU6IGF0dHJpYnV0ZSwgdmFsdWU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaCh7IG5hbWU6IGF0dHJpYnV0ZSwgdmFsdWU6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0aGlzLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKHsgbmFtZTogYXR0cmlidXRlLCB2YWx1ZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLndvcmQgPSB7IG5hbWU6IHdvcmQubmFtZSwgYXR0cmlidXRlczogYXR0cmlidXRlcyB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBvYmogb2YgdGhpcy5wcmVwYXJlKHRoaXMuY2hhcmFjdGVyLnNlcXVlbmNlcy5maWx0ZXIoKHgpID0+IHgubmFtZSA9PT0gXCJMZWFyblwiKSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmoudHlwZSA9PT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKHsgdHlwZTogb2JqLnR5cGUsIHNwZWVkOiBvYmouc3BlZWQsIGR1cmF0aW9uOiBvYmouZHVyYXRpb24sIHRleHQ6IGZvcm1hdChvYmoudGV4dCwgd29yZC5uYW1lKSB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2UucHVzaChvYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VxdWVuY2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVF1ZXVlLnB1c2goc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY3RpdmF0ZTogYXN5bmMgZnVuY3Rpb24gKHRva2VucyA9IFtdKSB7XHJcbiAgICAgICAgICAgIGlkbGVUaW1lID0gYWN0aXZhdGVUaW1lID0gMC4wO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFhd2FpdCB0aGlzLnRhbGsodG9rZW5zKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWxrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhbGs6IGFzeW5jIGZ1bmN0aW9uICh0b2tlbnMgPSBbXSkge1xyXG4gICAgICAgICAgICBsZXQgc2VxdWVuY2VzID0gdGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIkFjdGl2YXRlXCIpO1xyXG4gICAgICAgICAgICBsZXQgc2VxdWVuY2UgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gX3JhbmRvbShtaW4sIG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGguY2VpbChtaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzaHVmZmxlKGFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX3JhbmRvbShtaW4sIG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLmNlaWwobWluKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhID0gW10uY29uY2F0KGFycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IGFycmF5Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBfcmFuZG9tKDAsIG4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbi0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IGFbbl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhW25dID0gYVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYVtrXSA9IHRlbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSA2MCAqIDYwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcFN0YXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGVzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRlciA9IG5ldyBUaW55U2VnbWVudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlblNldCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRoaXMud29yZERpY3Rpb25hcnkgPT09IGZhbHNlIHx8IHRpbWVzdGFtcCAtIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLnRpbWVzdGFtcCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3dvcmRzL1wiICsgdG9rZW4pLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dID0geyBhdHRyaWJ1dGVzOiBbXSwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZCA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh3b3JkLmF0dHJpYnV0ZXNbYXR0cmlidXRlXSkgPT09IFwibnVtYmVyXCIgJiYgd29yZC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0gPiAwICYmIHRoaXMuYXR0cmlidXRlcy5pbmNsdWRlcyhhdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0uYXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHNodWZmbGUoc2VxdWVuY2VzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkU2VxdWVuY2UgPSB0aGlzLnByZXBhcmUoW3NdKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXNBYm9ydGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbyBvZiBwcmVwYXJlZFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLnR5cGUgPT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgQXJyYXkuaXNBcnJheShvLnRleHQpID8gby50ZXh0IDogc2VnbWVudGVyLnNlZ21lbnQoby50ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBwcmVwYXJlZFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYXdhaXQgdGhpcy5nZW5lcmF0ZShvYmoudGV4dCwgdG9rZW5zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBYm9ydGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FjaGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGV4dCwgY2FjaGVdID0gdGVtcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgdGV4dDogdGV4dCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVF1ZXVlLnB1c2goc2VxdWVuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b2tlbi5sZW5ndGggPiAxICYmICF0b2tlblNldC5pbmNsdWRlcyh0b2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRoaXMud29yZERpY3Rpb25hcnkgPT09IGZhbHNlIHx8IHRpbWVzdGFtcCAtIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLnRpbWVzdGFtcCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi93b3Jkcy9cIiArIHRva2VuKS5vbmNlKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0gPSB7IGF0dHJpYnV0ZXM6IFtdLCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgaW4gd29yZC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdKSA9PT0gXCJudW1iZXJcIiAmJiB3b3JkLmF0dHJpYnV0ZXNbYXR0cmlidXRlXSA+IDAgJiYgdGhpcy5hdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHJpYnV0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5pbmNsdWRlcyhhdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvYmogb2YgcHJlcGFyZWRTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT0gXCJNZXNzYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhd2FpdCB0aGlzLmdlbmVyYXRlKG9iai50ZXh0LCB0b2tlbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBYm9ydGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWNoZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RleHQsIGNhY2hlXSA9IHRlbXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgdGV4dDogdGV4dCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWJvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5wdXNoKHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblNldC5wdXNoKHRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZXMgPSB0ZW1wU3RhdGVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiB0aGlzLnByZXBhcmUoc2VxdWVuY2VzKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhd2FpdCB0aGlzLmdlbmVyYXRlKG9iai50ZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhY2hlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgW3RleHQsIGNhY2hlXSA9IHRlbXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKHsgdHlwZTogb2JqLnR5cGUsIHNwZWVkOiBvYmouc3BlZWQsIGR1cmF0aW9uOiBvYmouZHVyYXRpb24sIHRleHQ6IHRleHQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcXVlbmNlUXVldWUucHVzaChzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2VuZXJhdGU6IGFzeW5jIGZ1bmN0aW9uIChtZXNzYWdlLCBoaW50cyA9IFtdKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNob2ljZShwcm9iYWJpbGl0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgICAgIGxldCBzdW0gPSAwLjA7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHByb2JhYmlsaXR5IG9mIHByb2JhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3VtIDw9IHIgJiYgciA8IHN1bSArIHByb2JhYmlsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IHByb2JhYmlsaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzb2Z0bWF4KHgpIHtcclxuICAgICAgICAgICAgICAgIGxldCB5ID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4ID0gTnVtYmVyLk1JTl9WQUxVRTtcclxuICAgICAgICAgICAgICAgIGxldCBzdW0gPSAwLjA7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhbaV0gPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0geFtpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IE1hdGguZXhwKHhbaV0gLSBtYXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHkucHVzaChNYXRoLmV4cCh4W2ldIC0gbWF4KSAvIHN1bSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IE1hdGguZmxvb3IobmV3IERhdGUoKSAvIDEwMDApO1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gNjAgKiA2MDtcclxuICAgICAgICAgICAgbGV0IHNlZ21lbnRlciA9IG5ldyBUaW55U2VnbWVudGVyKCk7XHJcbiAgICAgICAgICAgIGxldCB0b2tlbnMgPSBBcnJheS5pc0FycmF5KG1lc3NhZ2UpID8gbWVzc2FnZSA6IHNlZ21lbnRlci5zZWdtZW50KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBsZXQgaGludERpY3Rpb25hcnkgPSB7fTtcclxuICAgICAgICAgICAgbGV0IHRva2VuU2V0ID0gW107XHJcbiAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoXCJbLiMkXFxcXFtcXFxcXV1cIik7XHJcbiAgICAgICAgICAgIGxldCBjYWNoRGljdGlvbmFyeSA9IHt9O1xyXG4gICAgICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGVwc2lsb24gPSBNYXRoLnBvdygxMCwgLTYpO1xyXG4gICAgICAgICAgICBjb25zdCBiZWFtV2lkdGggPSAxMDtcclxuICAgICAgICAgICAgbGV0IHNlcXVlbmNlcyA9IFt7IHNlcXVlbmNlOiBbXSwgc2NvcmU6IDEuMCB9XVxyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBoaW50cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRoaXMud29yZERpY3Rpb25hcnkgPT09IGZhbHNlIHx8IHRpbWVzdGFtcCAtIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLnRpbWVzdGFtcCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvd29yZHMvXCIgKyB0b2tlbikub25jZShcInZhbHVlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXSA9IHsgYXR0cmlidXRlczogW10sIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkID0gc25hcHNob3QudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdKSA9PT0gXCJudW1iZXJcIiAmJiB3b3JkLmF0dHJpYnV0ZXNbYXR0cmlidXRlXSA+IDAgJiYgdGhpcy5hdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHJpYnV0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXS5hdHRyaWJ1dGVzLnB1c2goYXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXS5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiBoaW50RGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaW50RGljdGlvbmFyeVthdHRyaWJ1dGVdLnB1c2godG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0gPSBbdG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5TZXQuaW5jbHVkZXModG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiBoaW50RGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBoaW50RGljdGlvbmFyeVthdHRyaWJ1dGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuaW5jbHVkZXMocykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybXMucHVzaChzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0aGlzLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9PT0gdGFnLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnB1c2godGFnLnNjb3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaChlcHNpbG9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeSA9PT0gZmFsc2UgfHwgdGltZXN0YW1wIC0gdGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnlbYXR0cmlidXRlXS50aW1lc3RhbXAgPj0gdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi93b3Jkc1wiKS5vcmRlckJ5Q2hpbGQoYGF0dHJpYnV0ZXMvJHthdHRyaWJ1dGV9YCkubGltaXRUb0xhc3QoMTAwKS5zdGFydEF0KDEpLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0gPSB7IHdvcmRzOiBbXSwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgaW4gd29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeVthdHRyaWJ1dGVdLndvcmRzLnB1c2god29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeVthdHRyaWJ1dGVdLndvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbnMuaW5jbHVkZXMod29yZCkgJiYgIXRlcm1zLmluY2x1ZGVzKHdvcmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNOZXcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1zLnB1c2god29yZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQgPT0gdGFnLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnB1c2godGFnLnNjb3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaChlcHNpbG9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1zLmxlbmd0aCA+IDAgJiYgc2NvcmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2JhYmlsaXRpZXMgPSBzb2Z0bWF4KHNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FuZGlkYXRlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VxdWVuY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwcm9iYWJpbGl0aWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZXF1ZW5jZSA9IFtdLmNvbmNhdChzZXF1ZW5jZXNbaV0uc2VxdWVuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2UucHVzaCh7IGluZGV4OiBpbmRleCwgdGVybTogdGVybXNbal0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7IHNlcXVlbmNlOiBzZXF1ZW5jZSwgc2NvcmU6IHNlcXVlbmNlc1tpXS5zY29yZSAqIHByb2JhYmlsaXRpZXNbal0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlcy5zcGxpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgdGhpcy50YWtlKGNhbmRpZGF0ZXMuc29ydCgoeCwgeSkgPT4geS5zY29yZSAtIHguc2NvcmUpLCBiZWFtV2lkdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VzLnB1c2goY2FuZGlkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXJlZ2V4LnRlc3QodG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2NvcmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gaW4gdGhpcy53b3JkRGljdGlvbmFyeSA9PT0gZmFsc2UgfHwgdGltZXN0YW1wIC0gdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0udGltZXN0YW1wID49IHRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3dvcmRzL1wiICsgdG9rZW4pLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmREaWN0aW9uYXJ5W3Rva2VuXSA9IHsgYXR0cmlidXRlczogW10sIHRpbWVzdGFtcDogdGltZXN0YW1wIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZCA9IHNuYXBzaG90LnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBpbiB3b3JkLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAod29yZC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0pID09PSBcIm51bWJlclwiICYmIHdvcmQuYXR0cmlidXRlc1thdHRyaWJ1dGVdID4gMCAmJiB0aGlzLmF0dHJpYnV0ZXMuaW5jbHVkZXMoYXR0cmlidXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JkRGljdGlvbmFyeVt0b2tlbl0uYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHRoaXMud29yZERpY3Rpb25hcnlbdG9rZW5dLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgaW4gaGludERpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBoaW50RGljdGlvbmFyeVthdHRyaWJ1dGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzTmV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtcy5wdXNoKGtleSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdGFnLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnB1c2godGFnLnNjb3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaChlcHNpbG9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbiB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeSA9PT0gZmFsc2UgfHwgdGltZXN0YW1wIC0gdGhpcy5yZXZlcnNlV29yZERpY3Rpb25hcnlbYXR0cmlidXRlXS50aW1lc3RhbXAgPj0gdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRhdGFiYXNlLnJlZihkYXRhYmFzZVJvb3QgKyBcIi93b3Jkc1wiKS5vcmRlckJ5Q2hpbGQoYGF0dHJpYnV0ZXMvJHthdHRyaWJ1dGV9YCkubGltaXRUb0xhc3QoMTAwKS5zdGFydEF0KDEpLm9uY2UoXCJ2YWx1ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0gPSB7IHdvcmRzOiBbXSwgdGltZXN0YW1wOiB0aW1lc3RhbXAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29yZHMgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gd29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJldmVyc2VXb3JkRGljdGlvbmFyeVthdHRyaWJ1dGVdLndvcmRzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHRoaXMucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2F0dHJpYnV0ZV0ud29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2Vucy5pbmNsdWRlcyh3b3JkKSAmJiAhdGVybXMuaW5jbHVkZXMod29yZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybXMucHVzaCh3b3JkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiB0aGlzLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZCA9PSB0YWcubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZXMucHVzaCh0YWcuc2NvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05ldyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jlcy5wdXNoKGVwc2lsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVybXMubGVuZ3RoID4gMCAmJiBzY29yZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvYmFiaWxpdGllcyA9IHNvZnRtYXgoc2NvcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXF1ZW5jZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHByb2JhYmlsaXRpZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlcXVlbmNlID0gW10uY29uY2F0KHNlcXVlbmNlc1tpXS5zZXF1ZW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKHsgaW5kZXg6IGluZGV4LCB0ZXJtOiB0ZXJtc1tqXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHsgc2VxdWVuY2U6IHNlcXVlbmNlLCBzY29yZTogc2VxdWVuY2VzW2ldLnNjb3JlICogcHJvYmFiaWxpdGllc1tqXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VzLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiB0aGlzLnRha2UoY2FuZGlkYXRlcy5zb3J0KCh4LCB5KSA9PiB5LnNjb3JlIC0geC5zY29yZSksIGJlYW1XaWR0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMucHVzaChjYW5kaWRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0b2tlblNldC5wdXNoKHRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzID0gc2VxdWVuY2VzW2Nob2ljZShzb2Z0bWF4KHNlcXVlbmNlcy5tYXAoeCA9PiB4LnNjb3JlKSkpXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeSh0b2tlbnNbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gY2FjaERpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhY2hEaWN0aW9uYXJ5W2tleV0gPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0b2tlbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBjYWNoRGljdGlvbmFyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzTmV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzLnNlcXVlbmNlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNlcXVlbmNlW2pdLmluZGV4ID09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gcy5zZXF1ZW5jZVtqXS50ZXJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaERpY3Rpb25hcnlba2V5XSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaERpY3Rpb25hcnlba2V5XSA9IHMuc2VxdWVuY2Vbal0udGVybTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IHMuc2VxdWVuY2Vbal0udGVybTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05ldyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodG9rZW5zW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdG9rZW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFt0ZXh0LCBjYWNoRGljdGlvbmFyeV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBub3RpZnk6IGZ1bmN0aW9uIChkYXRhLCBkdXJhdGlvbiA9IDMwMDApIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBkYXRhW1wiaWRcIl0gPSB3aW5kb3cuc2V0VGltZW91dCgoZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxmLm5vdGlmaWNhdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5ub3RpZmljYXRpb25zW2ldLmlkID09PSBkLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubm90aWZpY2F0aW9ucy5zcGxpY2UoaSwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGR1cmF0aW9uLCBkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy51bnNoaWZ0KGRhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmxpbmRlZDogYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kSW1hZ2VzUXVldWUubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfcmFuZG9tKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGguY2VpbChtaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBbXS5jb25jYXQoYXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuID0gYXJyYXkubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobiA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IF9yYW5kb20oMCwgbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYVtuXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFbbl0gPSBhW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhW2tdID0gdGVtcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW1hZ2Ugb2Ygc2h1ZmZsZSh0aGlzLnJlY2VudEltYWdlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRJbWFnZXNRdWV1ZS5wdXNoKGltYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLmJhY2tncm91bmRJbWFnZXNRdWV1ZS5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcmVsb2FkSW1hZ2VzLnNwbGljZSgwKTtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VzLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBpbWFnZS5wYXRocykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRJbWFnZXMucHVzaCh7IGlkOiBpbWFnZS5pZCwgdXJsOiBhd2FpdCBzdG9yYWdlLnJlZigpLmNoaWxkKHBhdGgpLmdldERvd25sb2FkVVJMKCksIHRpbWVzdGFtcDogaW1hZ2UudGltZXN0YW1wIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KHsgdGV4dDogZS5tZXNzYWdlLCBhY2NlbnQ6IHRoaXMuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IHRoaXMuY2hhcmFjdGVyLmltYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChcInRhZ3NcIiBpbiBpbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWxrKGltYWdlLnRhZ3MuZmlsdGVyKCh4KSA9PiB4LmluZGV4T2YodGhpcy5jaGFyYWN0ZXIubmFtZSkgPT09IC0xKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGxvYWQ6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgbGV0IGlzQ29tcGxldGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGltYWdlIG9mIHRoaXMucHJlbG9hZEltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlLnVybCA9PSB1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZVtcImlzTG9hZGVkXCJdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIShcImlzTG9hZGVkXCIgaW4gaW1hZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW1hZ2Ugb2YgdGhpcy5wcmVsb2FkSW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmlzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbWFnZS5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogaW1hZ2UudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBpbWFnZS50aW1lc3RhbXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRJbWFnZXMuc3BsaWNlKDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0JsaW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICAgICAgbGV0IGlzQ29tcGxldGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGltYWdlIG9mIHRoaXMucHJlbG9hZEltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlLnVybCA9PSB1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZVtcImlzTG9hZGVkXCJdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIShcImlzTG9hZGVkXCIgaW4gaW1hZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW1hZ2Ugb2YgdGhpcy5wcmVsb2FkSW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmlzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbWFnZS5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogaW1hZ2UudXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBpbWFnZS50aW1lc3RhbXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRJbWFnZXMuc3BsaWNlKDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0JsaW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXBkYXRlOiBhc3luYyBmdW5jdGlvbiAoZGF0YSwgbWF4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNVcGRhdGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVwc2lsb24gPSBNYXRoLnBvdygxMCwgLTYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkb2N1bWVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyZWREb2N1bWVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVybUZyZXF1ZW5jaWVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGludmVyc2VEb2N1bWVudEZyZXF1ZW5jeSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSAxMiAqIDYwICogNjAgKiAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbWl0ID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlRGljdGlvbmFyeSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzY29yZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF4U2NvcmUgPSBlcHNpbG9uO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInRhZ3NcIiBpbiBkYXRhW2tleV0gJiYgZGF0YVtrZXldLnRhZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm1TZXQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHMucHVzaCh7IHRva2VuczogZGF0YVtrZXldLnRhZ3MsIHRpbWVzdGFtcDogZGF0YVtrZXldLnRpbWVzdGFtcCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGRhdGFba2V5XS50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtU2V0LmluY2x1ZGVzKHRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gaW4gaW52ZXJzZURvY3VtZW50RnJlcXVlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRG9jdW1lbnRGcmVxdWVuY3lbdG9rZW5dICs9IDEuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VEb2N1bWVudEZyZXF1ZW5jeVt0b2tlbl0gPSAxLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1TZXQucHVzaCh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnZlcnNlRG9jdW1lbnRGcmVxdWVuY3kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZURvY3VtZW50RnJlcXVlbmN5W2tleV0gPSBNYXRoLmxvZyhkb2N1bWVudHMubGVuZ3RoIC8gKGludmVyc2VEb2N1bWVudEZyZXF1ZW5jeVtrZXldICsgZXBzaWxvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiBkb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnRpbWVzdGFtcCAqIDEwMDAgPiBiYXNlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWREb2N1bWVudHMucHVzaChkb2N1bWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZERvY3VtZW50cy5sZW5ndGggPCBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW4gPSBNYXRoLm1heChkb2N1bWVudHMubGVuZ3RoIC0gbGltaXQsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWREb2N1bWVudHMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGRvY3VtZW50cy5sZW5ndGggLSAxOyBpID49IG1pbjsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZERvY3VtZW50cy51bnNoaWZ0KGRvY3VtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZG9jdW1lbnQgb2YgZmlsdGVyZWREb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRmID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGRvY3VtZW50LnRva2Vucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuIGluIHRmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGZbdG9rZW5dICs9IDEuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGZbdG9rZW5dID0gMS4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0Zikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGZba2V5XSAvPSBkb2N1bWVudC50b2tlbnMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBzY29yZURpY3Rpb25hcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVEaWN0aW9uYXJ5W2tleV0gPSAwLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1GcmVxdWVuY2llcy5wdXNoKHRmKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNjb3JlRGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRlcm1GcmVxdWVuY3kgb2YgdGVybUZyZXF1ZW5jaWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHRlcm1GcmVxdWVuY3kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZmlkZiA9IHRlcm1GcmVxdWVuY3lba2V5XSAqIGludmVyc2VEb2N1bWVudEZyZXF1ZW5jeVtrZXldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGZpZGYgPiBzY29yZURpY3Rpb25hcnlba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZURpY3Rpb25hcnlba2V5XSA9IHRmaWRmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NvcmVEaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkubGVuZ3RoID4gMSAmJiBrZXkgIT0gXCIuLi5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnB1c2goeyB0ZXJtOiBrZXksIHZhbHVlOiBzY29yZURpY3Rpb25hcnlba2V5XSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnNvcnQoKHgsIHkpID0+IHkudmFsdWUgLSB4LnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3Jlcy5sZW5ndGggPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnNwbGljZShtYXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzY29yZSBvZiBzY29yZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlLnZhbHVlID4gbWF4U2NvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNjb3JlID0gc2NvcmUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2NvcmUgb2Ygc2NvcmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlLnZhbHVlIC89IG1heFNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcmVzLnNvcnQoKHgsIHkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHgudGVybSA+IHkudGVybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeC50ZXJtIDwgeS50ZXJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3Muc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFncy5wdXNoKHsgaW5kZXg6IGksIG5hbWU6IHJlc3VsdHNbaV0udGVybSwgc2NvcmU6IHJlc3VsdHNbaV0udmFsdWUgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoeyB0ZXh0OiBlLm1lc3NhZ2UsIGFjY2VudDogdGhpcy5jaGFyYWN0ZXIuYWNjZW50LCBpbWFnZTogdGhpcy5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzVXBkYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNoYWtlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmFuaW1hdGUoW1xyXG4gICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoMCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoOHB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgtOHB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCg3cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKC03cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKDZweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoLTZweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoNXB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgtNXB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCg0cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKC00cHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKDNweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoLTNweCwgMCwgMClcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlM2QoMnB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgtMnB4LCAwLCAwKVwiIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgxcHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKC0xcHgsIDAsIDApXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIgfV0sXHJcbiAgICAgICAgICAgICAgICB7IGR1cmF0aW9uOiAxMDAwLCBpdGVyYXRpb25zOiAxIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Nyb2xsVG9Ub3AoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoMCwgMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Nyb2xsVG9FbmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbFRpbWVvdXRJRCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsVGltZW91dElEKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUaW1lb3V0SUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgbW9tZW50LmxvY2FsZSh3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtb21lbnQoZXZlbnQpLmZvcm1hdChcIkxUXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0aW9uU3RhcnQ6IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFuaW1hdGlvbkVuZDogZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ub3RpZmljYXRpb25IZWlnaHQgPSBzZWxmLiRyZWZzLm5vdGlmaWNhdGlvbnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1BvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aWNrZXJVcGRhdGVkOiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNsaXAgb2YgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcj4ud3JhcD4uZnJhbWUgLmNsaXBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgY2xpcC5xdWVyeVNlbGVjdG9yQWxsKFwiOnNjb3BlIC50aWNrZXItd3JhcCAudGlja2VyIC5pdGVtXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGlja2VyV2lkdGggPSBNYXRoLm1pbih3aWR0aCAvIDIsIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIi5jb250YWluZXI+LndyYXA+LmZyYW1lIC5sZXZlbFwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXAucXVlcnlTZWxlY3RvcihcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlclwiKS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhcnJhbmdlOiBmdW5jdGlvbiAoY29sbGVjdGlvbiwgbGltaXQpIHtcclxuICAgICAgICAgICAgbGV0IHJvd3MgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPCBsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKGNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnMgPSBbaXRlbV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJvd3MucHVzaChjb2x1bW5zKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByb3dzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFrZTogZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGNvdW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmxlbmd0aCA+IGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IFtdLmNvbmNhdChjb2xsZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0ZW1wLnNwbGljZShjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlcGFyZTogZnVuY3Rpb24gKHNlcXVlbmNlcywgc3RhdGUgPSBudWxsLCBzZWxlY3RlZFNlcXVlbmNlcyA9IG51bGwpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gX3JhbmRvbShtaW4sIG1heCkge1xyXG4gICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGNob29zZWRTZXF1ZW5jZXMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGZsYXR0ZW5lZFNlcXVlbmNlID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcFN0YXRlID0gc3RhdGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBudWxsICYmIHMubmFtZSBpbiB0aGlzLnN0YXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBTdGF0ZSA9IHRoaXMuc3RhdGVzW3MubmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBTdGF0ZSAhPT0gbnVsbCAmJiBcInN0YXRlXCIgaW4gcyAmJiBzLnN0YXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChzLnN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QodGVtcFN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaG9vc2VkU2VxdWVuY2VzLnB1c2gocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hvb3NlZFNlcXVlbmNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBzZXF1ZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdGF0ZVwiIGluIHMgPT09IGZhbHNlIHx8IHMuc3RhdGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hvb3NlZFNlcXVlbmNlcy5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjaG9vc2VkU2VxdWVuY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBxdWV1ZSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBjaG9vc2VkU2VxdWVuY2VzW19yYW5kb20oMCwgY2hvb3NlZFNlcXVlbmNlcy5sZW5ndGgpXS5zZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlc1tzLm5hbWVdID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqID0gcXVldWUuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai50eXBlID09IFwiU2VxdWVuY2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJzZXF1ZW5jZVwiIGluIG9iaiA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFjZWRTZXF1ZW5jZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWxsYWJsZVNlcXVlbmNlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBzZWxlY3RlZFNlcXVlbmNlcyA9PT0gbnVsbCA/IHRoaXMuY2hhcmFjdGVyLnNlcXVlbmNlcyA6IHNlbGVjdGVkU2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlcXVlbmNlU3RhY2sgPSB0aGlzLmdldFNlcXVlbmNlU3RhY2socywgb2JqKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlU3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhY2sgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3BwZWRTZXF1ZW5jZSA9IHNlcXVlbmNlU3RhY2sucG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlU3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wU3RhY2sgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIHNlcXVlbmNlU3RhY2tbc2VxdWVuY2VTdGFjay5sZW5ndGggLSAxXS5zZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby50eXBlID09IFwiU2VxdWVuY2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwic2VxdWVuY2VcIiBpbiBvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzTmV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0ZW1wU2VxdWVuY2Ugb2Ygc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBTZXF1ZW5jZSA9PT0gbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTdGFjay5wdXNoKG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gcG9wcGVkU2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRlbXBTdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2godGVtcFN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwic2VxdWVuY2VcIiBpbiBwb3BwZWRTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc05ldyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGVtcFNlcXVlbmNlIG9mIHN0YWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wU2VxdWVuY2UgPT09IHBvcHBlZFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05ldyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChwb3BwZWRTZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChzZXF1ZW5jZVN0YWNrLmxlbmd0aCA+IDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlZFNlcXVlbmNlcy5wdXNoKHN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2VkU2VxdWVuY2VzLnB1c2gocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInN0YXRlXCIgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZXNbb2JqLm5hbWVdID0gb2JqLnN0YXRlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdHJhY2VkU2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm5hbWUgPT0gb2JqLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAocy5zdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KG9iai5zdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYWJsZVNlcXVlbmNlcy5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdHJhY2VkU2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm5hbWUgPT0gb2JqLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInN0YXRlXCIgaW4gcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLm5hbWUgaW4gdGhpcy5zdGF0ZXMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChzLnN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KHRoaXMuc3RhdGVzW3MubmFtZV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYWJsZVNlcXVlbmNlcy5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYWJsZVNlcXVlbmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIGNhbGxhYmxlU2VxdWVuY2VzW19yYW5kb20oMCwgY2FsbGFibGVTZXF1ZW5jZXMubGVuZ3RoKV0uc2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUuc3BsaWNlKGluZGV4LCAwLCBvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGF0dGVuZWRTZXF1ZW5jZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlbmVkU2VxdWVuY2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRTZXF1ZW5jZVN0YWNrOiBmdW5jdGlvbiAoc291cmNlU2VxdWVuY2UsIHRhcmdldFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgIGxldCBzZXF1ZW5jZVN0YWNrID0gW107XHJcblxyXG4gICAgICAgICAgICBzZXF1ZW5jZVN0YWNrLnB1c2goc291cmNlU2VxdWVuY2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlcXVlbmNlU3RhY2tbc2VxdWVuY2VTdGFjay5sZW5ndGggLSAxXSAhPT0gdGFyZ2V0U2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcInNlcXVlbmNlXCIgaW4gc291cmNlU2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG8gb2Ygc291cmNlU2VxdWVuY2Uuc2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcIlNlcXVlbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IHRoaXMuZ2V0U2VxdWVuY2VTdGFjayhvLCB0YXJnZXRTZXF1ZW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA+IDAgJiYgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPT09IHRhcmdldFNlcXVlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBTdGFjayA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTdGFjay5wdXNoKHN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChzdGFjay5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZVN0YWNrLnB1c2godGVtcFN0YWNrLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICh0ZW1wU3RhY2subGVuZ3RoID4gMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXF1ZW5jZVN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlU3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXF1ZW5jZVN0YWNrO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhVGltZSA9IGNsb2NrLmdldERlbHRhKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVuZGVyZXIuZG9tRWxlbWVudC53aWR0aCAhPT0gcmVuZGVyZXIuZG9tRWxlbWVudC5jbGllbnRXaWR0aCB8fCByZW5kZXJlci5kb21FbGVtZW50LmhlaWdodCAhPT0gcmVuZGVyZXIuZG9tRWxlbWVudC5jbGllbnRIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gcmVuZGVyZXIuZG9tRWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHJlbmRlcmVyLmRvbUVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGJsb29tUGFzcy5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgZnhhYVNoYWRlci51bmlmb3Jtcy5yZXNvbHV0aW9uLnZhbHVlLnNldCgxIC8gKHdpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pLCAxIC8gKGhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gd2lkdGggLyBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbXBvc2VyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgY29tcG9zZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHZybU1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBfcmFuZG9tKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzRGVmb3JtaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsZXQgYW5pbWF0aW9uRGF0YSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBsZXQgdXBkYXRlZEJsZW5kU2hhcGVOYW1lcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsb29rQW5pbWF0aW9uID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9va0FuaW1hdGlvbiA9IHsgdGltZTogMC4wLCBkdXJhdGlvbjogMC41LCBiYXNlOiB7IHg6IGxvb2tBdFRhcmdldC5wb3NpdGlvbi54LCB5OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueSB9LCBzb3VyY2U6IHsgeDogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLngsIHk6IGxvb2tBdFRhcmdldC5wb3NpdGlvbi55IH0sIHRhcmdldDogeyB4OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueCArIF9yYW5kb20oLTEuMCwgMS4wKSAqIDAuMSwgeTogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgKyBfcmFuZG9tKC0xLjAsIDEuMCkgKiAwLjEgfSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxvb2tBbmltYXRpb24udGltZSArPSBkZWx0YVRpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxvb2tBbmltYXRpb24udGltZSA+PSBsb29rQW5pbWF0aW9uLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnggPSBsb29rQW5pbWF0aW9uLnRhcmdldC54O1xyXG4gICAgICAgICAgICAgICAgICAgIGxvb2tBdFRhcmdldC5wb3NpdGlvbi55ID0gbG9va0FuaW1hdGlvbi50YXJnZXQueTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvb2tBbmltYXRpb24uYmFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29rQW5pbWF0aW9uID0geyB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHNvdXJjZTogeyB4OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueCwgeTogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgfSwgdGFyZ2V0OiB7IHg6IGxvb2tBbmltYXRpb24uYmFzZS54LCB5OiBsb29rQW5pbWF0aW9uLmJhc2UueSB9IH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9va0FuaW1hdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gbG9va0FuaW1hdGlvbi50aW1lIC8gbG9va0FuaW1hdGlvbi5kdXJhdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnggPSBsb29rQW5pbWF0aW9uLnNvdXJjZS54ICsgKGxvb2tBbmltYXRpb24udGFyZ2V0LnggLSBsb29rQW5pbWF0aW9uLnNvdXJjZS54KSAqIHJhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgPSBsb29rQW5pbWF0aW9uLnNvdXJjZS55ICsgKGxvb2tBbmltYXRpb24udGFyZ2V0LnkgLSBsb29rQW5pbWF0aW9uLnNvdXJjZS55KSAqIHJhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGJsaW5rT2Zmc2V0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oLWxvb2tBdFRhcmdldC5wb3NpdGlvbi55LCAxKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxpbmtSZXF1aXJlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEFuaW1hdGlvbnMubGVuZ3RoID4gMCAmJiBhbmltYXRpb25JbmRleCA8IHRoaXMuY3VycmVudEFuaW1hdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRGF0YSA9IHRoaXMuY3VycmVudEFuaW1hdGlvbnNbYW5pbWF0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkluZGV4ICs9IGFuaW1hdGlvblNraXBGcmFtZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsZW5kU2hhcGVBbmltYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJsZW5kU2hhcGVBbmltYXRpb24gPSB0aGlzLmJsZW5kU2hhcGVBbmltYXRpb25zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZWRCbGVuZFNoYXBlTmFtZXMuaW5jbHVkZXMoYmxlbmRTaGFwZUFuaW1hdGlvbi5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxlbmRTaGFwZUFuaW1hdGlvbi50aW1lIDw9IGJsZW5kU2hhcGVBbmltYXRpb24uZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsZW5kU2hhcGVBbmltYXRpb24udGltZSArPSBkZWx0YVRpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsZW5kU2hhcGVBbmltYXRpb24udGltZSA+PSBibGVuZFNoYXBlQW5pbWF0aW9uLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsZW5kU2hhcGVBbmltYXRpb24ubmFtZSA9PSBcImJsaW5rXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKGJsZW5kU2hhcGVBbmltYXRpb24ubmFtZSwgMC4xICogYmxpbmtPZmZzZXQgKyAoMSAtIDAuMSkgKiBNYXRoLmFicyhNYXRoLnNpbihibGVuZFNoYXBlQW5pbWF0aW9uLmVuZCAvIDIgKiBNYXRoLlBJKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGlua1JlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKGJsZW5kU2hhcGVBbmltYXRpb24ubmFtZSwgTWF0aC5hYnMoTWF0aC5zaW4oYmxlbmRTaGFwZUFuaW1hdGlvbi5lbmQgLyAyICogTWF0aC5QSSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxlbmRTaGFwZUFuaW1hdGlvbnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChibGVuZFNoYXBlQW5pbWF0aW9uLm5hbWUgPT0gXCJibGlua1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKGJsZW5kU2hhcGVBbmltYXRpb24ubmFtZSwgMC4xICogYmxpbmtPZmZzZXQgKyAoMSAtIDAuMSkgKiBNYXRoLmFicyhNYXRoLnNpbigoYmxlbmRTaGFwZUFuaW1hdGlvbi50aW1lIC8gYmxlbmRTaGFwZUFuaW1hdGlvbi5kdXJhdGlvbiAqIChibGVuZFNoYXBlQW5pbWF0aW9uLmVuZCAtIGJsZW5kU2hhcGVBbmltYXRpb24uc3RhcnQpICsgYmxlbmRTaGFwZUFuaW1hdGlvbi5zdGFydCkgLyAyICogTWF0aC5QSSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGlua1JlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybU1vZGVsLmJsZW5kU2hhcGVQcm94eS5zZXRWYWx1ZShibGVuZFNoYXBlQW5pbWF0aW9uLm5hbWUsIE1hdGguYWJzKE1hdGguc2luKChibGVuZFNoYXBlQW5pbWF0aW9uLnRpbWUgLyBibGVuZFNoYXBlQW5pbWF0aW9uLmR1cmF0aW9uICogKGJsZW5kU2hhcGVBbmltYXRpb24uZW5kIC0gYmxlbmRTaGFwZUFuaW1hdGlvbi5zdGFydCkgKyBibGVuZFNoYXBlQW5pbWF0aW9uLnN0YXJ0KSAvIDIgKiBNYXRoLlBJKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVmb3JtaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEJsZW5kU2hhcGVOYW1lcy5wdXNoKGJsZW5kU2hhcGVBbmltYXRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChibGlua1JlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKFwiYmxpbmtcIiwgMC4xICogYmxpbmtPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcXVlbmNlUXVldWUubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHRoaXMuc2VxdWVuY2VRdWV1ZVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRsZVRpbWUgKz0gZGVsdGFUaW1lO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlVGltZSArPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXF1ZW5jZVF1ZXVlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmF0ZVRpbWUgPj0gYWN0aXZhdGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY2VudEltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0JsaW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVUaW1lID0gYWN0aXZhdGVUaW1lID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlkbGVUaW1lID49IGJsaW5rVGhyZXNob2xkIHx8IGFuaW1hdGlvbkRhdGEgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5wdXNoKHsgc2VxdWVuY2VzOiB0aGlzLnByZXBhcmUodGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIklkbGVcIikpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZVRpbWUgPSAwLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VxdWVuY2VRdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBBcnJheS5pc0FycmF5KHRoaXMuc2VxdWVuY2VRdWV1ZVswXSkgPyB0aGlzLnNlcXVlbmNlUXVldWVbMF0gOiB0aGlzLnNlcXVlbmNlUXVldWVbMF0uc2VxdWVuY2VzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2VbMF0udHlwZSA9PSBcIkFuaW1hdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJuYW1lXCIgaW4gc2VxdWVuY2VbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2VbMF0ubmFtZSBpbiB0aGlzLmFuaW1hdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGVwZW5kZW5jeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZGVwZW5kZW5jaWVzXCIgaW4gc2VxdWVuY2VbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYW5pbWF0aW9uIG9mIHRoaXMuY3VycmVudEFuaW1hdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2VbMF0uZGVwZW5kZW5jaWVzLmluY2x1ZGVzKGFuaW1hdGlvbi5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RlcGVuZGVuY3kgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGVwZW5kZW5jeSB8fCAhaXNBbmltYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qY29uc3Qgc2tpcEZyYW1lcyA9IDYwIC8gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5pbWF0aW9ucyA9IHRoaXMuYW5pbWF0aW9uc1tzdWdnZXN0aW9uLmFuaW1hdGlvbl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF4RnJhbWVzID0gTWF0aC5taW4oYW5pbWF0aW9ucy5sZW5ndGgsIDYwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIHJhbmRvbSgwLCBhbmltYXRpb25zLmxlbmd0aCAtIG1heEZyYW1lcyAtIDEpKSAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IE1hdGgucm91bmQoOTAgLyAyNCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhGcmFtZXM7IGkgKz0gc2tpcEZyYW1lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9ucy5wdXNoKGFuaW1hdGlvbnNbb2Zmc2V0ICsgaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5jdXJyZW50QW5pbWF0aW9ucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbnMucHVzaChhbmltYXRpb25zW29mZnNldCArIGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbnMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGFuaW1hdGlvbiBvZiB0aGlzLmFuaW1hdGlvbnNbc2VxdWVuY2VbMF0ubmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb25zLnB1c2goYW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkRhdGEgPSB0aGlzLmN1cnJlbnRBbmltYXRpb25zW2FuaW1hdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkluZGV4ICs9IGFuaW1hdGlvblNraXBGcmFtZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNEZXBlbmRlbmN5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJkZXBlbmRlbmNpZXNcIiBpbiBzZXF1ZW5jZVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhbmltYXRpb24gb2YgdGhpcy5ibGVuZFNoYXBlQW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZVswXS5kZXBlbmRlbmNpZXMuaW5jbHVkZXMoYW5pbWF0aW9uLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVwZW5kZW5jeSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNEZXBlbmRlbmN5IHx8ICFpc0RlZm9ybWluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWVTZXQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsZW5kU2hhcGVBbmltYXRpb25zLnVuc2hpZnQoeyBuYW1lOiBzZXF1ZW5jZVswXS5uYW1lLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiBzZXF1ZW5jZVswXS5kdXJhdGlvbiwgc3RhcnQ6IHNlcXVlbmNlWzBdLnN0YXJ0LCBlbmQ6IHNlcXVlbmNlWzBdLmVuZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnNoaWZ0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RlcGVuZGVuY3kgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZGVwZW5kZW5jaWVzXCIgaW4gc2VxdWVuY2VbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhbmltYXRpb24gb2YgdGhpcy5ibGVuZFNoYXBlQW5pbWF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlWzBdLmRlcGVuZGVuY2llcy5pbmNsdWRlcyhhbmltYXRpb24ubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RlcGVuZGVuY3kgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVwZW5kZW5jeSB8fCBzZXF1ZW5jZVswXS50eXBlICE9IFwiQW5pbWF0aW9uXCIgfHwgc2VxdWVuY2VbMF0ubmFtZSBpbiB0aGlzLmFuaW1hdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsZW5kU2hhcGVBbmltYXRpb25zLnVuc2hpZnQoeyBuYW1lOiBzZXF1ZW5jZVswXS5uYW1lLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiBzZXF1ZW5jZVswXS5kdXJhdGlvbiwgc3RhcnQ6IHNlcXVlbmNlWzBdLnN0YXJ0LCBlbmQ6IHNlcXVlbmNlWzBdLmVuZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsZW5kU2hhcGVBbmltYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsZW5kU2hhcGVBbmltYXRpb24gPSB0aGlzLmJsZW5kU2hhcGVBbmltYXRpb25zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWVTZXQuaW5jbHVkZXMoYmxlbmRTaGFwZUFuaW1hdGlvbi5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cm1Nb2RlbC5ibGVuZFNoYXBlUHJveHkuc2V0VmFsdWUoYmxlbmRTaGFwZUFuaW1hdGlvbi5uYW1lLCBNYXRoLmFicyhNYXRoLnNpbihibGVuZFNoYXBlQW5pbWF0aW9uLnN0YXJ0IC8gMiAqIE1hdGguUEkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVTZXQucHVzaChibGVuZFNoYXBlQW5pbWF0aW9uLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyppZiAobG9va0F0VGFyZ2V0LnBvc2l0aW9uLnggIT0gMC4wIHx8IGxvb2tBdFRhcmdldC5wb3NpdGlvbi55ICE9IDAuMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rQW5pbWF0aW9uID0geyB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHNvdXJjZTogeyB4OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueCwgeTogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgfSwgdGFyZ2V0OiB7IHg6IDAuMCwgeTogMC4wIH0gfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2Uuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXF1ZW5jZVswXS50eXBlID09IFwiTWVzc2FnZVwiICYmIHRoaXMubWVzc2FnZSA9PT0gbnVsbCAmJiAhaXNBbmltYXRpbmcgJiYgIWlzRGVmb3JtaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJjaGFyYWN0ZXJcIiBpbiBzZXF1ZW5jZVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHsgdGltZTogMCwgZHVyYXRpb246IHNlcXVlbmNlWzBdLmR1cmF0aW9uLCB0eXBlOiB7IGVsYXBzZWQ6IC0xLCBzcGVlZDogc2VxdWVuY2VbMF0uc3BlZWQsIHJldmVyc2U6IGZhbHNlLCBidWZmZXI6IFwiXCIsIGNvdW50OiAwIH0sIGNoYXJhY3Rlcjogc2VxdWVuY2VbMF0uY2hhcmFjdGVyLCB0ZXh0OiBzZXF1ZW5jZVswXS50ZXh0IH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHsgdGltZTogMCwgZHVyYXRpb246IHNlcXVlbmNlWzBdLmR1cmF0aW9uLCB0eXBlOiB7IGVsYXBzZWQ6IC0xLCBzcGVlZDogc2VxdWVuY2VbMF0uc3BlZWQsIHJldmVyc2U6IGZhbHNlLCBidWZmZXI6IFwiXCIsIGNvdW50OiAwIH0sIGNoYXJhY3RlcjogeyBuYW1lOiB0aGlzLmNoYXJhY3Rlci5uYW1lLCBhY2NlbnQ6IHRoaXMuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IHRoaXMuY2hhcmFjdGVyLmltYWdlIH0sIHRleHQ6IHNlcXVlbmNlWzBdLnRleHQgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc011dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubWVzc2FnZS50ZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FpLm1pbGNoY2hhbi5jb20vYXBpL3N5bnRoZXNpemU/dGV4dD1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0ZXh0KSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnBsYXllci5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF3YWl0IHJlc3BvbnNlLmJsb2IoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UgIT09IG51bGwgJiYgdGV4dCA9PT0gdGhpcy5tZXNzYWdlLnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wbGF5ZXIuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnBsYXllci5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWVzc2FnZSA9PT0gbnVsbCAmJiAhaXNBbmltYXRpbmcgJiYgIWlzRGVmb3JtaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvKn0gZWxzZSBpZiAoYXBwLnN1Z2dlc3Rpb25RdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSBhcHAuc3VnZ2VzdGlvblF1ZXVlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gc3VnZ2VzdGlvbi5tZXNzYWdlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvb3BSZXF1aXJlZCA9IHRydWU7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZS5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlLmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHlwZS5lbGFwc2VkICs9IGRlbHRhVGltZTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUuZWxhcHNlZCA+PSBtZXNzYWdlLnR5cGUuc3BlZWQgLyAxMDAwLjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gbWVzc2FnZS50eXBlLmNvdW50IC0gMTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBtZXNzYWdlLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGggPSBNYXRoLmZsb29yKG1lc3NhZ2UudGV4dC5sZW5ndGggLyAyKTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoIDw9IHdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50eXBlLmNvdW50IC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUuYnVmZmVyID0gbWVzc2FnZS50eXBlLmJ1ZmZlci5zdWJzdHJpbmcobWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGggLSAyLCBtZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50eXBlLmVsYXBzZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXBwLmlzU3VnZ2VzdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb24ubWVzc2FnZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uLm1lc3NhZ2VzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnN1Z2dlc3Rpb25RdWV1ZS5zaGlmdCgpO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHAuc3VnZ2VzdGlvblF1ZXVlLmxlbmd0aCA+IDAgJiYgJ2hpZ2hsaWdodCcgaW4gYXBwLnN1Z2dlc3Rpb25RdWV1ZVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCd0ZXh0JyBpbiBhcHAuc3VnZ2VzdGlvblF1ZXVlWzBdLmhpZ2hsaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5oaWdobGlnaHQgPSBhcHAuc3VnZ2VzdGlvblF1ZXVlWzBdLmhpZ2hsaWdodC50ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuaGlnaGxpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdpbWFnZScgaW4gYXBwLnN1Z2dlc3Rpb25RdWV1ZVswXS5oaWdobGlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuY292ZXIgPSBhcHAuc3VnZ2VzdGlvblF1ZXVlWzBdLmhpZ2hsaWdodC5pbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmNvdmVyID0gYXBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmlzQmxpbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcHAuaXNCbGluZGVkICYmICFpc0FjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnbW9ycGhzJyBpbiBzdWdnZXN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGJsZW5kU2hhcGUgb2Ygc3VnZ2VzdGlvbi5tb3JwaHMuZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybU1vZGVsLmJsZW5kU2hhcGVQcm94eS5zZXRWYWx1ZShibGVuZFNoYXBlLm5hbWUsIE1hdGguYWJzKE1hdGguc2luKGJsZW5kU2hhcGUud2VpZ2h0IC8gMiAqIE1hdGguUEkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuc3VnZ2VzdGlvblF1ZXVlLnNwbGljZSgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuaXNCbGluZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcFJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGggPCBtZXNzYWdlLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlLmVsYXBzZWQgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHlwZS5lbGFwc2VkICs9IGRlbHRhVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcHAuaXNQcmVsb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRUaW1lICs9IGRlbHRhVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLmhpZ2hsaWdodCA9PT0gbnVsbCAmJiBhcHAuY292ZXIgPT09IG51bGwgfHwgd2FpdFRpbWUgPj0gd2FpdFRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUuZWxhcHNlZCA9IGRlbHRhVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmlzQmxpbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuY3VycmVudEFuaW1hdGlvbnMuc3BsaWNlKDApO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnYW5pbWF0aW9uJyBpbiBzdWdnZXN0aW9uICYmIHN1Z2dlc3Rpb24uYW5pbWF0aW9uIGluIGFwcC5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lwRnJhbWVzID0gNjAgLyAxMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmltYXRpb25zID0gYXBwLmFuaW1hdGlvbnNbc3VnZ2VzdGlvbi5hbmltYXRpb25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1heEZyYW1lcyA9IE1hdGgubWluKGFuaW1hdGlvbnMubGVuZ3RoLCA2MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gTWF0aC5mbG9vcihNYXRoLm1heCgwLCBfcmFuZG9tKDAsIGFuaW1hdGlvbnMubGVuZ3RoIC0gbWF4RnJhbWVzKSkgLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsZW5ndGggPSBNYXRoLnJvdW5kKDkwIC8gMjQpO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEZyYW1lczsgaSArPSBza2lwRnJhbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuY3VycmVudEFuaW1hdGlvbnMucHVzaChhbmltYXRpb25zW29mZnNldCArIGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBhcHAuY3VycmVudEFuaW1hdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuY3VycmVudEFuaW1hdGlvbnMucHVzaChhbmltYXRpb25zW29mZnNldCArIGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnbW9ycGhzJyBpbiBzdWdnZXN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZVNldCA9IFtdO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBibGVuZFNoYXBlIG9mIHN1Z2dlc3Rpb24ubW9ycGhzLmRlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuYmxlbmRTaGFwZVByb3h5LnNldFZhbHVlKGJsZW5kU2hhcGUubmFtZSwgTWF0aC5hYnMoTWF0aC5zaW4oYmxlbmRTaGFwZS53ZWlnaHQgLyAyICogTWF0aC5QSSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYmxlbmRTaGFwZUFuaW1hdGlvbiBvZiBzdWdnZXN0aW9uLm1vcnBocy5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmJsZW5kU2hhcGVBbmltYXRpb25zLnVuc2hpZnQoYmxlbmRTaGFwZUFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBhcHAuYmxlbmRTaGFwZUFuaW1hdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmxlbmRTaGFwZUFuaW1hdGlvbiA9IGFwcC5ibGVuZFNoYXBlQW5pbWF0aW9uc1tpXTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmFtZVNldC5pbmNsdWRlcyhibGVuZFNoYXBlQW5pbWF0aW9uLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybU1vZGVsLmJsZW5kU2hhcGVQcm94eS5zZXRWYWx1ZShibGVuZFNoYXBlQW5pbWF0aW9uLm5hbWUsIE1hdGguYWJzKE1hdGguc2luKGJsZW5kU2hhcGVBbmltYXRpb24uc3RhcnQgLyAyICogTWF0aC5QSSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVNldC5wdXNoKGJsZW5kU2hhcGVBbmltYXRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdFRpbWUgPSAwLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9vcFJlcXVpcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlLmVsYXBzZWQgPj0gbWVzc2FnZS50eXBlLnNwZWVkIC8gMTAwMC4wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gbWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gTWF0aC5mbG9vcihtZXNzYWdlLnRleHQubGVuZ3RoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IG1lc3NhZ2UudGV4dC5sZW5ndGg7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlLmNvdW50ID49IHdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHlwZS5idWZmZXIgKz0gbWVzc2FnZS50ZXh0LmNoYXJBdChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZS5jb3VudCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUuY291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUuZWxhcHNlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnRpbWUgKz0gZGVsdGFUaW1lO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50aW1lID49IG1lc3NhZ2UuZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnR5cGUucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50ZXh0Lmxlbmd0aCA9PT0gbWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSBtZXNzYWdlLnRleHQuc3BsaXQoXCJcIik7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC50ZXh0LnNwbGljZSgwKTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRleHQucHVzaCh7IGtleTogaSwgdmFsdWU6IGNoYXJhY3RlcnNbaV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckFycmF5ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZG9tQnVmZmVyID0gXCJcIjtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLnRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckFycmF5LmluZGV4T2YobWVzc2FnZS50ZXh0LmNoYXJBdChpKSkgPT0gLTEgJiYgbWVzc2FnZS50ZXh0LmNoYXJBdChpKSAhPSBcIlxcblwiICYmIG1lc3NhZ2UudGV4dC5jaGFyQXQoaSkubWF0Y2goL1xccy8pID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckFycmF5LnB1c2gobWVzc2FnZS50ZXh0LmNoYXJBdChpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UudHlwZS5jb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJBcnJheS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbUJ1ZmZlciArPSBjaGFyQXJyYXlbfn5fcmFuZG9tKDAsIGNoYXJBcnJheS5sZW5ndGgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5kb21CdWZmZXIubGVuZ3RoID4gbWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gKG1lc3NhZ2UudHlwZS5idWZmZXIgKyByYW5kb21CdWZmZXIuc3Vic3RyaW5nKG1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoLCByYW5kb21CdWZmZXIubGVuZ3RoKSkuc3BsaXQoXCJcIik7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAudGV4dC5zcGxpY2UoMCk7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRleHQucHVzaCh7IGtleTogaSwgdmFsdWU6IGNoYXJhY3RlcnNbaV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcHAudGV4dC5sZW5ndGggIT09IG1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVycyA9IG1lc3NhZ2UudHlwZS5idWZmZXIuc3BsaXQoXCJcIik7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAudGV4dC5zcGxpY2UoMCk7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRleHQucHVzaCh7IGtleTogaSwgdmFsdWU6IGNoYXJhY3RlcnNbaV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvb3BSZXF1aXJlZCAmJiBhbmltYXRpb25EYXRhID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25JbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25EYXRhID0gYXBwLmN1cnJlbnRBbmltYXRpb25zW2FuaW1hdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkluZGV4ICs9IGFuaW1hdGlvblNraXBGcmFtZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICAgICAgICAgIC8vfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvKmlmIChhcHAuaXNTdWdnZXN0ZWQgJiYgYXBwLnN1Z2dlc3Rpb25RdWV1ZS5sZW5ndGggPT0gMCAmJiAhYXBwLmlzQ29tcHV0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBNZXNzYWdlczEgPSBbXS5jb25jYXQoYXBwLm1lc3NhZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcFRhZ3MgPSBbXS5jb25jYXQoYXBwLnRhZ3MpO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5pc0NvbXB1dGluZyA9IHRydWU7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VnbWVudGVyID0gbmV3IFRpbnlTZWdtZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXNldHMgPSBbeyBhbmltYXRpb246ICdpZGxlMicsIG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5GdW4gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgYW5pbWF0aW9uOiAnanVtcCcsIG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5Kb3kgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgYW5pbWF0aW9uOiAnd2luJywgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLkpveSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBhbmltYXRpb246ICdsb3NlJywgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLlNvcnJvdyB9XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWdnZXN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBNZXNzYWdlczIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpZHMxID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWRzMiA9IFtdO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0YWcgb2YgdGVtcFRhZ3Muc29ydCgoeCwgeSkgPT4geS5zY29yZSAtIHguc2NvcmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbWVzc2FnZSBvZiB0ZW1wTWVzc2FnZXMxLnJldmVyc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlkczEuaW5jbHVkZXMobWVzc2FnZS5pZCkgJiYgc2VnbWVudGVyLnNlZ21lbnQobWVzc2FnZS50ZXh0KS5pbmNsdWRlcyh0YWcubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aHJlYWQgPSBudWxsO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3RocmVhZCcgaW4gbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG0gb2YgdGVtcE1lc3NhZ2VzMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50aHJlYWQgPT0gbS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkID0gbTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aHJlYWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWVzc2FnZXMyLnB1c2gobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwcmVzZXRzW19yYW5kb20oMCwgMildO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCh7IGhpZ2hsaWdodDogeyB0ZXh0OiAn5LuK5pel44GuJyArIGRvY3VtZW50LnRpdGxlLCBpbWFnZTogJy9pbWFnZXMvQ292ZXIucG5nJyB9LCBtZXNzYWdlczogW3sgdGltZTogMCwgZHVyYXRpb246IDUsIHR5cGU6IHsgZWxhcHNlZDogLTEsIHNwZWVkOiA1MCwgcmV2ZXJzZTogZmFsc2UsIGJ1ZmZlcjogXCJcIiwgY291bnQ6IDAgfSwgdGV4dDogdGhyZWFkLnRleHQgfSwgeyB0aW1lOiAwLCBkdXJhdGlvbjogNSwgdHlwZTogeyBlbGFwc2VkOiAwLCBzcGVlZDogNTAsIHJldmVyc2U6IGZhbHNlLCBidWZmZXI6IFwiXCIsIGNvdW50OiAwIH0sIHRleHQ6IG1lc3NhZ2UudGV4dCB9XSwgYW5pbWF0aW9uOiBpdGVtLmFuaW1hdGlvbiwgbW9ycGhzOiB7IGFuaW1hdGlvbnM6IFt7IG5hbWU6IGl0ZW0ubmFtZSwgdGltZTogMC4wLCBkdXJhdGlvbjogMS4wLCBzdGFydDogMS4wLCBlbmQ6IDEuMCB9XSwgZGVmYXVsdHM6IFt7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5Kb3ksIHdlaWdodDogMC4wIH0sIHsgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLlNvcnJvdywgd2VpZ2h0OiAwLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuRnVuLCB3ZWlnaHQ6IDAuMCB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5CbGluaywgd2VpZ2h0OiAwLjAgfV0gfSB9KTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaWRzMi5pbmNsdWRlcyh0aHJlYWQuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkczIucHVzaCh0aHJlYWQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRzMS5wdXNoKG1lc3NhZ2UuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgdGVtcE1lc3NhZ2VzMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaWRzMi5pbmNsdWRlcyhtZXNzYWdlLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcHJlc2V0c1tfcmFuZG9tKDAsIDIpXTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKHsgaGlnaGxpZ2h0OiB7IHRleHQ6ICfku4rml6Xjga4nICsgZG9jdW1lbnQudGl0bGUsIGltYWdlOiAnL2ltYWdlcy9Db3Zlci5wbmcnIH0sIG1lc3NhZ2VzOiBbeyB0aW1lOiAwLCBkdXJhdGlvbjogNSwgdHlwZTogeyBlbGFwc2VkOiAtMSwgc3BlZWQ6IDUwLCByZXZlcnNlOiBmYWxzZSwgYnVmZmVyOiBcIlwiLCBjb3VudDogMCB9LCB0ZXh0OiBtZXNzYWdlLnRleHQgfV0sIGFuaW1hdGlvbjogaXRlbS5hbmltYXRpb24sIG1vcnBoczogeyBhbmltYXRpb25zOiBbeyBuYW1lOiBpdGVtLm5hbWUsIHRpbWU6IDAuMCwgZHVyYXRpb246IDEuMCwgc3RhcnQ6IDEuMCwgZW5kOiAxLjAgfV0sIGRlZmF1bHRzOiBbeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuSm95LCB3ZWlnaHQ6IDAuMCB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5Tb3Jyb3csIHdlaWdodDogMC4wIH0sIHsgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLkZ1biwgd2VpZ2h0OiAwLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuQmxpbmssIHdlaWdodDogMC4wIH1dIH0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHN1Z2dlc3Rpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLmlzU3VnZ2VzdGVkICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdWdnZXN0aW9uIG9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuc3VnZ2VzdGlvblF1ZXVlLnB1c2goc3VnZ2VzdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdoaWdobGlnaHQnIGluIGFwcC5zdWdnZXN0aW9uUXVldWVbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCd0ZXh0JyBpbiBhcHAuc3VnZ2VzdGlvblF1ZXVlWzBdLmhpZ2hsaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmhpZ2hsaWdodCA9IGFwcC5zdWdnZXN0aW9uUXVldWVbMF0uaGlnaGxpZ2h0LnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuaGlnaGxpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnaW1hZ2UnIGluIGFwcC5zdWdnZXN0aW9uUXVldWVbMF0uaGlnaGxpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuY292ZXIgPSBhcHAuc3VnZ2VzdGlvblF1ZXVlWzBdLmhpZ2hsaWdodC5pbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5jb3ZlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5pc0NvbXB1dGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyppZiAoYW5pbWF0aW9uRGF0YSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLnNlcXVlbmNlUXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZVRpbWUgPSBhY3RpdmF0ZVRpbWUgPSAwLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSArPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZVRpbWUgKz0gZGVsdGFUaW1lO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZhdGVUaW1lID49IGFjdGl2YXRlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRhbGsoKTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVUaW1lID0gYWN0aXZhdGVUaW1lID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZGxlVGltZSA+PSBibGlua1RocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZXF1ZW5jZXMgPSBbXTtcclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2VxdWVuY2Ugb2YgdGhpcy5jaGFyYWN0ZXIuc2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5uYW1lID09IFwiSWRsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMucHVzaChzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcXVlbmNlUXVldWUucHVzaCh0aGlzLnByZXBhcmUoc2VxdWVuY2VzKSk7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5jdXJyZW50QW5pbWF0aW9ucy5zcGxpY2UoMCk7XHJcbiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYW5pbWF0aW9uIG9mIGFwcC5hbmltYXRpb25zW1wiaWRsZTFcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5jdXJyZW50QW5pbWF0aW9ucy5wdXNoKGFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25JbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkRhdGEgPSBhcHAuY3VycmVudEFuaW1hdGlvbnNbYW5pbWF0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25JbmRleCArPSBhbmltYXRpb25Ta2lwRnJhbWVzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXBwLnNlcXVlbmNlUXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSA9IGFjdGl2YXRlVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGxlVGltZSArPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlVGltZSArPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmVsYXBzZWQgKz0gZGVsdGFUaW1lICogMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnR5cGUuZWxhcHNlZCA+PSAxLjAgLyB0aGlzLm1lc3NhZ2UudHlwZS5zcGVlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMubWVzc2FnZS50eXBlLmNvdW50IC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5tZXNzYWdlLnRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IE1hdGguZmxvb3IodGhpcy5tZXNzYWdlLnRleHQubGVuZ3RoIC8gMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCA8PSB3aWR0aCAmJiB0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmNvdW50IC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyID0gdGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLnN1YnN0cmluZygwLCB0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmVsYXBzZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BvcHVwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGggPCB0aGlzLm1lc3NhZ2UudGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZS50eXBlLmVsYXBzZWQgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLnR5cGUuZWxhcHNlZCArPSBkZWx0YVRpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUG9wdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5lbGFwc2VkID0gZGVsdGFUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUG9wdXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnR5cGUuZWxhcHNlZCA+PSAxLjAgLyB0aGlzLm1lc3NhZ2UudHlwZS5zcGVlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IE1hdGguZmxvb3IodGhpcy5tZXNzYWdlLnRleHQubGVuZ3RoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoID0gdGhpcy5tZXNzYWdlLnRleHQubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCA+PSB3aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlciArPSB0aGlzLm1lc3NhZ2UudGV4dC5jaGFyQXQoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UudHlwZS5jb3VudCA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS50eXBlLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLnR5cGUuZWxhcHNlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudGltZSArPSBkZWx0YVRpbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnRpbWUgPj0gdGhpcy5tZXNzYWdlLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UudHlwZS5yZXZlcnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZS50ZXh0Lmxlbmd0aCA9PT0gdGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gdGhpcy5tZXNzYWdlLnRleHQuc3BsaXQoXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQucHVzaCh7IGtleTogaSwgdmFsdWU6IGNoYXJhY3RlcnNbaV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckFycmF5ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYW5kb21CdWZmZXIgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lc3NhZ2UudGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJBcnJheS5pbmRleE9mKHRoaXMubWVzc2FnZS50ZXh0LmNoYXJBdChpKSkgPT0gLTEgJiYgdGhpcy5tZXNzYWdlLnRleHQuY2hhckF0KGkpICE9IFwiXFxuXCIgJiYgdGhpcy5tZXNzYWdlLnRleHQuY2hhckF0KGkpLm1hdGNoKC9cXHMvKSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckFycmF5LnB1c2godGhpcy5tZXNzYWdlLnRleHQuY2hhckF0KGkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJBcnJheS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVzc2FnZS50eXBlLmNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlLnRleHQuY2hhckF0KGkpID09IFwiXFxuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tQnVmZmVyICs9IFwiXFxuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tQnVmZmVyICs9IGNoYXJBcnJheVt+fl9yYW5kb20oMCwgY2hhckFycmF5Lmxlbmd0aCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmRvbUJ1ZmZlci5sZW5ndGggPiB0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gKHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlciArIHJhbmRvbUJ1ZmZlci5zdWJzdHJpbmcodGhpcy5tZXNzYWdlLnR5cGUuYnVmZmVyLmxlbmd0aCwgcmFuZG9tQnVmZmVyLmxlbmd0aCkpLnNwbGl0KFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dC5zcGxpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0LnB1c2goeyBrZXk6IGksIHZhbHVlOiBjaGFyYWN0ZXJzW2ldIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dC5sZW5ndGggIT09IHRoaXMubWVzc2FnZS50eXBlLmJ1ZmZlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSB0aGlzLm1lc3NhZ2UudHlwZS5idWZmZXIuc3BsaXQoXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0LnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQucHVzaCh7IGtleTogaSwgdmFsdWU6IGNoYXJhY3RlcnNbaV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBhbmltYXRpb24gb2YgYW5pbWF0aW9uRGF0YS5hbmltYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYW5pbWF0aW9uLmJvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVzdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhlYWRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoaXBzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiamF3XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdEV5ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRGb290XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdEhhbmRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0SW5kZXhEaXN0YWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0SW5kZXhJbnRlcm1lZGlhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0SW5kZXhQcm94aW1hbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRMaXR0bGVEaXN0YWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdExpdHRsZVByb3hpbWFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdExvd2VyQXJtXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdExvd2VyTGVnXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdE1pZGRsZURpc3RhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRNaWRkbGVJbnRlcm1lZGlhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0TWlkZGxlUHJveGltYWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0UmluZ0Rpc3RhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRSaW5nSW50ZXJtZWRpYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdFJpbmdQcm94aW1hbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRTaG91bGRlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRUaHVtYkRpc3RhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRUaHVtYkludGVybWVkaWF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRUaHVtYlByb3hpbWFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVmdFRvZXNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0VXBwZXJBcm1cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWZ0VXBwZXJMZWdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuZWNrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRFeWVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodEZvb3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodEhhbmRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodEluZGV4RGlzdGFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRJbmRleEludGVybWVkaWF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0SW5kZXhQcm94aW1hbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0TGl0dGxlRGlzdGFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRMaXR0bGVJbnRlcm1lZGlhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodExpdHRsZVByb3hpbWFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRMb3dlckFybVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0TG93ZXJMZWdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodE1pZGRsZURpc3RhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0TWlkZGxlSW50ZXJtZWRpYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRNaWRkbGVQcm94aW1hbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0UmluZ0Rpc3RhbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0UmluZ0ludGVybWVkaWF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0UmluZ1Byb3hpbWFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRTaG91bGRlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0VGh1bWJEaXN0YWxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyaWdodFRodW1iSW50ZXJtZWRpYXRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRUaHVtYlByb3hpbWFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRUb2VzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRVcHBlckFybVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJpZ2h0VXBwZXJMZWdcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzcGluZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVwcGVyQ2hlc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJleWUuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0RXllXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZm9vdC5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRGb290XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaGFuZC5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRIYW5kXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZl9pbmRleC4wMy5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRJbmRleERpc3RhbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfaW5kZXguMDIuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0SW5kZXhJbnRlcm1lZGlhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX2luZGV4LjAxLkxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwibGVmdEluZGV4UHJveGltYWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX3Bpbmt5LjAzLkxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwibGVmdExpdHRsZURpc3RhbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfcGlua3kuMDIuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0TGl0dGxlSW50ZXJtZWRpYXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZl9waW5reS4wMS5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRMaXR0bGVQcm94aW1hbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxvd2VyX2FybS5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRMb3dlckFybVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNoaW4uTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0TG93ZXJMZWdcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX21pZGRsZS4wMy5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRNaWRkbGVEaXN0YWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX21pZGRsZS4wMi5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRNaWRkbGVJbnRlcm1lZGlhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX21pZGRsZS4wMS5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRNaWRkbGVQcm94aW1hbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfcmluZy4wMy5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRSaW5nRGlzdGFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZl9yaW5nLjAyLkxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwibGVmdFJpbmdJbnRlcm1lZGlhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX3JpbmcuMDEuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0UmluZ1Byb3hpbWFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2hvdWxkZXIuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0U2hvdWxkZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aHVtYl9kaXN0YWwuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0VGh1bWJEaXN0YWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aHVtYl9pbnRlcm1lZGlhdGUuTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0VGh1bWJJbnRlcm1lZGlhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aHVtYl9wcm94aW1hbC5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRUaHVtYlByb3hpbWFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidG9lLkxcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwibGVmdFRvZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1cHBlcl9hcm0uTFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJsZWZ0VXBwZXJBcm1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aGlnaC5MXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcImxlZnRVcHBlckxlZ1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV5ZS5SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcInJpZ2h0RXllXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZm9vdC5SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcInJpZ2h0Rm9vdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhhbmQuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodEhhbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX2luZGV4LjAzLlJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwicmlnaHRJbmRleERpc3RhbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfaW5kZXguMDIuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodEluZGV4SW50ZXJtZWRpYXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZl9pbmRleC4wMS5SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcInJpZ2h0SW5kZXhQcm94aW1hbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfcGlua3kuMDMuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodExpdHRsZURpc3RhbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfcGlua3kuMDIuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodExpdHRsZUludGVybWVkaWF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfcGlua3kuMDEuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodExpdHRsZVByb3hpbWFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibG93ZXJfYXJtLlJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwicmlnaHRMb3dlckFybVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNoaW4uUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodExvd2VyTGVnXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZl9taWRkbGUuMDMuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodE1pZGRsZURpc3RhbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZfbWlkZGxlLjAyLlJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwicmlnaHRNaWRkbGVJbnRlcm1lZGlhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX21pZGRsZS4wMS5SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcInJpZ2h0TWlkZGxlUHJveGltYWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX3JpbmcuMDMuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFJpbmdEaXN0YWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX3JpbmcuMDIuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFJpbmdJbnRlcm1lZGlhdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmX3JpbmcuMDEuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFJpbmdQcm94aW1hbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNob3VsZGVyLlJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwicmlnaHRTaG91bGRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRodW1iX2Rpc3RhbC5SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmJvbmUgPSBcInJpZ2h0VGh1bWJEaXN0YWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aHVtYl9pbnRlcm1lZGlhdGUuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFRodW1iSW50ZXJtZWRpYXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGh1bWJfcHJveGltYWwuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFRodW1iUHJveGltYWxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0b2UuUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFRvZXNcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1cHBlcl9hcm0uUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFVwcGVyQXJtXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGhpZ2guUlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5ib25lID0gXCJyaWdodFVwcGVyTGVnXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidXBwZXJfY2hlc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IFwidXBwZXJDaGVzdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uYm9uZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYm9uZSAmJiBhbmltYXRpb24ucm90YXRpb24ubGVuZ3RoID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuaHVtYW5vaWQuZ2V0Qm9uZU5vZGUoYW5pbWF0aW9uLmJvbmUpLnBvc2l0aW9uLnNldChhbmltYXRpb24ucG9zaXRpb25bMF0sIGFuaW1hdGlvbi5wb3NpdGlvblsxXSwgLWFuaW1hdGlvbi5wb3NpdGlvblsyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdnJtTW9kZWwuaHVtYW5vaWQuZ2V0Qm9uZU5vZGUoYW5pbWF0aW9uLmJvbmUpLnF1YXRlcm5pb24uc2V0KC1hbmltYXRpb24ucm90YXRpb25bMF0sIC1hbmltYXRpb24ucm90YXRpb25bMV0sIGFuaW1hdGlvbi5yb3RhdGlvblsyXSwgYW5pbWF0aW9uLnJvdGF0aW9uWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2cm1TcHJpbmdCb25lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkQm9uZUFuaW1hdGlvbkRpY3Rpb25hcnkgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ2dhYmxlQm9uZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdCb25lcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdCb25lcy50aW1lIC09IGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdCb25lcy50aW1lIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkcmFnZ2luZ0JvbmVzLmJvbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5W2tleV0gPSB7IGRpcmVjdGlvbjogZHJhZ2dpbmdCb25lcy5ib25lc1trZXldLmRpcmVjdGlvbiwgZm9yY2U6IGRyYWdnaW5nQm9uZXMuYm9uZXNba2V5XS5iYXNlIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ0JvbmVzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZHJhZ2dpbmdCb25lcy5ib25lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRCb25lQW5pbWF0aW9uRGljdGlvbmFyeVtrZXldID0geyBkaXJlY3Rpb246IGRyYWdnaW5nQm9uZXMuYm9uZXNba2V5XS5kaXJlY3Rpb24sIGZvcmNlOiBkcmFnZ2luZ0JvbmVzLmJvbmVzW2tleV0uYmFzZSArIGRyYWdnaW5nQm9uZXMuYm9uZXNba2V5XS5zb3VyY2UgKyBkcmFnZ2luZ0JvbmVzLnRpbWUgLyBkcmFnZ2luZ0JvbmVzLmR1cmF0aW9uICogKGRyYWdnaW5nQm9uZXMuYm9uZXNba2V5XS50YXJnZXQgLSBkcmFnZ2luZ0JvbmVzLmJvbmVzW2tleV0uc291cmNlIC0gZHJhZ2dpbmdCb25lcy5ib25lc1trZXldLmJhc2UpIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnZ2luZ0JvbmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBib25lUG9zaXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ByaW5nQm9uZUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZUdyb3VwIG9mIHZybU1vZGVsLnNwcmluZ0JvbmVNYW5hZ2VyLnNwcmluZ0JvbmVHcm91cExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZSBvZiBzcHJpbmdCb25lR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ByaW5nQm9uZUluZGV4ID09PSBkcmFnZ2FibGVCb25lLmluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVQb3NpdGlvbiA9IHNwcmluZ0JvbmUuYm9uZS5nZXRXb3JsZFBvc2l0aW9uKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW5nQm9uZUluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib25lUG9zaXRpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gMC4yNTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbmdCb25lSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdCb25lcyA9IHsgdGltZTogMCwgZHVyYXRpb246IDAuNSwgY2VudGVyOiBib25lUG9zaXRpb24sIGJvbmVzOiB7fSB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZUdyb3VwIG9mIHZybU1vZGVsLnNwcmluZ0JvbmVNYW5hZ2VyLnNwcmluZ0JvbmVHcm91cExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcmluZ0JvbmUgb2Ygc3ByaW5nQm9uZUdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib25lUG9zaXRpb24uZGlzdGFuY2VUbyhzcHJpbmdCb25lLmJvbmUuZ2V0V29ybGRQb3NpdGlvbihuZXcgVEhSRUUuVmVjdG9yMygpKSkgPD0gcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nQm9uZXMuYm9uZXNbc3ByaW5nQm9uZUluZGV4XSA9IHsgZGlyZWN0aW9uOiBuZXcgVEhSRUUuVmVjdG9yMyhkcmFnZ2FibGVCb25lLmRpcmVjdGlvbi54LCBkcmFnZ2FibGVCb25lLmRpcmVjdGlvbi55LCAwKSwgYmFzZTogc3ByaW5nQm9uZS5ncmF2aXR5UG93ZXIgLSB2cm1TcHJpbmdCb25lc1tzcHJpbmdCb25lSW5kZXhdLmdyYXZpdHlQb3dlciwgc291cmNlOiAwLCB0YXJnZXQ6IC1NYXRoLm1pbigwLjAxICogZHJhZ2dhYmxlQm9uZS5kaXN0YW5jZSAqIE1hdGguY29zKGJvbmVQb3NpdGlvbi5kaXN0YW5jZVRvKHNwcmluZ0JvbmUuYm9uZS5nZXRXb3JsZFBvc2l0aW9uKG5ldyBUSFJFRS5WZWN0b3IzKCkpKSAvIHJhbmdlKSwgNSkgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5W3NwcmluZ0JvbmVJbmRleF0gPSB7IGRpcmVjdGlvbjogZHJhZ2dpbmdCb25lcy5ib25lc1tzcHJpbmdCb25lSW5kZXhdLmRpcmVjdGlvbiwgZm9yY2U6IGRyYWdnaW5nQm9uZXMuYm9uZXNbc3ByaW5nQm9uZUluZGV4XS5zb3VyY2UgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaW5nQm9uZUluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdCb25lcy50aW1lICs9IGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcmFnZ2luZ0JvbmVzLnRpbWUgPj0gZHJhZ2dpbmdCb25lcy5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSAwLjI1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNwcmluZ0JvbmVJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZHJhZ2dpbmdCb25lcy5ib25lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5W2tleV0gPSB7IGRpcmVjdGlvbjogZHJhZ2dpbmdCb25lcy5ib25lc1trZXldLmRpcmVjdGlvbiwgZm9yY2U6IGRyYWdnaW5nQm9uZXMuYm9uZXNba2V5XS50YXJnZXQgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ0JvbmVzLnRpbWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZUdyb3VwIG9mIHZybU1vZGVsLnNwcmluZ0JvbmVNYW5hZ2VyLnNwcmluZ0JvbmVHcm91cExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcmluZ0JvbmUgb2Ygc3ByaW5nQm9uZUdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcHJpbmdCb25lSW5kZXggaW4gZHJhZ2dpbmdCb25lcy5ib25lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdCb25lcy5ib25lc1tzcHJpbmdCb25lSW5kZXhdLmRpcmVjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKGRyYWdnYWJsZUJvbmUuZGlyZWN0aW9uLngsIGRyYWdnYWJsZUJvbmUuZGlyZWN0aW9uLnksIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdCb25lcy5ib25lc1tzcHJpbmdCb25lSW5kZXhdLnNvdXJjZSA9IGRyYWdnaW5nQm9uZXMuYm9uZXNbc3ByaW5nQm9uZUluZGV4XS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ0JvbmVzLmJvbmVzW3NwcmluZ0JvbmVJbmRleF0udGFyZ2V0ID0gLU1hdGgubWluKDAuMDEgKiBkcmFnZ2FibGVCb25lLmRpc3RhbmNlICogTWF0aC5jb3MoZHJhZ2dpbmdCb25lcy5jZW50ZXIuZGlzdGFuY2VUbyhzcHJpbmdCb25lLmJvbmUuZ2V0V29ybGRQb3NpdGlvbihuZXcgVEhSRUUuVmVjdG9yMygpKSkgLyByYW5nZSksIDUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbmdCb25lSW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkcmFnZ2luZ0JvbmVzLmJvbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkQm9uZUFuaW1hdGlvbkRpY3Rpb25hcnlba2V5XSA9IHsgZGlyZWN0aW9uOiBkcmFnZ2luZ0JvbmVzLmJvbmVzW2tleV0uZGlyZWN0aW9uLCBmb3JjZTogZHJhZ2dpbmdCb25lcy5ib25lc1trZXldLmJhc2UgKyBkcmFnZ2luZ0JvbmVzLmJvbmVzW2tleV0uc291cmNlICsgZHJhZ2dpbmdCb25lcy50aW1lIC8gZHJhZ2dpbmdCb25lcy5kdXJhdGlvbiAqIChkcmFnZ2luZ0JvbmVzLmJvbmVzW2tleV0udGFyZ2V0IC0gZHJhZ2dpbmdCb25lcy5ib25lc1trZXldLnNvdXJjZSAtIGRyYWdnaW5nQm9uZXMuYm9uZXNba2V5XS5iYXNlKSB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZG9tV2luZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ByaW5nQm9uZUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbVdpbmQgPSB7IHRpbWU6IDAsIGR1cmF0aW9uOiAxLjAsIGRpcmVjdGlvbjogbmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCksIGZvcmNlOiAwLjAxICogKE1hdGgucmFuZG9tKCkgLSAwLjUpLCBzb3VyY2VzOiB7fSB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lR3JvdXAgb2YgdnJtTW9kZWwuc3ByaW5nQm9uZU1hbmFnZXIuc3ByaW5nQm9uZUdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lIG9mIHNwcmluZ0JvbmVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcHJpbmdCb25lSW5kZXggaW4gbWVyZ2VkQm9uZUFuaW1hdGlvbkRpY3Rpb25hcnkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbVdpbmQuc291cmNlc1tzcHJpbmdCb25lSW5kZXhdID0gc3ByaW5nQm9uZS5ncmF2aXR5UG93ZXIgLSB2cm1TcHJpbmdCb25lc1tzcHJpbmdCb25lSW5kZXhdLmdyYXZpdHlQb3dlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmluZ0JvbmVJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tV2luZC50aW1lICs9IGRlbHRhVGltZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5kb21XaW5kLnRpbWUgPj0gcmFuZG9tV2luZC5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmFuZG9tV2luZC5zb3VyY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSBpbiBtZXJnZWRCb25lQW5pbWF0aW9uRGljdGlvbmFyeSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkQm9uZUFuaW1hdGlvbkRpY3Rpb25hcnlba2V5XSA9IHsgZGlyZWN0aW9uOiByYW5kb21XaW5kLmRpcmVjdGlvbiwgZm9yY2U6IHJhbmRvbVdpbmQuZm9yY2UgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tV2luZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByYW5kb21XaW5kLnNvdXJjZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRCb25lQW5pbWF0aW9uRGljdGlvbmFyeVtrZXldID0geyBkaXJlY3Rpb246IHJhbmRvbVdpbmQuZGlyZWN0aW9uLCBmb3JjZTogcmFuZG9tV2luZC5zb3VyY2VzW2tleV0gKyByYW5kb21XaW5kLnRpbWUgLyByYW5kb21XaW5kLmR1cmF0aW9uICogKHJhbmRvbVdpbmQuZm9yY2UgLSByYW5kb21XaW5kLnNvdXJjZXNba2V5XSkgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZUdyb3VwIG9mIHZybU1vZGVsLnNwcmluZ0JvbmVNYW5hZ2VyLnNwcmluZ0JvbmVHcm91cExpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lIG9mIHNwcmluZ0JvbmVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IGluIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjModnJtU3ByaW5nQm9uZXNbaW5kZXhdLmdyYXZpdHlEaXIueCArIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5W2luZGV4XS5kaXJlY3Rpb24ueCwgdnJtU3ByaW5nQm9uZXNbaW5kZXhdLmdyYXZpdHlEaXIueSArIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5W2luZGV4XS5kaXJlY3Rpb24ueSwgdnJtU3ByaW5nQm9uZXNbaW5kZXhdLmdyYXZpdHlEaXIueiArIG1lcmdlZEJvbmVBbmltYXRpb25EaWN0aW9uYXJ5W2luZGV4XS5kaXJlY3Rpb24ueik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcmluZ0JvbmUuZ3Jhdml0eURpciA9IHZlY3Rvci5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbmdCb25lLmdyYXZpdHlQb3dlciA9IHZybVNwcmluZ0JvbmVzW2luZGV4XS5ncmF2aXR5UG93ZXIgKyBtZXJnZWRCb25lQW5pbWF0aW9uRGljdGlvbmFyeVtpbmRleF0uZm9yY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2cm1Nb2RlbC51cGRhdGUoZGVsdGFUaW1lKTtcclxuICAgICAgICAgICAgICAgIC8qaWYgKGN1cnJlbnRNaXhlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNaXhlci51cGRhdGUoZGVsdGFUaW1lKTtcclxuICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250cm9scy51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xyXG4gICAgICAgICAgICBjb21wb3Nlci5yZW5kZXIoZGVsdGFUaW1lKTtcclxuXHJcbiAgICAgICAgICAgIHN0YXRzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB1cGRhdGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9sZXQgY29udGFpbmVyID0gdGhpcy4kcmVmcy5jb250YWluZXI7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zZXRUb3AgPSB0aGlzLiRyZWZzLmluZGljYXRvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5pbnNldEJvdHRvbSA9IHRoaXMuJHJlZnMuYmxhbmsuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvL3RoaXMuJHJlZnMudGlja2VyLnN0eWxlLndpZHRoID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiI2lucHV0IC5jb2x1bW5zPi5jb2x1bW4gLmNvbnRyb2w6bnRoLWxhc3Qtb2YtdHlwZSgxKSAubGV2ZWw6bnRoLWxhc3Qtb2YtdHlwZSgxKSBmb3JtXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgJ3B4JztcclxuXHJcbiAgICAgICAgLy9kb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjaGVhZGluZz4uY29sdW1ucz4uY29sdW1uPi5jb2x1bW5zOmZpcnN0LWNoaWxkPi5jb2x1bW4+LmNvbHVtbnM6bGFzdC1jaGlsZCAubGV2ZWw6Zmlyc3QtY2hpbGQgLmxldmVsLWl0ZW0gLmZpZWxkIC50aWNrZXJcIikuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAvKnRoaXMuJHJlZnMudGlja2VyLnN0eWxlLndpZHRoID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiI2lucHV0IC5jb2x1bW5zPi5jb2x1bW4gLmNvbnRyb2w6bnRoLWxhc3Qtb2YtdHlwZSgxKSAubGV2ZWw6bnRoLWxhc3Qtb2YtdHlwZSgxKSBmb3JtXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgJ3B4JztcclxuICAgICAgICAqL1xyXG4gICAgICAgIGZvciAoY29uc3QgY2xpcCBvZiBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGFpbmVyPi53cmFwPi5mcmFtZSAuY2xpcFwiKSkge1xyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGNsaXAucXVlcnlTZWxlY3RvckFsbChcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlciAuaXRlbVwiKSkge1xyXG4gICAgICAgICAgICAgICAgd2lkdGggKz0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aWNrZXJXaWR0aCA9IE1hdGgubWluKHdpZHRoIC8gMiwgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcj4ud3JhcD4uZnJhbWUgLmxldmVsXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKTtcclxuICAgICAgICAgICAgICAgIGNsaXAucXVlcnlTZWxlY3RvcihcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlclwiKS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBjaG9pY2UoY29sbGVjdGlvbiwgZnVuYykge1xyXG4gICAgICAgICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgbGV0IHN1bSA9IDAuMDtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvYmFiaWxpdHkgPSBmdW5jKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdW0gPD0gciAmJiByIDwgc3VtICsgcHJvYmFiaWxpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdW0gKz0gcHJvYmFiaWxpdHk7XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbltpbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBjb25zdCBjaGFyYWN0ZXJTdG9yYWdlSXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2hhcmFjdGVyXCIpO1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxTdG9yYWdlSXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3JlZGVudGlhbFwiKTtcclxuICAgICAgICBsZXQgY3JlZGVudGlhbCA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgY2hhcmFjdGVycyA9IFt7IHBhdGg6IFwiL2Fzc2V0cy9taWxjaC5qc29uXCIsIHByb2JhYmlsaXR5OiAwLjkgfSwgeyBwYXRoOiBcIi9hc3NldHMvbWVya3UuanNvblwiLCBwcm9iYWJpbGl0eTogMC4xIH1dO1xyXG4gICAgICAgIGNvbnN0IGxvYWRlciA9IG5ldyBHTFRGTG9hZGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChjaGFyYWN0ZXJTdG9yYWdlSXRlbSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gSlNPTi5wYXJzZShjaGFyYWN0ZXJTdG9yYWdlSXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJhY3RlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNdXRlZCA9IGNoYXJhY3Rlci5tdXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNoYXJhY3RlclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNyZWRlbnRpYWxTdG9yYWdlSXRlbSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbCA9IEpTT04ucGFyc2UoY3JlZGVudGlhbFN0b3JhZ2VJdGVtKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjcmVkZW50aWFsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiRyZWZzLnRocmVlLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuJHJlZnMudGhyZWUuYWZ0ZXIoc3RhdHMuZG9tRWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmluc2V0VG9wID0gdGhpcy4kcmVmcy5pbmRpY2F0b3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuaW5zZXRCb3R0b20gPSB0aGlzLiRyZWZzLmJsYW5rLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjaG9pY2UoY2hhcmFjdGVycywgKHgpID0+IHgucHJvYmFiaWxpdHkpLnBhdGgsIHtcclxuICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiB0aGlzLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiB0aGlzLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VRdWV1ZS5wdXNoKHRoaXMucHJlcGFyZSh0aGlzLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiU3RhcnRcIikpKTtcclxuXHJcbiAgICAgICAgbG9hZGVyLmNyb3NzT3JpZ2luID0gXCJhbm9ueW1vdXNcIjtcclxuICAgICAgICBsb2FkZXIubG9hZChcclxuICAgICAgICAgICAgYXdhaXQgc3RvcmFnZS5yZWYoKS5jaGlsZCh0aGlzLmNoYXJhY3Rlci5tb2RlbCkuZ2V0RG93bmxvYWRVUkwoKSxcclxuICAgICAgICAgICAgKGdsdGYpID0+IHtcclxuICAgICAgICAgICAgICAgIFZSTS5mcm9tKGdsdGYpLnRoZW4oYXN5bmMgKHZybSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkbGUxOiBcIi9hc3NldHMvYW5pbWF0aW9uLWlkbGUxLmpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRsZTI6IFwiL2Fzc2V0cy9hbmltYXRpb24taWRsZTIuanNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lkbGUzOiBcIi9hc3NldHMvYW5pbWF0aW9uLWlkbGUzLmpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZGxlNDogXCIvYXNzZXRzL2FuaW1hdGlvbi1pZGxlNC5qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1bXA6IFwiL2Fzc2V0cy9hbmltYXRpb24tanVtcC5qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvc2U6IFwiL2Fzc2V0cy9hbmltYXRpb24tbG9zZS5qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcnVuOiBcIi9hc3NldHMvYW5pbWF0aW9uLXJ1bi5qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vd2FsazogXCIvYXNzZXRzL2FuaW1hdGlvbi13YWxrLmpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luOiBcIi9hc3NldHMvYW5pbWF0aW9uLXdpbi5qc29uXCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbmltYXRpb25EaWN0aW9uYXJ5ID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB1cmxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZTMgPSBhd2FpdCBmZXRjaChlbmNvZGVVUkkodXJsc1trZXldKSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlMy5qc29uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkRpY3Rpb25hcnlba2V5XSA9IGpzb24uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZTMuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYW5pbWF0aW9ucyA9IGFuaW1hdGlvbkRpY3Rpb25hcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZybU1vZGVsID0gdnJtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKHZybS5zY2VuZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2cm0uc2NlbmUucm90YXRpb24ueSA9IE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZybS5sb29rQXQudGFyZ2V0ID0gbG9va0F0VGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdnJtU3ByaW5nQm9uZXMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lR3JvdXAgb2YgdnJtTW9kZWwuc3ByaW5nQm9uZU1hbmFnZXIuc3ByaW5nQm9uZUdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lIG9mIHNwcmluZ0JvbmVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybVNwcmluZ0JvbmVzLnB1c2goeyBncmF2aXR5RGlyOiBzcHJpbmdCb25lLmdyYXZpdHlEaXIuY2xvbmUoKSwgZ3Jhdml0eVBvd2VyOiBzcHJpbmdCb25lLmdyYXZpdHlQb3dlciB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy92cm0uaHVtYW5vaWQuZ2V0Qm9uZU5vZGUoVEhSRUUuVlJNU2NoZW1hLkh1bWFub2lkQm9uZU5hbWUuSGlwcykucm90YXRpb24ueSA9IE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY3VycmVudE1peGVyID0gcHJlcGFyZUFuaW1hdGlvbih2cm0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeSh7IHRleHQ6IGUubWVzc2FnZSwgYWNjZW50OiBzZWxmLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiBzZWxmLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKHByb2dyZXNzKSA9PiBzZWxmLnByb2dyZXNzID0gcHJvZ3Jlc3MubG9hZGVkIC8gcHJvZ3Jlc3MudG90YWwsXHJcbiAgICAgICAgICAgIChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoY3JlZGVudGlhbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoY3JlZGVudGlhbC5wcm92aWRlcklkID09PSBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhDcmVkZW50aWFsKGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoY3JlZGVudGlhbC5pZFRva2VuKSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNyZWRlbnRpYWwucHJvdmlkZXJJZCA9PT0gZmlyZWJhc2UuYXV0aC5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhDcmVkZW50aWFsKGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChjcmVkZW50aWFsLmFjY2Vzc1Rva2VuKSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNyZWRlbnRpYWwucHJvdmlkZXJJZCA9PT0gZmlyZWJhc2UuYXV0aC5Ud2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aENyZWRlbnRpYWwoZmlyZWJhc2UuYXV0aC5Ud2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoY3JlZGVudGlhbC5hY2Nlc3NUb2tlbiwgY3JlZGVudGlhbC5zZWNyZXQpKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qZmlyZWJhc2UuYXV0aCgpLnNpZ25JbkFub255bW91c2x5KCkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHNlbGYubm90aWZ5KHsgdGV4dDogZXJyb3IubWVzc2FnZSwgYWNjZW50OiBzZWxmLmNoYXJhY3Rlci5hY2NlbnQsIGltYWdlOiBzZWxmLmNoYXJhY3Rlci5pbWFnZSB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9KTsqL1xyXG4gICAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluLlxyXG4gICAgICAgICAgICAgICAgc2VsZi51c2VyID0gdXNlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VNZXNzYWdlcykubGltaXRUb0xhc3QoMTAwKS5vbihcInZhbHVlXCIsIHNuYXBzaG90ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0KGZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9cXHsoXFxkKVxcfS9nLCBmdW5jdGlvbiAobSwgYykgeyByZXR1cm4gYXJnc1twYXJzZUludChjKSArIDFdIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRGljdGlvbmFyeSA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2VEaWN0aW9uYXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlcXVlbmNlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VxdWVuY2UgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IGFwcC5tYXhNZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5zcGxpY2UoMCwga2V5cy5sZW5ndGggLSBhcHAubWF4TWVzc2FnZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuZmVlZFF1ZXVlLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBvZiBrZXlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZURpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG1lc3NhZ2UudGltZXN0YW1wICogMTAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBwLm1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gYXBwLm1lc3NhZ2VzW2ldLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2UudXNlci5hY2NlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXIuYWNjZW50ID0gXCIjMzBjMGY1XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xldCBqID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgaWQ6IGtleSwgdGV4dDogbWVzc2FnZS50ZXh0LCB0aHJlYWQ6IG1lc3NhZ2UudGhyZWFkLCB0aW1lc3RhbXA6IG5ldyBEYXRlKHRpbWVzdGFtcCksIHVzZXI6IG1lc3NhZ2UudXNlciB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcHAubWVzc2FnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA8IE1hdGguZmxvb3IoYXBwLm1lc3NhZ2VzW2ldLnRpbWVzdGFtcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGogPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gYXBwLm1lc3NhZ2VzW2pdO1xyXG4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tZXNzYWdlc1tqXSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tZXNzYWdlc1tpbmRleF0gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tZXNzYWdlc1tpbmRleF0gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAubWVzc2FnZXNbaW5kZXhdID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBwLm1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCBNYXRoLmZsb29yKGFwcC5tZXNzYWdlc1tpXS50aW1lc3RhbXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tZXNzYWdlcy5zcGxpY2UoaW5kZXggPj0gMCA/IGluZGV4IDogYXBwLm1lc3NhZ2VzLmxlbmd0aCwgMCwgeyBpZDoga2V5LCB0ZXh0OiBtZXNzYWdlLnRleHQsIHRocmVhZDogbWVzc2FnZS50aHJlYWQsIHRpbWVzdGFtcDogbmV3IERhdGUodGltZXN0YW1wKSwgdXNlcjogbWVzc2FnZS51c2VyIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLm1lc3NhZ2VzLmxlbmd0aCA+IGFwcC5tYXhNZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAubWVzc2FnZXMuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHAudXNlci51aWQgIT09IG1lc3NhZ2UudXNlci5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZCA9IG1lc3NhZ2UudXNlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmZlZWRRdWV1ZS51bnNoaWZ0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gYXBwLm1lc3NhZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhcHAubWVzc2FnZXNbaV0uaWQgaW4gbWVzc2FnZURpY3Rpb25hcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1lc3NhZ2VzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2VpdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlY2VpdmVkLmlkICYmIHZybU1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hcHAuYmxlbmRTaGFwZUFuaW1hdGlvblF1ZXVlLnB1c2goW3sgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLkpveSwgdGltZTogMC4wLCBkdXJhdGlvbjogMC41LCBzdGFydDogMC4wLCBlbmQ6IDEuMCB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5Kb3ksIHRpbWU6IDAuMCwgZHVyYXRpb246IDEuMCwgc3RhcnQ6IDEuMCwgZW5kOiAxLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuSm95LCB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHN0YXJ0OiAxLjAsIGVuZDogMC4wIH0sIHsgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLkEsIHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc3RhcnQ6IDAuMCwgZW5kOiAxLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuQSwgdGltZTogMC4wLCBkdXJhdGlvbjogMS4wLCBzdGFydDogMS4wLCBlbmQ6IDEuMCB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5BLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHN0YXJ0OiAxLjAsIGVuZDogMC4wIH1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNhbGVydFwiKS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwLnVwZGF0ZShtZXNzYWdlRGljdGlvbmFyeSwgYXBwLm1heFRhZ3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLypmb3IgKGNvbnN0IHNlcXVlbmNlIG9mIGFwcC5jaGFyYWN0ZXIuc2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VxdWVuY2UubmFtZSA9PSBcIkFsZXJ0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZXMucHVzaChzZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIGFwcC5wcmVwYXJlKHNlcXVlbmNlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudHlwZSA9PSBcIk1lc3NhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlLnB1c2goeyB0eXBlOiBvYmoudHlwZSwgc3BlZWQ6IG9iai5zcGVlZCwgZHVyYXRpb246IG9iai5kdXJhdGlvbiwgdGV4dDogZm9ybWF0KG9iai50ZXh0LCBhcHAuZmVlZFF1ZXVlWzBdLnRleHQpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuc2VxdWVuY2VRdWV1ZS5wdXNoKHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSovXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuZmVlZFF1ZXVlLnB1c2goYXBwLmZlZWRRdWV1ZS5zaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIG91dC5cclxuICAgICAgICAgICAgICAgIC8vZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL2ltYWdlc1wiKS5vZmYoXCJ2YWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgIC8vZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3N0YXJzXCIpLm9mZihcInZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgLy9kYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvd29yZHNcIikub2ZmKFwidmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VNZXNzYWdlcykub2ZmKFwidmFsdWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi51c2VyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHNlbGYuc3RhcnMgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkYXRhYmFzZS5yZWYoZGF0YWJhc2VSb290ICsgXCIvaW1hZ2VzXCIpLmxpbWl0VG9MYXN0KDEwMCkub24oXCJ2YWx1ZVwiLCBzbmFwc2hvdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZXMgPSBzbmFwc2hvdC52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXNVcGRhdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYucmVjZW50SW1hZ2VzLnNvbWUoeCA9PiB4LmlkID09PSBrZXkgJiYgeC50aW1lc3RhbXAgPT09IGltYWdlc1trZXldLnRpbWVzdGFtcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXBkYXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1VwZGF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNlbnRJbWFnZXMuc3BsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW1hZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXNba2V5XVtcImlkXCJdID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNlbnRJbWFnZXMucHVzaChpbWFnZXNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYucmVjZW50SW1hZ2VzLCBzZWxmLm1heFRhZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlzQmxpbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3N0YXJzXCIpLm9uKFwidmFsdWVcIiwgc25hcHNob3QgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBzbmFwc2hvdC52YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXJzID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFycyA9IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGF0YWJhc2UucmVmKGRhdGFiYXNlUm9vdCArIFwiL3dvcmRzXCIpLm9yZGVyQnlDaGlsZChcInRpbWVzdGFtcFwiKS5saW1pdFRvTGFzdCgxMCkub24oXCJ2YWx1ZVwiLCBzbmFwc2hvdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkcyA9IHNuYXBzaG90LnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wV29yZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgaW4gd29yZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFdvcmRzLnB1c2goeyBuYW1lOiB3b3JkLCB0aW1lc3RhbXA6IHdvcmRzW3dvcmRdLnRpbWVzdGFtcCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHNlbGYucHJlcGFyZShzZWxmLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiQWxlcnRcIiksIDEwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnR5cGUgPT09IFwiTWVzc2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndvcmRzLnNwbGljZShpbmRleCwgMCwgeyBuYW1lOiBvYmoudGV4dCwgaW1hZ2U6IHNlbGYuY2hhcmFjdGVyLmltYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHRlbXBXb3Jkcy5zb3J0KCh4LCB5KSA9PiB5LnRpbWVzdGFtcCAtIHgudGltZXN0YW1wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlSW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZi53b3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYud29yZHNbaV0ubmFtZSA9PSB3b3JkLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVJbmRleCA9IGk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYud29yZHNbcmVtb3ZlSW5kZXhdLnRpbWVzdGFtcCA8IHdvcmQudGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQubmFtZSBpbiBzZWxmLndvcmREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxmLndvcmREaWN0aW9uYXJ5W3dvcmQubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzZWxmLnJldmVyc2VXb3JkRGljdGlvbmFyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnJldmVyc2VXb3JkRGljdGlvbmFyeVtrZXldLndvcmRzLnNvbWUoKHgpID0+IHggPT09IHdvcmQubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxmLnJldmVyc2VXb3JkRGljdGlvbmFyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi53b3Jkcy5zcGxpY2UocmVtb3ZlSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmQubmFtZSBpbiBzZWxmLndvcmREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNlbGYud29yZERpY3Rpb25hcnlbd29yZC5uYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzZWxmLnJldmVyc2VXb3JkRGljdGlvbmFyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmV2ZXJzZVdvcmREaWN0aW9uYXJ5W2tleV0ud29yZHMuc29tZSgoeCkgPT4geCA9PT0gd29yZC5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZi5yZXZlcnNlV29yZERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi53b3Jkcy5zcGxpY2UoaW5kZXgsIDAsIHdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNlbGYud29yZHMubGVuZ3RoIC0gMTsgaSA+PSBpbmRleDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud29yZHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgdW5tb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRpY2tJbnRlcnZhbElEID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aWNrSW50ZXJ2YWxJRCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodnJtTW9kZWwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgc2NlbmUucmVtb3ZlKHZybU1vZGVsLnNjZW5lKTtcclxuICAgICAgICAgICAgdnJtTW9kZWwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkubW91bnQoXCIjYXBwXCIpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGV2ZW50ID0+IHtcclxuICAgIGlmIChcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihcInN3LmpzXCIpLnRoZW4ocmVnaXN0cmF0aW9uID0+IHtcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uLm9udXBkYXRlZm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24udXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlciAhPT0gbnVsbCAmJiBcImNvbW1hbmRcIiBpbiBldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuY29tbWFuZCA9PT0gXCJjYWNoZXNcIikge1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlci5wb3N0TWVzc2FnZSh7IGNvbW1hbmQ6IFwiY2xlYXJcIiwgY2FjaGVzOiBldmVudC5kYXRhLmNhY2hlcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZXZlbnQgPT4ge1xyXG4gICAgLy9sZXQgY29udGFpbmVyID0gYXBwLiRyZWZzLmNvbnRhaW5lcjtcclxuXHJcbiAgICBhcHAuaW5zZXRUb3AgPSBhcHAuJHJlZnMuaW5kaWNhdG9yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIGFwcC5pbnNldEJvdHRvbSA9IGFwcC4kcmVmcy5ibGFuay5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcblxyXG4gICAgLy9hcHAuJHJlZnMudGlja2VyLnN0eWxlLndpZHRoID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiI2lucHV0IC5jb2x1bW5zPi5jb2x1bW4gLmNvbnRyb2w6bnRoLWxhc3Qtb2YtdHlwZSgxKSAubGV2ZWw6bnRoLWxhc3Qtb2YtdHlwZSgxKSBmb3JtXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgJ3B4JztcclxuXHJcbiAgICAvKmNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBjb25zdCBoZWlnaHQgPSB3aW5kb3cub3V0ZXJIZWlnaHQ7XHJcblxyXG4gICAgYmxvb21QYXNzLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcbiAgICBmeGFhU2hhZGVyLnVuaWZvcm1zLnJlc29sdXRpb24udmFsdWUuc2V0KDEgLyAod2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksIDEgLyAoaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pKTtcclxuXHJcbiAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcclxuICAgIHJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgY2FtZXJhLmFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0O1xyXG4gICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuXHJcbiAgICBjb21wb3Nlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcclxuICAgIGNvbXBvc2VyLnNldFNpemUod2lkdGgsIGhlaWdodCk7Ki9cclxuXHJcbiAgICBhcHAuJG5leHRUaWNrKCgpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IGNsaXAgb2YgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRhaW5lcj4ud3JhcD4uZnJhbWUgLmNsaXBcIikpIHtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBjbGlwLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6c2NvcGUgLnRpY2tlci13cmFwIC50aWNrZXIgLml0ZW1cIikpIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoICs9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh3aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFwcC50aWNrZXJXaWR0aCA9IE1hdGgubWluKHdpZHRoIC8gMiwgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhaW5lcj4ud3JhcD4uZnJhbWUgLmxldmVsXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKTtcclxuICAgICAgICAgICAgICAgIGNsaXAucXVlcnlTZWxlY3RvcihcIjpzY29wZSAudGlja2VyLXdyYXAgLnRpY2tlclwiKS5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50ID0+IHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBhcHAuJHJlZnMudGhyZWU7XHJcbiAgICBjb25zdCB4ID0gZXZlbnQuY2xpZW50WCAtIGVsZW1lbnQub2Zmc2V0TGVmdCAtICh3aW5kb3cuaW5uZXJXaWR0aCAtIGVsZW1lbnQub2Zmc2V0V2lkdGgpO1xyXG4gICAgY29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSBlbGVtZW50Lm9mZnNldFRvcCAtICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBlbGVtZW50Lm9mZnNldEhlaWdodCk7XHJcbiAgICBjb25zdCB3ID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIGNvbnN0IGggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcclxuXHJcbiAgICBtb3VzZS54ID0gKHggLyB3KSAqIDIgLSAxO1xyXG4gICAgbW91c2UueSA9IC0oeSAvIGgpICogMiArIDE7XHJcblxyXG4gICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XHJcblxyXG4gICAgY29uc3QgaW50ZXJzZWN0cyA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHNjZW5lLmNoaWxkcmVuLCB0cnVlKTtcclxuXHJcbiAgICBmb3IgKGxldCBpbnRlcnNlY3Qgb2YgaW50ZXJzZWN0cykge1xyXG4gICAgICAgIGlmIChpbnRlcnNlY3Qub2JqZWN0Lm5hbWUgPT09IFwiZmFjZVwiKSB7XHJcbiAgICAgICAgICAgIC8vYXBwLmJsZW5kU2hhcGVBbmltYXRpb25RdWV1ZS5wdXNoKFt7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5CbGlua0wsIHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc3RhcnQ6IDAuMCwgZW5kOiAyLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuQmxpbmtSLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHN0YXJ0OiAwLjAsIGVuZDogMi4wIH1dKTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW50ZXJzZWN0Lm9iamVjdC5uYW1lLmluZGV4T2YoXCJicmVhc3RcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAvKmlmIChyYW5kb20oMCwgMSkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGFwcC5ibGVuZFNoYXBlQW5pbWF0aW9uUXVldWUucHVzaChbeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuQmxpbmtMLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHN0YXJ0OiAwLjAsIGVuZDogMC41IH0sIHsgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLkJsaW5rTCwgdGltZTogMC4wLCBkdXJhdGlvbjogMy4wLCBzdGFydDogMC41LCBlbmQ6IDAuNSB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5CbGlua0wsIHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc3RhcnQ6IDAuNSwgZW5kOiAwLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuQmxpbmtSLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHN0YXJ0OiAwLjAsIGVuZDogMC41IH0sIHsgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLkJsaW5rUiwgdGltZTogMC4wLCBkdXJhdGlvbjogMy4wLCBzdGFydDogMC41LCBlbmQ6IDAuNSB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5CbGlua1IsIHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc3RhcnQ6IDAuNSwgZW5kOiAwLjAgfV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBwLmJsZW5kU2hhcGVBbmltYXRpb25RdWV1ZS5wdXNoKFt7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5BbmdyeSwgdGltZTogMC4wLCBkdXJhdGlvbjogMC41LCBzdGFydDogMC4wLCBlbmQ6IDAuNSB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5BbmdyeSwgdGltZTogMC4wLCBkdXJhdGlvbjogMy4wLCBzdGFydDogMC41LCBlbmQ6IDAuNSB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5BbmdyeSwgdGltZTogMC4wLCBkdXJhdGlvbjogMC41LCBzdGFydDogMC41LCBlbmQ6IDAuMCB9LCB7IG5hbWU6IFRIUkVFLlZSTVNjaGVtYS5CbGVuZFNoYXBlUHJlc2V0TmFtZS5PLCB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHN0YXJ0OiAwLjAsIGVuZDogMS4wIH0sIHsgbmFtZTogVEhSRUUuVlJNU2NoZW1hLkJsZW5kU2hhcGVQcmVzZXROYW1lLk8sIHRpbWU6IDAuMCwgZHVyYXRpb246IDMuMCwgc3RhcnQ6IDEuMCwgZW5kOiAxLjAgfSwgeyBuYW1lOiBUSFJFRS5WUk1TY2hlbWEuQmxlbmRTaGFwZVByZXNldE5hbWUuTywgdGltZTogMC4wLCBkdXJhdGlvbjogMC41LCBzdGFydDogMS4wLCBlbmQ6IDAuMCB9XSk7XHJcbiAgICAgICAgICAgIH0qL1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCBldmVudCA9PiB7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gYXBwLiRyZWZzLnRocmVlO1xyXG4gICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSBlbGVtZW50Lm9mZnNldExlZnQgLSAod2luZG93LmlubmVyV2lkdGggLSBlbGVtZW50Lm9mZnNldFdpZHRoKTtcclxuICAgIGNvbnN0IHkgPSBldmVudC5jbGllbnRZIC0gZWxlbWVudC5vZmZzZXRUb3AgLSAod2luZG93LmlubmVySGVpZ2h0IC0gZWxlbWVudC5vZmZzZXRIZWlnaHQpO1xyXG4gICAgY29uc3QgdyA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICBjb25zdCBoID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgbW91c2UueCA9ICh4IC8gdykgKiAyIC0gMTtcclxuICAgIG1vdXNlLnkgPSAtKHkgLyBoKSAqIDIgKyAxO1xyXG5cclxuICAgIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLCBjYW1lcmEpO1xyXG5cclxuICAgIGlmIChyYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbiwgdHJ1ZSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGFwcC5hY3RpdmF0ZSgpO1xyXG4gICAgfVxyXG59KTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGV2ZW50ID0+IHtcclxuICAgIGlmIChldmVudC5jdHJsS2V5KSB7XHJcbiAgICAgICAgY29udHJvbHMuZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbn0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGV2ZW50ID0+IHtcclxuICAgIGNvbnRyb2xzLmVuYWJsZWQgPSBmYWxzZTtcclxufSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGV2ZW50ID0+IHtcclxuICAgIGlmICghY29udHJvbHMuZW5hYmxlZCAmJiBldmVudC5idXR0b24gPT09IDApIHtcclxuICAgICAgICBsZXQgbWluRGlzdGFuY2UgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICBsZXQgYmVzdEludGVyc2VjdCA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGFwcC4kcmVmcy50aHJlZTtcclxuICAgICAgICBjb25zdCB4ID0gZXZlbnQuY2xpZW50WCAtIGVsZW1lbnQub2Zmc2V0TGVmdCAtICh3aW5kb3cuaW5uZXJXaWR0aCAtIGVsZW1lbnQub2Zmc2V0V2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IHkgPSBldmVudC5jbGllbnRZIC0gZWxlbWVudC5vZmZzZXRUb3AgLSAod2luZG93LmlubmVySGVpZ2h0IC0gZWxlbWVudC5vZmZzZXRIZWlnaHQpO1xyXG4gICAgICAgIGNvbnN0IHcgPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIGNvbnN0IGggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgbW91c2UueCA9ICh4IC8gdykgKiAyIC0gMTtcclxuICAgICAgICBtb3VzZS55ID0gLSh5IC8gaCkgKiAyICsgMTtcclxuXHJcbiAgICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGludGVyc2VjdCBvZiByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbiwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKGludGVyc2VjdC5kaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBiZXN0SW50ZXJzZWN0ID0gaW50ZXJzZWN0O1xyXG4gICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBpbnRlcnNlY3QuZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChiZXN0SW50ZXJzZWN0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxldCBzcHJpbmdCb25lSW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgZHJhZ2dhYmxlQm9uZSA9IHsgcG9pbnQ6IHsgeDogeCwgeTogeSB9LCBkaXJlY3Rpb246IHsgeDogMCwgeTogMCwgfSwgZGlzdGFuY2U6IDAsIGluZGV4OiAtMSB9O1xyXG4gICAgICAgICAgICBtaW5EaXN0YW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lR3JvdXAgb2YgdnJtTW9kZWwuc3ByaW5nQm9uZU1hbmFnZXIuc3ByaW5nQm9uZUdyb3VwTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lIG9mIHNwcmluZ0JvbmVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gc3ByaW5nQm9uZS5ib25lLmdldFdvcmxkUG9zaXRpb24obmV3IFRIUkVFLlZlY3RvcjMoKSkuZGlzdGFuY2VUbyhiZXN0SW50ZXJzZWN0LnBvaW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlQm9uZS5pbmRleCA9IHNwcmluZ0JvbmVJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNwcmluZ0JvbmVJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYXBwLmNoYXJhY3RlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYXBwLnNlcXVlbmNlUXVldWUucHVzaChhcHAucHJlcGFyZShhcHAuY2hhcmFjdGVyLnNlcXVlbmNlcy5maWx0ZXIoKHgpID0+IHgubmFtZSA9PT0gXCJUb3VjaFN0YXJ0XCIpLCBiZXN0SW50ZXJzZWN0Lm9iamVjdC5uYW1lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBldmVudCA9PiB7XHJcbiAgICAvKmlmICh2cm1Nb2RlbCkge1xyXG4gXHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBDQU1FUkFfWiAqIE1hdGgudGFuKENBTUVSQV9GT1YgLyAzNjAuMCAqIE1hdGguUEkpO1xyXG4gICAgICAgIGNvbnN0IHB4ID0gKDIuMCAqIGV2ZW50LmNsaWVudFggLSB3aW5kb3cuaW5uZXJXaWR0aCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiByYW5nZTtcclxuICAgICAgICBjb25zdCBweSA9IC0oMi4wICogZXZlbnQuY2xpZW50WSAtIHdpbmRvdy5vdXRlckhlaWdodCkgLyB3aW5kb3cub3V0ZXJIZWlnaHQgKiByYW5nZTtcclxuIFxyXG4gICAgICAgIHZybU1vZGVsLmh1bWFub2lkLmdldEJvbmVOb2RlKFRIUkVFLlZSTVNjaGVtYS5IdW1hbm9pZEJvbmVOYW1lLkhpcHMpLnBvc2l0aW9uLnNldChweCwgcHksIDAuMCk7XHJcbiAgICB9Ki9cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBhcHAuJHJlZnMudGhyZWU7XHJcbiAgICBjb25zdCB4ID0gZXZlbnQuY2xpZW50WCAtIGVsZW1lbnQub2Zmc2V0TGVmdCAtICh3aW5kb3cuaW5uZXJXaWR0aCAtIGVsZW1lbnQub2Zmc2V0V2lkdGgpO1xyXG4gICAgY29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSBlbGVtZW50Lm9mZnNldFRvcCAtICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBlbGVtZW50Lm9mZnNldEhlaWdodCk7XHJcbiAgICBjb25zdCB3ID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIGNvbnN0IGggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcclxuXHJcbiAgICBtb3VzZS54ID0gKHggLyB3KSAqIDIgLSAxO1xyXG4gICAgbW91c2UueSA9IC0oeSAvIGgpICogMiArIDE7XHJcblxyXG4gICAgaWYgKCFjb250cm9scy5lbmFibGVkICYmIGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xyXG4gICAgICAgIGxvb2tBbmltYXRpb24gPSB7IHRpbWU6IDAuMCwgZHVyYXRpb246IDAuNSwgc291cmNlOiB7IHg6IGxvb2tBdFRhcmdldC5wb3NpdGlvbi54LCB5OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueSB9LCB0YXJnZXQ6IHsgeDogKHggLSAwLjUgKiB3KSAvIHcgKiAxMC4wLCB5OiAoeSAtIDAuNSAqIGgpIC8gaCAqIC0xMC4wIH0gfTtcclxuXHJcbiAgICAgICAgaWYgKGRyYWdnYWJsZUJvbmUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgdmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjIoZHJhZ2dhYmxlQm9uZS5wb2ludC54IC0geCwgeSAtIGRyYWdnYWJsZUJvbmUucG9pbnQueSk7XHJcblxyXG4gICAgICAgICAgICBkcmFnZ2FibGVCb25lLmRpcmVjdGlvbiA9IHZlY3Rvci5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgZHJhZ2dhYmxlQm9uZS5kaXN0YW5jZSA9IE1hdGguc3FydCgoZHJhZ2dhYmxlQm9uZS5wb2ludC54IC0geCkgKiAoZHJhZ2dhYmxlQm9uZS5wb2ludC54IC0geCkgKyAoZHJhZ2dhYmxlQm9uZS5wb2ludC55IC0geSkgKiAoZHJhZ2dhYmxlQm9uZS5wb2ludC55IC0geSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBldmVudCA9PiB7XHJcbiAgICBpZiAoIWNvbnRyb2xzLmVuYWJsZWQgJiYgZXZlbnQuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgZHJhZ2dhYmxlQm9uZSA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChhcHAuY2hhcmFjdGVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGFwcC5zZXF1ZW5jZVF1ZXVlLnB1c2goYXBwLnByZXBhcmUoYXBwLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiVG91Y2hFbmRcIikpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgZXZlbnQgPT4ge1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgY29uc3QgZWxlbWVudCA9IGFwcC4kcmVmcy50aHJlZTtcclxuICAgIGNvbnN0IHggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYIC0gZWxlbWVudC5vZmZzZXRMZWZ0IC0gKHdpbmRvdy5pbm5lcldpZHRoIC0gZWxlbWVudC5vZmZzZXRXaWR0aCk7XHJcbiAgICBjb25zdCB5ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIGVsZW1lbnQub2Zmc2V0VG9wIC0gKHdpbmRvdy5pbm5lckhlaWdodCAtIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcclxuICAgIGNvbnN0IHcgPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgY29uc3QgaCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgIG1vdXNlLnggPSAoeCAvIHcpICogMiAtIDE7XHJcbiAgICBtb3VzZS55ID0gLSh5IC8gaCkgKiAyICsgMTtcclxuXHJcbiAgICByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSwgY2FtZXJhKTtcclxuXHJcbiAgICBpZiAodGFwQ291bnQgPT0gMCkge1xyXG4gICAgICAgIHRhcENvdW50Kys7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0YXBDb3VudCA9IDA7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgbGV0IG1pbkRpc3RhbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgbGV0IGJlc3RJbnRlcnNlY3QgPSBudWxsO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpbnRlcnNlY3Qgb2YgcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoc2NlbmUuY2hpbGRyZW4sIHRydWUpKSB7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3QuZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdEludGVyc2VjdCA9IGludGVyc2VjdDtcclxuICAgICAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gaW50ZXJzZWN0LmRpc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYmVzdEludGVyc2VjdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nQm9uZUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGRyYWdnYWJsZUJvbmUgPSB7IHBvaW50OiB7IHg6IHgsIHk6IHkgfSwgZGlyZWN0aW9uOiB7IHg6IDAsIHk6IDAsIH0sIGRpc3RhbmNlOiAwLCBpbmRleDogLTEgfTtcclxuICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZUdyb3VwIG9mIHZybU1vZGVsLnNwcmluZ0JvbmVNYW5hZ2VyLnNwcmluZ0JvbmVHcm91cExpc3QpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ByaW5nQm9uZSBvZiBzcHJpbmdCb25lR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHNwcmluZ0JvbmUuYm9uZS5nZXRXb3JsZFBvc2l0aW9uKG5ldyBUSFJFRS5WZWN0b3IzKCkpLmRpc3RhbmNlVG8oYmVzdEludGVyc2VjdC5wb2ludCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZUJvbmUuaW5kZXggPSBzcHJpbmdCb25lSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzcHJpbmdCb25lSW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFwcC5jaGFyYWN0ZXIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFwcC5zZXF1ZW5jZVF1ZXVlLnB1c2goYXBwLnByZXBhcmUoYXBwLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiVG91Y2hTdGFydFwiKSwgYmVzdEludGVyc2VjdC5vYmplY3QubmFtZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb29rQW5pbWF0aW9uID0geyB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHNvdXJjZTogeyB4OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueCwgeTogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgfSwgdGFyZ2V0OiB7IHg6ICh4IC0gMC41ICogdykgLyB3ICogMTAuMCwgeTogKHkgLSAwLjUgKiBoKSAvIGggKiAtMTAuMCB9IH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChyYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbiwgdHJ1ZSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBhcHAuYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhcENvdW50ID0gMDtcclxuICAgIH1cclxufSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIGV2ZW50ID0+IHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBhcHAuJHJlZnMudGhyZWU7XHJcbiAgICBjb25zdCB4ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIGVsZW1lbnQub2Zmc2V0TGVmdCAtICh3aW5kb3cuaW5uZXJXaWR0aCAtIGVsZW1lbnQub2Zmc2V0V2lkdGgpO1xyXG4gICAgY29uc3QgeSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgLSBlbGVtZW50Lm9mZnNldFRvcCAtICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBlbGVtZW50Lm9mZnNldEhlaWdodCk7XHJcbiAgICBjb25zdCB3ID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIGNvbnN0IGggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcclxuXHJcbiAgICBsb29rQW5pbWF0aW9uID0geyB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHNvdXJjZTogeyB4OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueCwgeTogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgfSwgdGFyZ2V0OiB7IHg6ICh4IC0gMC41ICogdykgLyB3ICogMTAuMCwgeTogKHkgLSAwLjUgKiBoKSAvIGggKiAtMTAuMCB9IH07XHJcbn0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGV2ZW50ID0+IHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIGNvbnN0IGVsZW1lbnQgPSBhcHAuJHJlZnMudGhyZWU7XHJcbiAgICBjb25zdCB4ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIGVsZW1lbnQub2Zmc2V0TGVmdCAtICh3aW5kb3cuaW5uZXJXaWR0aCAtIGVsZW1lbnQub2Zmc2V0V2lkdGgpO1xyXG4gICAgY29uc3QgeSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgLSBlbGVtZW50Lm9mZnNldFRvcCAtICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBlbGVtZW50Lm9mZnNldEhlaWdodCk7XHJcbiAgICBjb25zdCB3ID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIGNvbnN0IGggPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcclxuXHJcbiAgICBsb29rQW5pbWF0aW9uID0geyB0aW1lOiAwLjAsIGR1cmF0aW9uOiAwLjUsIHNvdXJjZTogeyB4OiBsb29rQXRUYXJnZXQucG9zaXRpb24ueCwgeTogbG9va0F0VGFyZ2V0LnBvc2l0aW9uLnkgfSwgdGFyZ2V0OiB7IHg6ICh4IC0gMC41ICogdykgLyB3ICogMTAuMCwgeTogKHkgLSAwLjUgKiBoKSAvIGggKiAtMTAuMCB9IH07XHJcblxyXG4gICAgaWYgKGFwcC5jaGFyYWN0ZXIgIT09IG51bGwpIHtcclxuICAgICAgICBhcHAuc2VxdWVuY2VRdWV1ZS5wdXNoKGFwcC5wcmVwYXJlKGFwcC5jaGFyYWN0ZXIuc2VxdWVuY2VzLmZpbHRlcigoeCkgPT4geC5uYW1lID09PSBcIlRvdWNoRW5kXCIpKSk7XHJcbiAgICB9XHJcbn0pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIGV2ZW50ID0+IHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG59KTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZXZlbnQpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwiY29weVwiO1xyXG59LCBmYWxzZSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZXZlbnQpID0+IHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBmb3IgKGxldCBmaWxlIG9mIGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoXCIudnJtXCIpKSB7XHJcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvYWRlci5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XHJcbiAgICAgICAgICAgICAgICBsb2FkZXIubG9hZChcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5yZXN1bHQsXHJcbiAgICAgICAgICAgICAgICAgICAgKGdsdGYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVlJNLmZyb20oZ2x0ZikudGhlbigodnJtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodnJtTW9kZWwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5yZW1vdmUodnJtTW9kZWwuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybU1vZGVsID0gdnJtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZCh2cm0uc2NlbmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybS5zY2VuZS5yb3RhdGlvbi55ID0gTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybS5sb29rQXQudGFyZ2V0ID0gbG9va0F0VGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZybVNwcmluZ0JvbmVzLnNwbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwcmluZ0JvbmVHcm91cCBvZiB2cm1Nb2RlbC5zcHJpbmdCb25lTWFuYWdlci5zcHJpbmdCb25lR3JvdXBMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcHJpbmdCb25lIG9mIHNwcmluZ0JvbmVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2cm1TcHJpbmdCb25lcy5wdXNoKHsgZ3Jhdml0eURpcjogc3ByaW5nQm9uZS5ncmF2aXR5RGlyLmNsb25lKCksIGdyYXZpdHlQb3dlcjogc3ByaW5nQm9uZS5ncmF2aXR5UG93ZXIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5wcm9ncmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgKHByb2dyZXNzKSA9PiBhcHAucHJvZ3Jlc3MgPSBwcm9ncmVzcy5sb2FkZWQgLyBwcm9ncmVzcy50b3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpIHtcclxuICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblxyXG4gICAgICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmNoYXJhY3RlciA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHAubm90aWZ5KHsgdGV4dDogZXJyb3IubWVzc2FnZSwgYWNjZW50OiBhcHAuY2hhcmFjdGVyLmFjY2VudCwgaW1hZ2U6IGFwcC5jaGFyYWN0ZXIuaW1hZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGFwcC5zZXF1ZW5jZVF1ZXVlLnNwbGljZSgwKTtcclxuICAgICAgICAgICAgICAgIGFwcC5zZXF1ZW5jZVF1ZXVlLnB1c2goYXBwLnByZXBhcmUoYXBwLmNoYXJhY3Rlci5zZXF1ZW5jZXMuZmlsdGVyKCh4KSA9PiB4Lm5hbWUgPT09IFwiU3RhcnRcIikpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0sIGZhbHNlKTtcclxud2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZSA9PiB7XHJcbiAgICBpZiAoZS5tYXRjaGVzKSB7XHJcbiAgICAgICAgYXBwLmlzRGFya01vZGUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAuaXNEYXJrTW9kZSA9IGZhbHNlO1xyXG4gICAgfVxyXG59KTsiXSwic291cmNlUm9vdCI6IiJ9